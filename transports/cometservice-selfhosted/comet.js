
/*
 * Title: FM Core for JavaScript
 * Version: 2.8.1
 * Copyright Frozen Mountain Software 2011+
 */

!function(t,e,n){if("function"==typeof define&&define.amd)define(t,e,n);else if("object"==typeof exports){for(var r=0;r<e.length;r++)require("./"+e[r]);module.exports=n()}else this[t]=n()}("fm",[],function(){"undefined"==typeof global||global.window||(global.window=global,global.document={cookie:""}),window.fm||(window.fm={});var JSON;JSON||(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,s,i,o,a=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSONFM&&(u=u.toJSONFM(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;i>n;n+=1)o[n]=str(n,u)||"null";return s=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],s=str(r,u),s&&o.push(quote(r)+(gap?": ":":")+s));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(s=str(r,u),s&&o.push(quote(r)+(gap?": ":":")+s));return s=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,s}}"function"!=typeof Date.prototype.toJSONFM&&(Date.prototype.toJSONFM=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSONFM=Number.prototype.toJSONFM=Boolean.prototype.toJSONFM=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","  ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,s=t[e];if(s&&"object"==typeof s)for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r=walk(s,n),void 0!==r?s[n]=r:delete s[n]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),fm.getVersion=function(){return"2.8.1"},fm.object=function(){function t(){}return t}();var indexOf=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};fm.util=function(){function t(){}return t._xdCache={},t.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.isPlainObject=function(t){var e,n,r,s;if(!t||"[object Object]"!==Object.prototype.toString.call(t)||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!Object.prototype.hasOwnProperty.call(t,"constructor")&&!Object.prototype.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return e=n,!1}for(r in t)s=0;return void 0===r||Object.prototype.hasOwnProperty.call(t,r)},t.canAttachProperties=function(t,e){var n,r,s,i;for(n in e)if(i=e[n],s="set"+n.charAt(0).toUpperCase()+n.substring(1),r=t[s],!r||"[object Function]"!==Object.prototype.toString.call(r))return!1;return!0},t.attachProperties=function(t,e){var n,r,s,i,o;r=[];for(n in e)o=e[n],i="set"+n.charAt(0).toUpperCase()+n.substring(1),s=t[i],s&&"[object Function]"===Object.prototype.toString.call(s)?r.push(s.call(t,o)):(s=t.setExtensionValue,s&&"[object Function]"===Object.prototype.toString.call(s)?"[object Function]"===Object.prototype.toString.call(o)?r.push(fm.log.warn('Property "'+n+'" did not match any known setter and has a function as its value. Please verify your callback names are correct.')):(s.call(t,n,o),r.push(fm.log.debug('Property "'+n+'" did not match any known setter and is assumed to be an extension value.'))):r.push(fm.log.debug('Property "'+n+'" did not match any known setter and was ignored.')));return r},t.isIE=function(){return!!document.protocol},t.isIE6=function(){return t.isIE()&&!window.XMLHttpRequest},t.isIE7=function(){return t.isIE()&&window.XMLHttpRequest&&!document.implementation},t.isIE8=function(){return t.isIE()&&document.implementation&&document.implementation.hasFeature&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},t.isIE9=function(){return t.isIE()&&document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},t.isAndroid=function(){return navigator.userAgent.match(/Android/i)},t.isBlackBerry=function(){return navigator.userAgent.match(/BlackBerry/i)},t.isiOS=function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},t.isOpera=function(){return navigator.userAgent.match(/Opera Mini/i)},t.isWindows=function(){return navigator.userAgent.match(/IEMobile/i)},t.isMobile=function(){return t.isAndroid()||t.isBlackBerry()||t.isiOS()||t.isOpera()||t.isWindows()},t.hasActiveX=function(){var t;return t=void 0!==window.ActiveXObject,t&&"undefined"!=typeof window.external.msActiveXFilteringEnabled&&window.external.msActiveXFilteringEnabled()&&(t=!1,fm.log.debug("ActiveX is filtered and cannot be used.")),t},t.hasJava=function(){return t.getJavaVersion()},t.getJavaVersion=function(){var e,n,r,s,i,o,a;if(t.isIE()&&t.hasActiveX())return t.isJavaWebStartInstalledActiveX("1.9.0")?"1.9.0":t.isJavaWebStartInstalledActiveX("1.8.0")?"1.8.0":t.isJavaWebStartInstalledActiveX("1.7.0")?"1.7.0":t.isJavaWebStartInstalledActiveX("1.6.0")?"1.6.0":t.isJavaWebStartInstalledActiveX("1.5.0")?"1.5.0":t.isJavaWebStartInstalledActiveX("1.4.2")?"1.4.2":!1;if(a=0,s=window.navigator.mimeTypes)for(e=0,n=s.length;n>e;e++)r=s[e],o=r.type,o.indexOf("java")>0&&o.indexOf("jpi")>0&&o.indexOf("applet")>0&&(i=o.split("="),a=i[i.length-1]);return a},t.isJavaWebStartInstalledActiveX=function(e){var n,r;try{return t.hasActiveX()&&null!==new ActiveXObject("JavaWebStart.isInstalled."+e+".0")}catch(r){return n=r,!1}},t.isXD=function(e,n){var r,s,i,o,a,u;try{return n?(o=t.getHost(e),a=t.getHost(n),t.compareHost(o,a)):(t._xdCache[e]||(i=t.getHost(e),u=t.getHost(),t._xdCache[e]=t.compareHost(i,u)?"y":"n"),"y"===t._xdCache[e])}catch(s){return r=s,!1}},t.getHost=function(e){var n;return e?(n=t.parseUrl(e),n.protocol?n:t.getCurrentHost()):t.getCurrentHost()},t.compareHost=function(t,e){return t.server!==e.server||(t.port||e.port)&&t.port!==e.port},t.getCurrentHost=function(){var t;return t=document.location,{protocol:t.protocol,server:t.hostname,port:t.port}},t.parseUrl=function(t){var e;if(e=/(((http|ws)s?:)\/\/)?([\-\w\.\*]+)+(:(\d+))?(\/([^\?]*(\?\S+)?)?)?/i.exec(t),e.length<6)throw new Error("Invalid URL ("+t+").");return{prefix:e[1],protocol:e[2],server:e[4],postfix:e[5],port:e[6],path:e[7]}},t.absolutizeUrl=function(e){var n,r,s;return e?(s=t.parseUrl(e),s.protocol?-1===s.server.indexOf("*")?e:(e=s.prefix+t.wildcard(s.server),s.postfix&&(e+=s.postfix),s.path&&(e+=s.path),e):(r=document.location,n=r.protocol+"//"+r.host,"/"===e.charAt(0)?n+e:n+r.pathname.substring(0,r.pathname.lastIndexOf("/")+1)+e)):e},t.wildcard=function(e){return e.replace("*",t.getWildcard())},t._chars="abcdefghijklmnopqrstuvwxyz",t.getWildcard=function(){return t._wildcard||(t._wildcard=t.randomChar(t._chars)),t._wildcard},t.randomChar=function(t){return t?t.charAt(Math.floor(Math.random()*t.length)):t},t.observe=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},t.unobserve=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},t.observeAttr=function(t,e){var n,r,s,i;return n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,r=function(){var t,e;if(e=document.createElement("p"),t=!1,e.addEventListener)e.addEventListener("DOMAttrModified",function(){return t=!0},!1);else{if(!e.attachEvent)return!1;e.attachEvent("onDOMAttrModified",function(){return t=!0})}return e.setAttribute("id","target"),t},n?(i={subtree:!1,attributes:!0},s=new n(function(t){var n,r,s,i;for(i=[],n=0,r=t.length;r>n;n++)s=t[n],i.push(e.call(s.target,s.attributeName));return i}),s.observe(t,i)):r()?t.on("DOMAttrModified",function(n){return e.call(t,n.attrName)}):indexOf.call(document.body,"onpropertychange")>=0?t.on("propertychange",function(n){return e.call(t,window.event.propertyName)}):void 0},t.extend=function(t,e){var n;for(n in e)t[n]=e[n];return t},t.logging=!0,t.log=function(e){var n;if(t.logging)return document.body?(t._logContainer||(t._logContainer=document.createElement("div"),t._logContainer.className="fm-log",t._logContainer.style.position="absolute",t._logContainer.style.zIndex=99999,t._logContainer.style.right="5px",t._logContainer.style.top="5px",document.body.appendChild(t._logContainer)),n=document.createElement("div"),n.innerHTML=e,t._logContainer.appendChild(n)):void t.addOnLoad(function(){return t.log(e)})},t._loadFunctions=[],t.addOnLoad=function(e){return t._readyRun?window.setTimeout(e,1):t._loadFunctions.push(e)},t.ready=function(){return t._readyRun?void 0:(t._readyRun=!0,window.setTimeout(function(){var e,n,r,s,i;for(s=t._loadFunctions,i=[],e=0,n=s.length;n>e;e++)r=s[e],i.push(r());return i},1))},t.bindReady=function(){var e;if(!t._readyBound){if(t._readyBound=!0,"complete"===document.readyState)return window.setTimeout(function(){return t.ready()},1);if(document.addEventListener)return document.addEventListener("DOMContentLoaded",function(){return document.removeEventListener("DOMContentLoaded",arguments.callee,!1),t.ready()},!1),window.addEventListener("load",function(){return window.removeEventListener("load",arguments.callee,!1),t.ready()},!1);if(!document.attachEvent)return t.ready();document.attachEvent("onreadystatechange",function(){return"complete"===document.readyState?(document.detachEvent("onreadystatechange",arguments.callee),t.ready()):void 0});try{e=null===window.frameElement}catch(n){}return document.documentElement.doScroll&&e?function(){var e,n;if(!t._loaded){try{document.documentElement.doScroll("left")}catch(n){return e=n,void window.setTimeout(arguments.callee,0)}return t.ready()}}():void 0}},t._loaded||t.addOnLoad(function(){return t._loaded=!0}),t.bindReady(),t}(),fm.mathAssistant=function(){function t(){}return t.getPi=function(){return Math.PI},t.getE=function(){return Math.E},t.abs=function(t){return Math.abs(t)},t.acos=function(t){return Math.acos(t)},t.asin=function(t){return Math.asin(t)},t.atan=function(t){return Math.atan(t)},t.atan2=function(t,e){return Math.atan2(t,e)},t.ceil=function(t){return Math.ceil(t)},t.cos=function(t){return Math.cos(t)},t.cosh=function(t){return(Math.exp(t)+Math.exp(-t))/2},t.exp=function(t){return Math.exp(t)},t.floor=function(t){return Math.floor(t)},t.log=function(t){return Math.log(t)},t.log10=function(t){return Math.log(t)/2.302585092994046},t.max=function(t,e){return Math.max(t,e)},t.min=function(t,e){return Math.min(t,e)},t.pow=function(t,e){return Math.pow(t,e)},t.sin=function(t){return Math.sin(t)},t.sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2},t.sqrt=function(t){return Math.sqrt(t)},t.tan=function(t){return Math.tan(t)},t.tanh=function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},t}(),fm.global=function(){function t(){}return t.tryCast=function(t,e){return!t||t instanceof e?t:null},t.tryCastArray=function(t){return!t||t instanceof Array?t:null},t.tryCastObject=function(t){return!t||t instanceof Object?t:null},t.tryCastString=function(t){return t&&"string"!=typeof t?null:t},t.tryCastInt=function(t){return t&&isNaN(parseInt(t))?null:t},t.tryCastFloat=function(t){return t&&isNaN(parseFloat(t))?null:t},t}(),fm.stringComparison={CurrentCulture:0,CurrentCultureIgnoreCase:1,InvariantCulture:2,InvariantCultureIgnoreCase:3,Ordinal:4,OrdinalIgnoreCase:5};var bind=function(t,e){return function(){return t.apply(e,arguments)}};fm.dateTime=function(){function t(){this.getSecond=bind(this.getSecond,this),this.getMinute=bind(this.getMinute,this),this.getHour=bind(this.getHour,this),this.getDay=bind(this.getDay,this),this.getMonth=bind(this.getMonth,this),this.getYear=bind(this.getYear,this),this.toUniversalTime=bind(this.toUniversalTime,this),this.getTicks=bind(this.getTicks,this);var t,e,n,r,s,i;if(1===arguments.length)this._date=arguments[0];else{if(6!==arguments.length)throw new Error("Unknown argument set.");i=arguments[0],r=arguments[1],t=arguments[2],e=arguments[3],n=arguments[4],s=arguments[5],this._date=new Date(Date.UTC(i,r-1,t,e,n,s))}}return t.getNow=function(){return new fm.dateTime(new Date)},t.getUtcNow=function(){return new fm.dateTime(new Date)},t.prototype.getTicks=function(){return 621355968e9+1e4*this._date.getTime()},t.prototype.toUniversalTime=function(){return new fm.dateTime(this._date)},t.prototype.getYear=function(){return this._date.getUTCFullYear()},t.prototype.getMonth=function(){return this._date.getUTCMonth()+1},t.prototype.getDay=function(){return this._date.getUTCDate()},t.prototype.getHour=function(){return this._date.getUTCHours()},t.prototype.getMinute=function(){return this._date.getUTCMinutes()},t.prototype.getSecond=function(){return this._date.getUTCSeconds()},t}(),fm.byteCollection=function(){function t(t){t?this._buffer=new Uint8Array(t):this._buffer=new Uint8Array}return t.prototype._buffer=null,t.prototype.count=function(){return this._buffer.length},t.prototype.add=function(t){var e,n;return e=this._buffer,n=new Uint8Array(e.length+1),n.set(e),n[e.length]=t,this._buffer=n},t.prototype.addRange=function(t){var e,n,r,s;return r=fm.global.tryCast(t,fm.byteCollection),r&&(t=r._buffer),e=this._buffer,n=t,s=new Uint8Array(e.length+n.length),s.set(e),s.set(n,e.length),this._buffer=s},t.prototype.removeRange=function(t,e){var n,r,s;return n=this._buffer.subarray(0,t),r=this._buffer.subarray(t+e),s=new Uint8Array(n.length+r.length),s.set(n),s.set(r,n.length),this._buffer=s},t.prototype.insertRange=function(t,e){var n,r,s,i,o;return i=fm.global.tryCast(e,fm.byteCollection),i&&(e=i._buffer),n=this._buffer.subarray(0,t),r=e,s=this._buffer.subarray(t),o=new Uint8Array(n.length+r.length+s.length),o.set(n),o.set(r,n.length),o.set(s,n.length+r.length),this._buffer=o},t.prototype.getRange=function(t,e){var n;return n=new Uint8Array(e),n.set(this._buffer.subarray(t,t+e)),n},t.prototype.get=function(t){return this._buffer[t]},t.prototype.toArray=function(){return new Uint8Array(this._buffer)},t}();var bind=function(t,e){return function(){return t.apply(e,arguments)}};fm.nameValueCollection=function(){function t(){this.getAllKeys=bind(this.getAllKeys,this),this.getKeys=bind(this.getKeys,this);var t,e,n;if(this._value={},1===arguments.length){e=arguments[0];for(t in e)n=e[t],this._value[t]=n}}return t.prototype.source=function(){return this._value},t.prototype.get=function(t){var e;for(e in this._value)if(e.toLowerCase()===t.toLowerCase())return this._value[e];return null},t.prototype.set=function(t,e){var n;for(n in this._value)if(n.toLowerCase()===t.toLowerCase())return void(this._value[n]=e);return this._value[t]=e},t.prototype.getCount=function(){var t,e;t=0;for(e in this._value)t++;return t},t.prototype.toHash=function(){return this._value},t.prototype.getKeys=function(){return this.getAllKeys()},t.prototype.getAllKeys=function(){var t,e;e=[];for(t in this._value)e.push(t);return e},t}(),fm.stringBuilder=function(){function t(){this._value="",1===arguments.length&&(this._value=arguments[0])}return t.prototype.append=function(t,e,n){return null!=e&&null!=n?this._value=this._value+t.substring(e,e+n):this._value=this._value+t,this},t.prototype.toString=function(){return this._value},t.prototype.getLength=function(){return this._value.length},t.prototype.remove=function(t,e){return this._value=this._value.substring(0,t)+this._value.substring(t+e),this},t}();var bind=function(t,e){return function(){return t.apply(e,arguments)}};fm.regex=function(){function t(t){this.isMatch=bind(this.isMatch,this),this.pattern=t}return t.prototype.pattern="",t.isMatch=function(t,e){return new RegExp(e).test(t)},t.prototype.isMatch=function(t){return new RegExp(this.pattern).test(t)},t}(),fm.bitAssistant=function(){function t(){}return t.getIntegerBytesNetwork=function(t){var e,n;return e=new Uint8Array(4),n=t%16777216,e[0]=(t-n)/16777216,t=n,n=t%65536,e[1]=(t-n)/65536,t=n,n=t%256,e[2]=(t-n)/256,e[3]=n,e},t.toIntegerNetwork=function(t,e){var n,r,s,i;return n=t[e],r=t[e+1],s=t[e+2],i=t[e+3],16777216*n+65536*r+256*s+1*i},t.copy=function(t,e,n,r,s){return n.set(t.subarray(e,e+s),r)},t.subArray=function(e,n,r){var s;return 2===arguments.length?t.subArray(e,n,e.length-n):(s=new Uint8Array(r),t.copy(e,n,s,0,r),s)},t}(),fm.uri=function(){function t(){}return t.escapeDataString=function(t){return encodeURIComponent(t)},t}(),fm.guid=function(){function t(){0===arguments.length?this._guid="00000000-0000-0000-0000-000000000000":this._guid=arguments[0]}return t.prototype.equals=function(t){return t?t.toString()===this._guid:!1},t.prototype.toString=function(){return this._guid},t.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=16*Math.random()|0,n="x"===t?e:3&e|8,n.toString(16)})},t.empty=new t,t}(),fm.holder=function(){function t(t){this._value=t}return t.prototype.getValue=function(){return this._value},t.prototype.setValue=function(t){return this._value=t},t}(),fm.delegate=function(){function t(){}return t.combine=function(t,e){var n,r,s,i,o,a,u,l,c,p;if(!t)return e;if(!e)return t;if(p=this,n=[],s=function(){var t,e,r,s;for(s=[],e=0,r=n.length;r>e;e++)t=n[e],s.push(t.apply(p,arguments));return s},t._chain)for(l=t._chain,i=0,a=l.length;a>i;i++)r=l[i],n.push(r);else n.push(t);if(e._chain)for(c=e._chain,o=0,u=c.length;u>o;o++)r=c[o],n.push(r);else n.push(e);return s._chain=n,s},t.remove=function(t,e){var n,r,s,i,o;if(!t||t===e)return null;if(t._chain)for(o=t._chain,r=s=0,i=o.length;i>s;r=++s)if(n=o[r],n===e){t._chain.splice(r,1);break}return t},t}();var bind=function(t,e){return function(){return t.apply(e,arguments)}};fm.stack=function(){function t(){this.peek=bind(this.peek,this),this.pop=bind(this.pop,this),this.push=bind(this.push,this),this._list=[]}return t.prototype.push=function(t){return this._list.push(t)},t.prototype.pop=function(){return this._list.pop()},t.prototype.peek=function(){return 0===this._list.length?null:this._list[this._list.length-1]},t}(),fm.managedThread=function(){function t(){}return t.currentThreadId=function(){return"0"},t}(),fm.deferrer=function(){function t(){}return t.defer=function(t,e,n){return window.setTimeout(function(e){return function(){return t(n)}}(this),e)},t}(),fm.dateTimeStyles={AssumeUniversal:1,AdjustToUniversal:2},fm.dateTimeFormatInfo=function(){function t(){}return t.getInvariantInfo=function(){return new fm.dateTimeFormatInfo},t}(),fm.convert=function(){function t(){}return t.toInt32=function(t){return t.charCodeAt()},t}(),fm.parseAssistant=function(){function t(){}return t.parseIntegerValue=function(t){return parseInt(t)},t.parseLongValue=function(t){return parseInt(t)},t.parseFloatValue=function(t){return parseFloat(t)},t.parseDoubleValue=function(t){return parseFloat(t)},t.parseDecimalValue=function(t){return parseFloat(t)},t.parseBooleanValue=function(t){return"true"===t.toLowerCase()||"y"===t.toLowerCase()||"1"===t?!0:!1},t.parseGuidValue=function(t){return new fm.guid(t)},t.tryParseIntegerValue=function(t,e){return isNaN(parseInt(t))?!1:(e.setValue(parseInt(t)),!0)},t.tryParseLongValue=function(t,e){return isNaN(parseInt(t))?!1:(e.setValue(parseInt(t)),!0)},t.tryParseFloatValue=function(t,e){return isNaN(parseFloat(t))?!1:(e.setValue(parseFloat(t)),!0)},t.tryParseDoubleValue=function(t,e){return isNaN(parseFloat(t))?!1:(e.setValue(parseFloat(t)),!0)},t.tryParseDecimalValue=function(t,e){return isNaN(parseFloat(t))?!1:(e.setValue(parseFloat(t)),!0)},t.tryParseBooleanValue=function(t,e){return"true"===t.toLowerCase()||"y"===t.toLowerCase()||"1"===t?e.setValue(!0):e.setValue(!1),!0},t.tryParseGuidValue=function(t,e){return/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/i.test(t)?(e.setValue(new fm.guid(t)),!0):!1},t}(),fm.stringExtensions=function(){function t(){}return t.empty="",t.toString=function(){return arguments[0]},t.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},t.concat=function(){var t,e,n,r,s,i,o;if(i="",1===arguments.length&&fm.util.isArray(arguments[0]))for(s=arguments[0],t=0,n=s.length;n>t;t++)o=s[t],i+=o;else for(e=0,r=arguments.length;r>e;e++)o=arguments[e],i+=o;return i},t.join=function(t,e){var n,r,s,i,o;for(i=new fm.stringBuilder,n=r=0,s=e.length;s>r;n=++r)o=e[n],n>0&&i.append(t),i.append(o);return i.toString()},t.split=function(t,e){var n,r,s,i,o,a,u,l;for(u=[],l=0,r=s=0,a=t.length-1;a>=0?a>=s:s>=a;r=a>=0?++s:--s)for(i=0,o=e.length;o>i;i++)n=e[i],n===t.charAt(r)&&(u.push(t.substring(l,r)),l=r+1);return u.push(t.substring(l,t.length)),u},t.isNullOrEmpty=function(t){var e;if(e="undefined"==typeof t||null===t||""===t,!(e||"string"==typeof t||t instanceof String))throw new Error("Object is not a string.");return e},t.indexOf=function(){var t,e,n;return e=arguments[0],t=arguments[1],arguments.length>2&&(n=arguments[2],n===fm.stringComparison.CurrentCultureIgnoreCase||n===fm.stringComparison.InvariantCultureIgnoreCase||n===fm.stringComparison.OrdinalIgnoreCase)?e.toLowerCase().indexOf(t.toLowerCase()):e.indexOf(t)},t.lastIndexOf=function(){var t,e,n;return e=arguments[0],t=arguments[1],arguments.length>2&&(n=arguments[2],n===fm.stringComparison.CurrentCultureIgnoreCase||n===fm.stringComparison.InvariantCultureIgnoreCase||n===fm.stringComparison.OrdinalIgnoreCase)?e.toLowerCase().lastIndexOf(t.toLowerCase()):e.lastIndexOf(t)},t.startsWith=function(){var t,e,n;return e=arguments[0],t=arguments[1],arguments.length>2&&(n=arguments[2],n===fm.stringComparison.CurrentCultureIgnoreCase||n===fm.stringComparison.InvariantCultureIgnoreCase||n===fm.stringComparison.OrdinalIgnoreCase)?0===e.toLowerCase().indexOf(t.toLowerCase()):0===e.indexOf(t)},t.endsWith=function(){var t,e,n;return e=arguments[0],t=arguments[1],arguments.length>2&&(n=arguments[2],n===fm.stringComparison.CurrentCultureIgnoreCase||n===fm.stringComparison.InvariantCultureIgnoreCase||n===fm.stringComparison.OrdinalIgnoreCase)?-1!==e.toLowerCase().indexOf(t.toLowerCase(),e.length-t.length):-1!==e.indexOf(t,e.length-t.length)},t.compareTo=function(){var t,e;return t=arguments[0],e=arguments[1],t.toString()<e.toString()?-1:t.toString()>e.toString()?1:0},t.format=function(){var t,e,n,r,s,i;if(e=arguments[0],t=[],arguments.length>1)if(fm.util.isArray(arguments[1]))t=arguments[1];else for(r=s=1,i=arguments.length-1;i>=1?i>=s:s>=i;r=i>=1?++s:--s)t.push(arguments[r]?arguments[r]:"");return n=function(e,n){return null!=t[n]?t[n]:e},e.replace(/{(\d+)}/g,n)},t.toLower=function(){return arguments[0].toLowerCase()},t.toUpper=function(){return arguments[0].toUpperCase()},t.getLength=function(){return arguments[0].length},t.getChars=function(t){var e,n,r,s;for(e=[],n=r=0,s=t.length-1;s>=0?s>=r:r>=s;n=s>=0?++r:--r)e.push(t[n]);return e},t.substring=function(t,e,n){return t.substring(e,e+n)},t}(),fm.arrayExtensions=function(){function t(){}return t.getCount=function(t){return t.length},t.add=function(t,e){return t.push(e)},t.remove=function(t,e){var n,r,s,i;for(n=r=0,s=t.length;s>r;n=++r)if(i=t[n],i===e)return t.splice(n,1),!0;return!1},t.toArray=function(t){return t},t.clear=function(t){return t.splice(0,t.length)},t.addRange=function(t,e){var n,r,s,i;for(s=[],n=0,r=e.length;r>n;n++)i=e[n],s.push(t.push(i));return s},t.contains=function(t,e){var n,r,s;for(n=0,r=t.length;r>n;n++)if(s=t[n],s===e)return!0;return!1},t}(),fm.hashExtensions=function(){function t(){}return t.getCount=function(t){var e,n;e=0;for(n in t)e++;return e},t.getKeys=function(t){var e,n;n=[];for(e in t)n.push(e);return n},t.getValues=function(t){var e,n,r;r=[];for(e in t)n=t[e],r.push(n);return r},t.tryGetValue=function(e,n,r){return t.containsKey(e,n)?(r.setValue(e[n]),!0):!1},t.containsKey=function(t,e){return e in t?!0:!1},t.containsValue=function(t,e){var n,r;for(n in t)if(r=t[n],r===e)return!0;return!1},t.add=function(t,e,n){return t[e]=n},t.remove=function(t,e){return delete t[e]},t.clear=function(t){var e,n;n=[];for(e in t)n.push(delete t[e]);return n},t}(),fm.intExtensions=function(){function t(){}return t.toString=function(){return arguments[0].toString()},t}(),fm.xhr=function(){function t(){}return t._count=0,t._current={},t._disableBinary=!1,t.setDisableBinary=function(e){return t._disableBinary=e},t.getDisableBinary=function(){return"undefined"==typeof Uint8Array?!0:t._disableBinary},fm.util.observe(window,"unload",function(){var e,n,r;n=t._current;for(e in n){r=n[e];try{r._abortingOnUnload=!0,r.abort()}catch(s){}}}),t.failureHandler=function(t,e){return t.onFailure?t.onFailure({message:e}):void 0},t.successHandler=function(e,n){var r,s,i,o,a,u,l,c,p,h,f,g,d,m;if(e.onSuccess){if(u={},a=n.getAllResponseHeaders())for(d=a.split(/\r?\n/),l=0,c=d.length;c>l;l++)p=d[l],f=p.split(":"),2===f.length&&(h=f[0].replace(/\s+$/,""),m=f[1].replace(/^\s+/,""),u[h]=m);if(r=null,s=null,g=!1,!t.getDisableBinary())try{"arraybuffer"===n.responseType&&n.response&&(s=new Uint8Array(n.response),"application/octet-stream"!==u["Content-Type"]&&(r=fm.encoding.getUtf8().getString(s)),g=!0)}catch(o){i=o,t.setDisableBinary(!0)}return g||(r=n.responseText),e.onSuccess({content:r,contentBinary:s,statusCode:n.status,headers:u})}},t.handler=function(e,n){return n._aborting?t.failureHandler(e,"XHR request timed out."):(e.onResponseReceived&&e.onResponseReceived(n),t.successHandler(e,n))},t.send=function(e){var n,r,s,i,o,a,u,l,c,p,h,f,g,d,m;e=fm.util.extend({sync:!1,url:"",method:"POST",content:null,contentBinary:null,headers:{},timeout:15e3,abortOnUnload:!1,cacheBusterParameterName:"_cb",onRequestCreated:function(){},onResponseReceived:function(){},onFailure:function(){},onSuccess:function(){}},e||{});try{if(window.XMLHttpRequest)d=new XMLHttpRequest;else{try{d=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(y){}if(!d)try{d=new ActiveXObject("Microsoft.XMLHTTP")}catch(y){}}if(!d)return!1;f=e.url,"GET"===e.method&&(f=f+(-1===f.indexOf("?")?"?":"&")+e.cacheBusterParameterName+"="+(new Date).getTime()),d.open(e.method,f,!e.sync),p=e.headers;for(c in p)g=p[c],"referer"!==c.toLowerCase()&&"origin"!==c.toLowerCase()&&d.setRequestHeader(c,g);if(t.getDisableBinary()&&d.setRequestHeader("X-FM-DisableBinary","true"),"withCredentials"in d&&(d.withCredentials=!0),!t.getDisableBinary()&&!e.sync)try{d.responseType="arraybuffer"}catch(o){r=o,t.setDisableBinary(!0)}if(e.onRequestCreated&&e.onRequestCreated(d),e.abortOnUnload&&(n=++t._count,t._current[n]=d),e.sync||(d.onreadystatechange=function(){var r,s;if(d.readyState>3&&!d._abortingOnUnload){clearTimeout(m);try{d.onreadystatechange=null}catch(r){s=r,d.onreadystatechange=function(){}}if(d.status>0?t.handler(e,d):t.failureHandler(e,"Invalid XHR response."),e.abortOnUnload)return delete t._current[n]}}),h=!1,!t.getDisableBinary()&&e.contentBinary)try{d.send(e.contentBinary.buffer),h=!0}catch(a){s=a;try{d.send(e.contentBinary),h=!0}catch(u){i=u,t.setDisableBinary(!0)}}return h||(e.content?(d.setRequestHeader("Content-Type","application/json"),d.send(e.content)):d.send()),m=window.setTimeout(function(){try{return d._aborting=!0,d.abort()}catch(t){}},e.timeout),e.sync&&(t.handler(e,d),e.abortOnUnload&&delete t._xhrCurrent[n]),!0}catch(l){return r=l,t.failureHandler(e,"XHR request failed. "+(r.message||r.error||r.description||r))}},t}(),fm.postMessage=function(){function t(){}return t._cache={},t.createFrame=function(e,n){var r,s,i,o,a;return a=t._cache[e.frameUrl],a?a.frame.loading?a.callbacks.push(n):window.setTimeout(function(){return a.frame.loaded?n(a.frame):n(null,"Frame not loaded.")},1):(i=document.createElement("iframe"),i.style.display="none",document.body.appendChild(i),s=[n],i.loading=!0,t._cache[e.frameUrl]=a={frame:i,callbacks:s},o=window.setTimeout(function(){var t;for(i.loading=!1,i.loaded=!1,i.timedOut=!0,t=[];s.length>0;)t.push(s.shift()(null,"Frame load timed out."));return t},e.timeout),r=null,fm.util.observe(i,"load",function(){var n,r;if(!i.timedOut)return clearTimeout(o),r=function(o){if(o.source===i.contentWindow&&"pong"===o.data){if(i.timedOut)return;for(clearTimeout(n),i.loading=!1,i.loaded=!0,i.timedOut=!1,t.listen(e,i);s.length>0;)s.shift()(i);return fm.util.unobserve(window,"message",r)}},n=window.setTimeout(function(){for(i.loading=!1,i.loaded=!1,i.timedOut=!0;s.length>0;)s.shift()(null,"Frame pong timed out.");return r?fm.util.unobserve(window,"message",r):void 0},500),fm.util.observe(window,"message",r),i.contentWindow.postMessage("ping",t.getOrigin(e.url))}),i.src=fm.httpTransfer.addQueryToUrl(e.frameUrl,"type","pmf"))},t._optionsCounter=0,t._optionsCache={},t.getOrigin=function(t){return/\w+:\/\/[^\/]+/.exec(t)[0]},t.send=function(e){return e=fm.util.extend({url:"",onFailure:function(){},onSuccess:function(){},onRequestCreated:function(){},onResponseReceived:function(){}},e||{}),e.contentBinary=null,t.createFrame(e,function(n,r){var s;return n?(e.id=++t._optionsCounter,t._optionsCache[e.id]=e,n.contentWindow.postMessage(fm.json.serialize(e),t.getOrigin(e.url))):e.onFailure?(s="Could not initialize postMessage frame.",r&&(s+=" "+r),e.onFailure({message:s,local:!0})):void 0})},t.listen=function(e,n){return fm.util.observe(window,"message",function(r){var s,i;if(r.source===n.contentWindow){try{r=fm.json.deserialize(r.data)}catch(i){return void(s=i)}if(!r.id)return;if(e=t._optionsCache[r.id],!e)return;if((1===r.type||2===r.type)&&delete t._optionsCache[r.id],1===r.type){if(e.onFailure)return e.onFailure(r)}else if(2===r.type){if(e.onSuccess)return e.onSuccess(r)}else if(3===r.type){if(e.onRequestCreated)return e.onRequestCreated(null)}else if(4===r.type&&e.onResponseReceived)return e.onResponseReceived(null)}})},t}(),fm.jsonp=function(){function t(){}return t.send=function(t){},t._scriptFrame=null,t._scriptFrameLoaded=!1,t._callbackCount=0,t._cb={},t._pastScriptFrames=[],t._scriptFrameDestroyer=null,t.maxUrlLength=2048,t.getNextCallback=function(e){var n,r;return n="cb"+t._callbackCount++,r="fm.jsonp._cb.",t._cb[n]=function(s){var i,o,a;try{if(e.onResponseReceived&&e.onResponseReceived(null),e.onSuccess)return e.robustResponse?(i=s[e.contentParameterName],i?"string"!=typeof i&&(i=fm.json.serialize(i)):i="",e.onSuccess({content:i,statusCode:s[e.statusCodeParameterName]||200,headers:s[e.headersParameterName]||{}})):(i=s,i?"string"!=typeof i&&(i=fm.json.serialize(i)):i="",e.onSuccess({content:i,statusCode:200,headers:{}}))}catch(a){throw o=a}finally{t.cleanup((e.useFrame?"parent.":"")+r+n,e.useFrame)}},(e.useFrame?"parent.":"")+r+n},t.failureHandler=function(e,n,r){return e.onFailure&&e.onFailure({message:r}),t.cleanup(n,e.useFrame)},t.send=function(e){var n,r,s,i,o,a,u,l;
try{if(e=fm.util.extend({url:"",method:"POST",content:null,headers:{},timeout:15e3,canSegmentJsonArray:!1,robustResponse:!1,callbackParameterName:"jsonp",contentParameterName:"content",methodParameterName:"method",headersParameterName:"headers",statusCodeParameterName:"statusCode",cacheBusterParameterName:"_cb",onRequestCreated:function(){},onResponseReceived:function(){},onFailure:function(){},onSuccess:function(){}},e||{}),e.useFrame=!0,n=t.getNextCallback(e),e.useFrame&&(t._scriptFrameDestroyer||(t._scriptFrameDestroyer=window.setInterval(function(){var e,n,r,s;if(null!==t._scriptFrame&&(t._pastScriptFrames.push(t._scriptFrame),t._scriptFrame=null,t._scriptFrameLoaded=!1,2===t._pastScriptFrames.length)){for(s=t._pastScriptFrames[0],e=0,n=s.length;n>e;e++)r=s[e],delete t._pastScriptFrames[0][r];return document.body.removeChild(t._pastScriptFrames[0]),t._pastScriptFrames.splice(0,1)}},3e5))),r=document.getElementsByTagName("head")[0],e.useFrame){if(t._scriptFrame||(t._scriptFrame=document.createElement("iframe"),t._scriptFrame.style.display="none",t._scriptFrame.src="PLEASE_IGNORE_THIS_404.htm",document.body.appendChild(t._scriptFrame)),s=t._scriptFrame.contentWindow.document,!s)throw"Could not create script frame.";u=s.createElement("script")}else u=document.createElement("script");if(u.type="text/javascript",u.charset="utf-8",u.id=n,l=e.url,l=fm.httpTransfer.addQueryToUrl(l,e.methodParameterName,e.method),l=fm.httpTransfer.addQueryToUrl(l,e.headersParameterName,fm.json.serialize(e.headers)),l=fm.httpTransfer.addQueryToUrl(l,e.callbackParameterName,n),l=fm.httpTransfer.addQueryToUrl(l,e.cacheBusterParameterName,(new Date).getTime()),l=fm.httpTransfer.addQueryToUrl(l,e.contentParameterName,e.content),l.length>t.maxUrlLength&&alert("URL length "+l.length+" exceeds maximum for JSON-P ("+t.maxUrlLength+")."),u.src=l,e.onRequestCreated&&e.onRequestCreated(null),window.setTimeout(function(){return t.callbackExists(n)?t.failureHandler(e,n,"JSONP request timed out."):void 0},e.timeout),!e.useFrame)return r.appendChild(u);if(!t._scriptFrameLoaded)return fm.util.observe(t._scriptFrame,"load",function(){return window.setTimeout(function(){var s,i;try{return r=t._scriptFrame.contentWindow.document.body,r.appendChild(u)}catch(i){return s=i,t.failureHandler(e,n,"JSONP request failed. Could not access script frame.")}},10),t._scriptFrameLoaded=!0});try{return r=t._scriptFrame.contentWindow.document.body,r.appendChild(u)}catch(o){return i=o,t.failureHandler(e,n,"JSONP request failed. Could not access script frame.")}}catch(a){return i=a,t.failureHandler(e,n,"JSONP request failed. "+(i.message||i.error||i.description||i))}},t.cleanup=function(e,n){var r,s,i,o,a,u,l,c,p,h;l=e.split("."),u=l[l.length-1],t._cb[u]=null,delete t._cb[u];try{if(n){for(h=t._pastScriptFrames.concat([]),null!==t._scriptFrame&&h.push(t._scriptFrame),o=a=c=h.length-1;(0>=c?0>=a:a>=0)&&(r=h[o].contentWindow.document,r&&(p=r.getElementById(e)),!p);o=0>=c?++a:--a);if(p)return r.body.removeChild(p)}else if(p=document.getElementById(e))return document.getElementsByTagName("head")[0].removeChild(p)}catch(i){if(s=i,window&&window.console&&window.console.error)return window.console.error("Could not remove script element. "+(s.message||s.error||s.description||s))}},t.callbackExists=function(e){var n,r;return r=e.split("."),n=r[r.length-1],n in t._cb},t}(),fm.json=function(){function t(){}return t.useMicrosoftDateFormat=!0,t._dateRegex=/^\/Date\((\d+[\-|\+]?\d{0,4})\)\/$/,t._reviver=function(e,n){var r,s,i,o;return n&&"string"==typeof n&&t._dateRegex.test(n)?(o=n.match(t._dateRegex)[1],r=o.indexOf("-")>-1?"-":"+",s=o.split(r),i=parseInt(s[0],10),new Date(i)):n},t._build_reviver=function(t){return this.useMicrosoftDateFormat?null!=t?function(e){return function(n,r){return t(n,e._reviver(n,r))}}(this):this._reviver:t},Date.prototype.toJSONFM=function(t){return isFinite(this.valueOf())?"/Date("+this.getTime()+"-0000)/":null},t.deserialize=function(){var e;return e=Array.prototype.slice.call(arguments),0===e.length||null===e[0]||""===e[0]?null:(e[1]=t._build_reviver(e[1]),JSON.parse.apply(t,e))},t.serialize=function(){var e,n,r,s,i;return t.useMicrosoftDateFormat?(n=Date.prototype.toJSON,i=String.prototype.toJSON,s=Number.prototype.toJSON,e=Boolean.prototype.toJSON,Date.prototype.toJSON=Date.prototype.toJSONFM,String.prototype.toJSON=String.prototype.toJSONFM,Number.prototype.toJSON=Number.prototype.toJSONFM,Boolean.prototype.toJSON=Boolean.prototype.toJSONFM,r=JSON.stringify.apply(t,arguments).replace(/\//g,"\\/"),Date.prototype.toJSON=n,String.prototype.toJSON=i,Number.prototype.toJSON=s,Boolean.prototype.toJSON=e,r):JSON.stringify.apply(t,arguments)},t}(),fm.asyncException=function(){function t(){}return t.asyncThrow=function(t,e){var n;return n="An exception in user code ("+e+") was unhandled.",fm.log.error(n,t),t.stack&&(fm.log.error(t.stack),window&&window.console&&console.error(t.stack)),window.setTimeout(function(){throw t},1)},t}(),fm.base64=function(){function t(){}return t.b64ToUint6=function(t){return t>64&&91>t?t-65:t>96&&123>t?t-71:t>47&&58>t?t+4:43===t?62:47===t?63:0},t.decode=function(t,e){var n,r,s,i,o,a,u,l,c,p,h;if("undefined"==typeof Uint8Array)return null;for(h=t.replace(/[^A-Za-z0-9\+\/]/g,""),p=h.length,r=e?Math.ceil((3*p+1>>2)/e)*e:3*p+1>>2,s=new Uint8Array(r),u=0,n=0,c=i=0,l=p-1;l>=0?l>=i:i>=l;c=l>=0?++i:--i)if(a=3&c,u|=this.b64ToUint6(h.charCodeAt(c))<<18-6*a,3===a||p-c===1){for(o=0;3>o&&r>n;)s[n]=u>>>(16>>>o&24)&255,o++,n++;u=0}return s},t.uint6ToB64=function(t){return 26>t?t+65:52>t?t+71:62>t?t-4:62===t?43:63===t?47:65},t.encode=function(t){var e,n,r,s,i,o,a;if("undefined"==typeof Uint8Array)return null;for(a="",n=t.length,i=0,e=r=0,o=n-1;o>=0?o>=r:r>=o;e=o>=0?++r:--r)s=e%3,i|=t[e]<<(16>>>s&24),(2===s||t.length-e===1)&&(a+=String.fromCharCode(this.uint6ToB64(i>>>18&63),this.uint6ToB64(i>>>12&63),this.uint6ToB64(i>>>6&63),this.uint6ToB64(63&i)),i=0);return a.replace(/A(?=A$|$)/g,"=")},t}(),fm.encoding=function(){function t(){}return t.getUtf8=function(){return new fm.encoding},t.prototype.getString=function(t,e,n){var r,s,i,o;if(!t)return null;for("undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=t.length),o="",s=e;e+n>s;){if(t[s]<=127)r=t[s];else if(t[s]>>5===6)r=(31&t[s])<<6|63&t[++s];else if(t[s]>>4===14)r=(15&t[s])<<12|(63&t[++s])<<6|63&t[++s];else{for(i=1;t[s]&32>>>i;)i++;for(r=t[s]&31>>>i;i-->=0;)r=r<<6^63&t[++s]}o+=String.fromCharCode(r),s++}return o},t.prototype.getBytes=function(t){var e,n,r,s,i,o;if(!t)return null;for(i=t.length,r=0,o=new Uint8Array(new ArrayBuffer(4*i)),n=0;i>n;){if(e=t.charCodeAt(n),127>=e)o[r++]=e;else if(2047>=e)o[r++]=192|e>>>6,o[r++]=128|63&e;else if(65535>=e)o[r++]=224|e>>>12,o[r++]=128|e>>>6&63,o[r++]=128|63&e;else{for(s=4;e>>6*s;)s++;for(o[r++]=65280>>>s&255|e>>>6*--s;s--;)o[r++]=128|e>>>6*s&63}n++}return o.subarray(0,r)},t.prototype.getByteCount=function(t){return this.getBytes(t).length},t}();var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.randomizer=function(t){function e(){return this.randomString=bind(this.randomString,this),this.nextDouble=bind(this.nextDouble,this),this.next=bind(this.next,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e.prototype.next=function(t,e){return t||e?e||(e=t,t=0):(t=0,e=2147483647),Math.floor(Math.random()*(e-t))+t},e.prototype.nextDouble=function(){return Math.random()},e.prototype._randomCharset="abcdefghijklmnopqrstuvwxyz0123456789",e.prototype.randomString=function(t){var e,n,r,s;for(s="",e=n=0,r=t-1;r>=0?r>=n:n>=r;e=r>=0?++n:--n)s+=this._randomCharset.charAt(this.next(this._randomCharset.length));return s},e}(fm.object),fm.crypto=function(){function t(){}return t.base64Regex=/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/,t.base64Encode=function(t){return t?fm.base64.encode(t):null},t.base64Decode=function(e){return e&&t.base64Regex.test(e)?fm.base64.decode(e):null},t.tryBase64Encode=function(e,n){var r,s,i;try{return r=t.base64Encode(e),n.setValue(r),r?!0:!1}catch(i){return s=i,n.setValue(null),!1}},t.tryBase64Decode=function(e,n){var r,s,i;try{return r=t.base64Decode(e),n.setValue(r),r?!0:!1}catch(i){return s=i,n.setValue(null),!1}},t}(),fm.httpMethod={Get:1,Head:2,Post:3,Put:4,Patch:5,Delete:6},fm.backoffMode={Additive:1,Constant:2,None:3},fm.jsonCheckerMode={Array:1,Done:2,Key:3,Object:4,String:5},fm.logLevel={Debug:1,Info:2,Warn:3,Error:4,Fatal:5,None:6},fm.stringType={None:1,Single:2,Double:3},fm.webSocketStatusCode={Normal:1e3,GoingAway:1001,ProtocolError:1002,InvalidType:1003,NoStatus:1005,Abnormal:1006,InvalidData:1007,PolicyViolation:1008,MessageTooLarge:1009,UnsupportedExtension:1010,UnexpectedCondition:1011,SecureHandshakeFailure:1015};var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.serializable=function(t){function e(){return this.setSerialized=bind(this.setSerialized,this),this.setIsSerialized=bind(this.setIsSerialized,this),this.setIsDirty=bind(this.setIsDirty,this),this.getSerialized=bind(this.getSerialized,this),this.getIsSerialized=bind(this.getIsSerialized,this),this.getIsDirty=bind(this.getIsDirty,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),this.setIsSerialized(!1),this.setIsDirty(!1),void fm.util.attachProperties(this,arguments[0])):(e.__super__.constructor.call(this),this.setIsSerialized(!1),void this.setIsDirty(!1))}return extend(e,t),e.prototype.__serialized=null,e.prototype._isDirty=!1,e.prototype._isSerialized=!1,e.prototype.getIsDirty=function(){return this._isDirty},e.prototype.getIsSerialized=function(){return this._isSerialized},e.prototype.getSerialized=function(){return this.__serialized},e.prototype.setIsDirty=function(){var t;return t=arguments[0],this._isDirty=t},e.prototype.setIsSerialized=function(){var t;return t=arguments[0],this._isSerialized=t},e.prototype.setSerialized=function(){var t;return t=arguments[0],this.__serialized=t,this.setIsSerialized(!0),this.setIsDirty(!1)},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.dynamic=function(t){function e(){return this.unsetDynamicValue=bind(this.unsetDynamicValue,this),this.setDynamicValue=bind(this.setDynamicValue,this),this.setDynamicProperties=bind(this.setDynamicProperties,this),this.getDynamicValue=bind(this.getDynamicValue,this),this.getDynamicProperties=bind(this.getDynamicProperties,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),this.__dynamicProperties={},this.__dynamicPropertiesLock=new fm.object,void fm.util.attachProperties(this,arguments[0])):(e.__super__.constructor.call(this),this.__dynamicProperties={},void(this.__dynamicPropertiesLock=new fm.object))}return extend(e,t),e.prototype.__dynamicProperties=null,e.prototype.__dynamicPropertiesLock=null,e.prototype.getDynamicProperties=function(){var t,e,n,r,s;for(e={},t=fm.hashExtensions.getKeys(this.__dynamicProperties),n=0,r=t.length;r>n;n++)s=t[n],e[s]=this.__dynamicProperties[s];return e},e.prototype.getDynamicValue=function(){var t,e,n,r;return n=arguments[0],r=null,t=new fm.holder(r),e=fm.hashExtensions.tryGetValue(this.__dynamicProperties,n,t),r=t.getValue(),e?r:null},e.prototype.setDynamicProperties=function(){var t,e,n,r,s,i,o;for(o=arguments[0],t=o,(null===t||"undefined"==typeof t)&&(o={}),n={},e=fm.hashExtensions.getKeys(o),r=0,s=e.length;s>r;r++)i=e[r],n[i]=o[i];return this.__dynamicProperties=n},e.prototype.setDynamicValue=function(){var t,e;return t=arguments[0],e=arguments[1],this.__dynamicProperties[t]=e},e.prototype.unsetDynamicValue=function(){var t;return t=arguments[0],fm.hashExtensions.remove(this.__dynamicProperties,t)},e}(fm.serializable);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpResponseReceivedArgs=function(t){function e(){return this.setSender=bind(this.setSender,this),this.setResponse=bind(this.setResponse,this),this.setRequestArgs=bind(this.setRequestArgs,this),this.getSender=bind(this.getSender,this),this.getResponse=bind(this.getResponse,this),this.getRequestArgs=bind(this.getRequestArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype._requestArgs=null,e.prototype._response=null,e.prototype._sender=null,e.prototype.getRequestArgs=function(){return this._requestArgs},e.prototype.getResponse=function(){return this._response},e.prototype.getSender=function(){return this._sender},e.prototype.setRequestArgs=function(){var t;return t=arguments[0],this._requestArgs=t},e.prototype.setResponse=function(){var t;return t=arguments[0],this._response=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketCloseArgs=function(t){function e(){return this.setStatusCode=bind(this.setStatusCode,this),this.setReason=bind(this.setReason,this),this.setOnComplete=bind(this.setOnComplete,this),this.getStatusCode=bind(this.getStatusCode,this),this.getReason=bind(this.getReason,this),this.getOnComplete=bind(this.getOnComplete,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),this.setStatusCode(fm.webSocketStatusCode.Normal),this.setReason(fm.stringExtensions.empty),void fm.util.attachProperties(this,arguments[0])):(e.__super__.constructor.call(this),this.setStatusCode(fm.webSocketStatusCode.Normal),void this.setReason(fm.stringExtensions.empty))}return extend(e,t),e.prototype._onComplete=null,e.prototype._reason=null,e.prototype._statusCode=null,e.prototype.getOnComplete=function(){return this._onComplete},e.prototype.getReason=function(){return this._reason},e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.setOnComplete=function(){var t;return t=arguments[0],this._onComplete=t},e.prototype.setReason=function(){var t;return t=arguments[0],this._reason=t},e.prototype.setStatusCode=function(){var t;return t=arguments[0],this._statusCode=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketCloseCompleteArgs=function(t){function e(){return this.setStatusCode=bind(this.setStatusCode,this),this.setReason=bind(this.setReason,this),this.setCloseArgs=bind(this.setCloseArgs,this),this.getStatusCode=bind(this.getStatusCode,this),this.getReason=bind(this.getReason,this),this.getCloseArgs=bind(this.getCloseArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype._closeArgs=null,e.prototype._reason=null,e.prototype._statusCode=null,e.prototype.getCloseArgs=function(){return this._closeArgs},e.prototype.getReason=function(){return this._reason},e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.setCloseArgs=function(){var t;return t=arguments[0],this._closeArgs=t},e.prototype.setReason=function(){var t;return t=arguments[0],this._reason=t},e.prototype.setStatusCode=function(){var t;return t=arguments[0],this._statusCode=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketOpenArgs=function(t){function e(){return this.setStreamTimeout=bind(this.setStreamTimeout,this),this.setSender=bind(this.setSender,this),this.setOnSuccess=bind(this.setOnSuccess,this),this.setOnStreamFailure=bind(this.setOnStreamFailure,this),this.setOnResponseReceived=bind(this.setOnResponseReceived,this),this.setOnRequestCreated=bind(this.setOnRequestCreated,this),this.setOnReceive=bind(this.setOnReceive,this),this.setOnFailure=bind(this.setOnFailure,this),this.setHeaders=bind(this.setHeaders,this),this.setHandshakeTimeout=bind(this.setHandshakeTimeout,this),this.getStreamTimeout=bind(this.getStreamTimeout,this),this.getSender=bind(this.getSender,this),this.getOnSuccess=bind(this.getOnSuccess,this),this.getOnStreamFailure=bind(this.getOnStreamFailure,this),this.getOnResponseReceived=bind(this.getOnResponseReceived,this),this.getOnRequestCreated=bind(this.getOnRequestCreated,this),this.getOnReceive=bind(this.getOnReceive,this),this.getOnFailure=bind(this.getOnFailure,this),this.getHeaders=bind(this.getHeaders,this),this.getHandshakeTimeout=bind(this.getHandshakeTimeout,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),this.setHandshakeTimeout(15e3),this.setStreamTimeout(4e4),void fm.util.attachProperties(this,arguments[0])):(e.__super__.constructor.call(this),this.setHandshakeTimeout(15e3),void this.setStreamTimeout(4e4))}return extend(e,t),e.prototype._handshakeTimeout=0,e.prototype._headers=null,e.prototype._onFailure=null,e.prototype._onReceive=null,e.prototype._onRequestCreated=null,e.prototype._onResponseReceived=null,e.prototype._onStreamFailure=null,e.prototype._onSuccess=null,e.prototype._sender=null,e.prototype._streamTimeout=0,e.prototype.getHandshakeTimeout=function(){return this._handshakeTimeout},e.prototype.getHeaders=function(){return this._headers},e.prototype.getOnFailure=function(){return this._onFailure},e.prototype.getOnReceive=function(){return this._onReceive},e.prototype.getOnRequestCreated=function(){return this._onRequestCreated},e.prototype.getOnResponseReceived=function(){return this._onResponseReceived},e.prototype.getOnStreamFailure=function(){return this._onStreamFailure},e.prototype.getOnSuccess=function(){return this._onSuccess},e.prototype.getSender=function(){return this._sender},e.prototype.getStreamTimeout=function(){return this._streamTimeout},e.prototype.setHandshakeTimeout=function(){var t;return t=arguments[0],this._handshakeTimeout=t},e.prototype.setHeaders=function(){var t;return t=arguments[0],this._headers=t},e.prototype.setOnFailure=function(){var t;return t=arguments[0],this._onFailure=t},e.prototype.setOnReceive=function(){var t;return t=arguments[0],this._onReceive=t},e.prototype.setOnRequestCreated=function(){var t;return t=arguments[0],this._onRequestCreated=t},e.prototype.setOnResponseReceived=function(){var t;return t=arguments[0],this._onResponseReceived=t},e.prototype.setOnStreamFailure=function(){var t;return t=arguments[0],this._onStreamFailure=t},e.prototype.setOnSuccess=function(){var t;return t=arguments[0],this._onSuccess=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e.prototype.setStreamTimeout=function(){var t;return t=arguments[0],this._streamTimeout=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketOpenFailureArgs=function(t){function e(){return this.setStatusCode=bind(this.setStatusCode,this),this.setOpenArgs=bind(this.setOpenArgs,this),this.setException=bind(this.setException,this),this.getStatusCode=bind(this.getStatusCode,this),this.getOpenArgs=bind(this.getOpenArgs,this),this.getException=bind(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype._exception=null,e.prototype._openArgs=null,e.prototype._statusCode=null,e.prototype.getException=function(){return this._exception},e.prototype.getOpenArgs=function(){return this._openArgs},e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.setException=function(){var t;return t=arguments[0],this._exception=t},e.prototype.setOpenArgs=function(){var t;return t=arguments[0],this._openArgs=t},e.prototype.setStatusCode=function(){var t;return t=arguments[0],this._statusCode=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketOpenSuccessArgs=function(t){function e(){return this.setOpenArgs=bind(this.setOpenArgs,this),this.getOpenArgs=bind(this.getOpenArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype._openArgs=null,e.prototype.getOpenArgs=function(){return this._openArgs},e.prototype.setOpenArgs=function(){var t;return t=arguments[0],this._openArgs=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketReceiveArgs=function(t){function e(){return this.setTextMessage=bind(this.setTextMessage,this),this.setOpenArgs=bind(this.setOpenArgs,this),this.setBinaryMessage=bind(this.setBinaryMessage,this),this.getTextMessage=bind(this.getTextMessage,this),this.getOpenArgs=bind(this.getOpenArgs,this),this.getIsText=bind(this.getIsText,this),this.getBinaryMessage=bind(this.getBinaryMessage,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype._binaryMessage=null,e.prototype._openArgs=null,e.prototype._textMessage=null,e.prototype.getBinaryMessage=function(){return this._binaryMessage},e.prototype.getIsText=function(){var t;return t=this.getTextMessage(),null!==t&&"undefined"!=typeof t},e.prototype.getOpenArgs=function(){return this._openArgs},e.prototype.getTextMessage=function(){return this._textMessage},e.prototype.setBinaryMessage=function(){var t;return t=arguments[0],this._binaryMessage=t},e.prototype.setOpenArgs=function(){var t;return t=arguments[0],this._openArgs=t},e.prototype.setTextMessage=function(){var t;return t=arguments[0],this._textMessage=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketSendArgs=function(t){function e(){return this.setTimeout=bind(this.setTimeout,this),this.setTextMessage=bind(this.setTextMessage,this),this.setBinaryMessage=bind(this.setBinaryMessage,this),this.getTimeout=bind(this.getTimeout,this),this.getTextMessage=bind(this.getTextMessage,this),this.getIsText=bind(this.getIsText,this),this.getBinaryMessage=bind(this.getBinaryMessage,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),this.setTimeout(15e3),void fm.util.attachProperties(this,arguments[0])):(e.__super__.constructor.call(this),void this.setTimeout(15e3))}return extend(e,t),e.prototype._binaryMessage=null,e.prototype._textMessage=null,e.prototype._timeout=0,e.prototype.getBinaryMessage=function(){return this._binaryMessage},e.prototype.getIsText=function(){var t;return t=this.getTextMessage(),null!==t&&"undefined"!=typeof t},e.prototype.getTextMessage=function(){return this._textMessage},e.prototype.getTimeout=function(){return this._timeout},e.prototype.setBinaryMessage=function(){var t;return t=arguments[0],this._binaryMessage=t},e.prototype.setTextMessage=function(){var t;return t=arguments[0],this._textMessage=t},e.prototype.setTimeout=function(){var t;return t=arguments[0],this._timeout=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketStreamFailureArgs=function(t){function e(){return this.setStatusCode=bind(this.setStatusCode,this),this.setOpenArgs=bind(this.setOpenArgs,this),this.setException=bind(this.setException,this),this.getStatusCode=bind(this.getStatusCode,this),this.getOpenArgs=bind(this.getOpenArgs,this),this.getException=bind(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype._exception=null,e.prototype._openArgs=null,e.prototype._statusCode=null,e.prototype.getException=function(){return this._exception},e.prototype.getOpenArgs=function(){return this._openArgs},e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.setException=function(){var t;return t=arguments[0],this._exception=t},e.prototype.setOpenArgs=function(){var t;return t=arguments[0],this._openArgs=t},e.prototype.setStatusCode=function(){var t;return t=arguments[0],this._statusCode=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.baseTimeoutTimer=function(t){function e(){return this.stop=bind(this.stop,this),this.start=bind(this.start,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype.start=function(){var t;return t=arguments[0]},e.prototype.stop=function(){},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.baseWebSocket=function(t){function e(){return this.send=bind(this.send,this),this.open=bind(this.open,this),this.getSecure=bind(this.getSecure,this),this.getIsOpen=bind(this.getIsOpen,this),this.getBufferedAmount=bind(this.getBufferedAmount,this),this.close=bind(this.close,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype.close=function(){var t;0!==arguments.length&&1===arguments.length&&(t=arguments[0])},e.prototype.getBufferedAmount=function(){},e.prototype.getIsOpen=function(){},e.prototype.getSecure=function(){},e.prototype.open=function(){var t;return t=arguments[0]},e.prototype.send=function(){var t;return t=arguments[0]},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.byteHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?void e.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],e.__super__.constructor.call(this),void this.setValue(t)):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.callbackState=function(t){function e(){this.setState=bind(this.setState,this),this.setCallback=bind(this.setCallback,this),this.getState=bind(this.getState,this),this.getCallback=bind(this.getCallback,this),this.execute=bind(this.execute,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],n=arguments[1],e.__super__.constructor.call(this),this.setCallback(t),void this.setState(n))}return extend(e,t),e.prototype._callback=null,e.prototype._state=null,e.prototype.execute=function(){var t;return t=this.getCallback(),null!==t&&"undefined"!=typeof t?this.getCallback()(this.getState()):void 0},e.prototype.getCallback=function(){return this._callback},e.prototype.getState=function(){return this._state},e.prototype.setCallback=function(){var t;return t=arguments[0],this._callback=t},e.prototype.setState=function(){var t;return t=arguments[0],this._state=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.characterHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?void e.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],e.__super__.constructor.call(this),void this.setValue(t)):void 0}return extend(e,t),e.prototype._value="\x00",e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.logProvider=function(t){function e(){return this.writeLine=bind(this.writeLine,this),this.warnFormat=bind(this.warnFormat,this),this.warn=bind(this.warn,this),this.setLevel=bind(this.setLevel,this),this.log=bind(this.log,this),
this.isEnabled=bind(this.isEnabled,this),this.infoFormat=bind(this.infoFormat,this),this.info=bind(this.info,this),this.getLevel=bind(this.getLevel,this),this.getIsWarnEnabled=bind(this.getIsWarnEnabled,this),this.getIsInfoEnabled=bind(this.getIsInfoEnabled,this),this.getIsFatalEnabled=bind(this.getIsFatalEnabled,this),this.getIsErrorEnabled=bind(this.getIsErrorEnabled,this),this.getIsDebugEnabled=bind(this.getIsDebugEnabled,this),this.formatAndWriteLine=bind(this.formatAndWriteLine,this),this.fatalFormat=bind(this.fatalFormat,this),this.fatal=bind(this.fatal,this),this.errorFormat=bind(this.errorFormat,this),this.error=bind(this.error,this),this.debugFormat=bind(this.debugFormat,this),this.debug=bind(this.debug,this),this._log=bind(this._log,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),this.setLevel(fm.logLevel.None),void fm.util.attachProperties(this,arguments[0])):(e.__super__.constructor.call(this),void this.setLevel(fm.logLevel.None))}return extend(e,t),e.prototype._level=null,e.getPrefix=function(){var t,e,n;return e=arguments[0],t=arguments[1],n=fm.logProvider.getPrefixLevel(e),t&&(n=fm.stringExtensions.format("{0} {1}",n,fm.logProvider.getPrefixTimestamp(fm.dateTime.getUtcNow()))),n},e.getPrefixLevel=function(){var t;switch(t=arguments[0]){case fm.logLevel.Debug:return"DEBUG";case fm.logLevel.Info:return"INFO ";case fm.logLevel.Warn:return"WARN ";case fm.logLevel.Error:return"ERROR";case fm.logLevel.Fatal:return"FATAL";case fm.logLevel.None:return"NONE "}return"?????"},e.getPrefixTimestamp=function(){var t,e,n,r,s,i,o;for(o=arguments[0],t=fm.intExtensions.toString(o.getYear()),e=fm.intExtensions.toString(o.getMonth()),n=fm.intExtensions.toString(o.getDay()),r=fm.intExtensions.toString(o.getHour()),s=fm.intExtensions.toString(o.getMinute()),i=fm.intExtensions.toString(o.getSecond());t.length<4;)t=fm.stringExtensions.concat("0",t);for(;e.length<2;)e=fm.stringExtensions.concat("0",e);for(;n.length<2;)n=fm.stringExtensions.concat("0",n);for(;r.length<2;)r=fm.stringExtensions.concat("0",r);for(;s.length<2;)s=fm.stringExtensions.concat("0",s);for(;i.length<2;)i=fm.stringExtensions.concat("0",i);return fm.stringExtensions.format("{0}/{1}/{2}-{3}:{4}:{5}",[t,e,n,r,s,i])},e.prototype._log=function(){var t,e,n,r,s,i;if(2!==arguments.length){if(3===arguments.length&&(r=arguments[0],s=arguments[1],n=arguments[2],this.isEnabled(r)))try{this.log(r,s,n)}catch(e){i=e}finally{}}else if(r=arguments[0],s=arguments[1],this.isEnabled(r))try{this.log(r,s)}catch(t){i=t}finally{}},e.prototype.debug=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],void this._log(fm.logLevel.Debug,e,t)):void(1===arguments.length&&(e=arguments[0],this._log(fm.logLevel.Debug,e)))},e.prototype.debugFormat=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.debug(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.error=function(){var t,e;return 1===arguments.length?(e=arguments[0],void this._log(fm.logLevel.Error,e)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],this._log(fm.logLevel.Error,e,t)))},e.prototype.errorFormat=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.error(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.fatal=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],void this._log(fm.logLevel.Fatal,e,t)):void(1===arguments.length&&(e=arguments[0],this._log(fm.logLevel.Fatal,e)))},e.prototype.fatalFormat=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.fatal(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.formatAndWriteLine=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.writeLine(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.getIsDebugEnabled=function(){return this.isEnabled(fm.logLevel.Debug)},e.prototype.getIsErrorEnabled=function(){return this.isEnabled(fm.logLevel.Error)},e.prototype.getIsFatalEnabled=function(){return this.isEnabled(fm.logLevel.Fatal)},e.prototype.getIsInfoEnabled=function(){return this.isEnabled(fm.logLevel.Info)},e.prototype.getIsWarnEnabled=function(){return this.isEnabled(fm.logLevel.Warn)},e.prototype.getLevel=function(){return this._level},e.prototype.info=function(){var t,e;return 1===arguments.length?(e=arguments[0],void this._log(fm.logLevel.Info,e)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],this._log(fm.logLevel.Info,e,t)))},e.prototype.infoFormat=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.info(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.isEnabled=function(){var t;return t=arguments[0],t>=this.getLevel()},e.prototype.log=function(){var t,e,n;return 2===arguments.length?(e=arguments[0],void(n=arguments[1])):void(3===arguments.length&&(e=arguments[0],n=arguments[1],t=arguments[2]))},e.prototype.setLevel=function(){var t;return t=arguments[0],this._level=t},e.prototype.warn=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],void this._log(fm.logLevel.Warn,e,t)):void(1===arguments.length&&(e=arguments[0],this._log(fm.logLevel.Warn,e)))},e.prototype.warnFormat=function(){var t,e,n,r;n=arguments[0],t=arguments[1];try{return this.warn(fm.stringExtensions.format(n,t))}catch(e){r=e}finally{}},e.prototype.writeLine=function(){var t;return t=arguments[0]},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.booleanHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?void e.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],e.__super__.constructor.call(this),void this.setValue(t)):void 0}return extend(e,t),e.prototype._value=!1,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketTransfer=function(t){function e(){this.shutdown=bind(this.shutdown,this),this.setUrl=bind(this.setUrl,this),this.setStreamTimeout=bind(this.setStreamTimeout,this),this.setSender=bind(this.setSender,this),this.setOnStreamFailure=bind(this.setOnStreamFailure,this),this.setOnResponseReceived=bind(this.setOnResponseReceived,this),this.setOnRequestCreated=bind(this.setOnRequestCreated,this),this.setOnOpenSuccess=bind(this.setOnOpenSuccess,this),this.setOnOpenFailure=bind(this.setOnOpenFailure,this),this.setHandshakeTimeout=bind(this.setHandshakeTimeout,this),this.sendAsync=bind(this.sendAsync,this),this.send=bind(this.send,this),this.open=bind(this.open,this),this.getUrl=bind(this.getUrl,this),this.getStreamTimeout=bind(this.getStreamTimeout,this),this.getSender=bind(this.getSender,this),this.getOnStreamFailure=bind(this.getOnStreamFailure,this),this.getOnResponseReceived=bind(this.getOnResponseReceived,this),this.getOnRequestCreated=bind(this.getOnRequestCreated,this),this.getOnOpenSuccess=bind(this.getOnOpenSuccess,this),this.getOnOpenFailure=bind(this.getOnOpenFailure,this),this.getHandshakeTimeout=bind(this.getHandshakeTimeout,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],e.__super__.constructor.call(this),void this.setUrl(t))}return extend(e,t),e.prototype.__url=null,e.prototype._handshakeTimeout=0,e.prototype._onOpenFailure=null,e.prototype._onOpenSuccess=null,e.prototype._onRequestCreated=null,e.prototype._onResponseReceived=null,e.prototype._onStreamFailure=null,e.prototype._sender=null,e.prototype._streamTimeout=0,e.prototype.getHandshakeTimeout=function(){return this._handshakeTimeout},e.prototype.getOnOpenFailure=function(){return this._onOpenFailure},e.prototype.getOnOpenSuccess=function(){return this._onOpenSuccess},e.prototype.getOnRequestCreated=function(){return this._onRequestCreated},e.prototype.getOnResponseReceived=function(){return this._onResponseReceived},e.prototype.getOnStreamFailure=function(){return this._onStreamFailure},e.prototype.getSender=function(){return this._sender},e.prototype.getStreamTimeout=function(){return this._streamTimeout},e.prototype.getUrl=function(){return this.__url},e.prototype.open=function(){var t;return t=arguments[0]},e.prototype.send=function(){var t;return t=arguments[0]},e.prototype.sendAsync=function(){var t,e;return e=arguments[0],t=arguments[1]},e.prototype.setHandshakeTimeout=function(){var t;return t=arguments[0],this._handshakeTimeout=t},e.prototype.setOnOpenFailure=function(){var t;return t=arguments[0],this._onOpenFailure=t},e.prototype.setOnOpenSuccess=function(){var t;return t=arguments[0],this._onOpenSuccess=t},e.prototype.setOnRequestCreated=function(){var t;return t=arguments[0],this._onRequestCreated=t},e.prototype.setOnResponseReceived=function(){var t;return t=arguments[0],this._onResponseReceived=t},e.prototype.setOnStreamFailure=function(){var t;return t=arguments[0],this._onStreamFailure=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e.prototype.setStreamTimeout=function(){var t;return t=arguments[0],this._streamTimeout=t},e.prototype.setUrl=function(){var t;return t=arguments[0],t=t.replace("https://","wss://"),t=t.replace("http://","ws://"),this.__url=t},e.prototype.shutdown=function(){},e}(fm.object);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketTransferFactory=function(t){function e(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e._createWebSocketTransfer=null,e.defaultCreateWebSocketTransfer=function(){var t;return t=arguments[0],new fm.webSocketWebRequestTransfer(t)},e.getCreateWebSocketTransfer=function(){return fm.webSocketTransferFactory._createWebSocketTransfer},e.getWebSocketTransfer=function(){var t,n,r,s;return s=arguments[0],t=fm.webSocketTransferFactory.getCreateWebSocketTransfer(),(null===t||"undefined"==typeof t)&&e.setCreateWebSocketTransfer(e.defaultCreateWebSocketTransfer),r=fm.webSocketTransferFactory.getCreateWebSocketTransfer()(s),n=r,(null===n||"undefined"==typeof n)&&(r=fm.webSocketTransferFactory.defaultCreateWebSocketTransfer(s)),r},e.setCreateWebSocketTransfer=function(){var t;return t=arguments[0],e._createWebSocketTransfer=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.jsonProvider=function(t){function e(){return this.serialize=bind(this.serialize,this),this.deserialize=bind(this.deserialize,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype.deserialize=function(){var t;return t=arguments[0]},e.prototype.serialize=function(){var t;return t=arguments[0]},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.nullJsonProvider=function(t){function e(){return this.serialize=bind(this.serialize,this),this.deserialize=bind(this.deserialize,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype.deserialize=function(){var t;return t=arguments[0],null},e.prototype.serialize=function(){var t;return t=arguments[0],null},e}(fm.jsonProvider);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.doubleHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?void e.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],e.__super__.constructor.call(this),void this.setValue(t)):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.floatHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?void e.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],e.__super__.constructor.call(this),void this.setValue(t)):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpRequestArgs=function(t){function e(){return this.setUrl=bind(this.setUrl,this),this.setTimeout=bind(this.setTimeout,this),this.setTextContent=bind(this.setTextContent,this),this.setSender=bind(this.setSender,this),this.setOnResponseReceived=bind(this.setOnResponseReceived,this),this.setOnRequestCreated=bind(this.setOnRequestCreated,this),this.setMethod=bind(this.setMethod,this),this.setHeaders=bind(this.setHeaders,this),this.setBinaryContent=bind(this.setBinaryContent,this),this.getUrl=bind(this.getUrl,this),this.getTimeout=bind(this.getTimeout,this),this.getTextContent=bind(this.getTextContent,this),this.getSender=bind(this.getSender,this),this.getOnResponseReceived=bind(this.getOnResponseReceived,this),this.getOnRequestCreated=bind(this.getOnRequestCreated,this),this.getMethod=bind(this.getMethod,this),this.getHeaders=bind(this.getHeaders,this),this.getBinaryContent=bind(this.getBinaryContent,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),this.setTimeout(15e3),this.setMethod(fm.httpMethod.Post),this.__headers=new fm.nameValueCollection,void fm.util.attachProperties(this,arguments[0])):(e.__super__.constructor.call(this),this.setTimeout(15e3),this.setMethod(fm.httpMethod.Post),void(this.__headers=new fm.nameValueCollection))}return extend(e,t),e.prototype.__headers=null,e.prototype._binaryContent=null,e.prototype._method=null,e.prototype._onRequestCreated=null,e.prototype._onResponseReceived=null,e.prototype._sender=null,e.prototype._textContent=null,e.prototype._timeout=0,e.prototype._url=null,e.prototype.getBinaryContent=function(){return this._binaryContent},e.prototype.getHeaders=function(){return this.__headers},e.prototype.getMethod=function(){return this._method},e.prototype.getOnRequestCreated=function(){return this._onRequestCreated},e.prototype.getOnResponseReceived=function(){return this._onResponseReceived},e.prototype.getSender=function(){return this._sender},e.prototype.getTextContent=function(){return this._textContent},e.prototype.getTimeout=function(){return this._timeout},e.prototype.getUrl=function(){return this._url},e.prototype.setBinaryContent=function(){var t;return t=arguments[0],this._binaryContent=t},e.prototype.setHeaders=function(){var t,e;return e=arguments[0],t=e,null===t||"undefined"==typeof t?this.__headers=new fm.nameValueCollection:this.__headers=e},e.prototype.setMethod=function(){var t;return t=arguments[0],this._method=t},e.prototype.setOnRequestCreated=function(){var t;return t=arguments[0],this._onRequestCreated=t},e.prototype.setOnResponseReceived=function(){var t;return t=arguments[0],this._onResponseReceived=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e.prototype.setTextContent=function(){var t;return t=arguments[0],this._textContent=t},e.prototype.setTimeout=function(){var t;return t=arguments[0],this._timeout=t},e.prototype.setUrl=function(){var t;return t=arguments[0],this._url=t},e}(fm.dynamic);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpRequestCreatedArgs=function(t){function e(){return this.setSender=bind(this.setSender,this),this.setRequestArgs=bind(this.setRequestArgs,this),this.setRequest=bind(this.setRequest,this),this.getSender=bind(this.getSender,this),this.getRequestArgs=bind(this.getRequestArgs,this),this.getRequest=bind(this.getRequest,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype._request=null,e.prototype._requestArgs=null,e.prototype._sender=null,e.prototype.getRequest=function(){return this._request},e.prototype.getRequestArgs=function(){return this._requestArgs},e.prototype.getSender=function(){return this._sender},e.prototype.setRequest=function(){var t;return t=arguments[0],this._request=t},e.prototype.setRequestArgs=function(){var t;return t=arguments[0],this._requestArgs=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpResponseArgs=function(t){function e(){this.setTextContent=bind(this.setTextContent,this),this.setStatusCode=bind(this.setStatusCode,this),this.setRequestArgs=bind(this.setRequestArgs,this),this.setHeaders=bind(this.setHeaders,this),this.setException=bind(this.setException,this),this.setBinaryContent=bind(this.setBinaryContent,this),this.getTextContent=bind(this.getTextContent,this),this.getStatusCode=bind(this.getStatusCode,this),this.getRequestArgs=bind(this.getRequestArgs,this),this.getHeaders=bind(this.getHeaders,this),this.getException=bind(this.getException,this),this.getBinaryContent=bind(this.getBinaryContent,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),this.setHeaders(new fm.nameValueCollection),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(e.__super__.constructor.call(this),void this.setHeaders(new fm.nameValueCollection)):1===arguments.length?(t=arguments[0],e.call(this),void this.setRequestArgs(t)):void 0}return extend(e,t),e.prototype._binaryContent=null,e.prototype._exception=null,e.prototype._headers=null,e.prototype._requestArgs=null,e.prototype._statusCode=0,e.prototype._textContent=null,e.prototype.getBinaryContent=function(){return this._binaryContent},e.prototype.getException=function(){return this._exception},e.prototype.getHeaders=function(){return this._headers},e.prototype.getRequestArgs=function(){return this._requestArgs},e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setBinaryContent=function(){var t;return t=arguments[0],this._binaryContent=t},e.prototype.setException=function(){var t;return t=arguments[0],this._exception=t},e.prototype.setHeaders=function(){var t;return t=arguments[0],this._headers=t},e.prototype.setRequestArgs=function(){var t;return t=arguments[0],this._requestArgs=t},e.prototype.setStatusCode=function(){var t;return t=arguments[0],this._statusCode=t},e.prototype.setTextContent=function(){var t;return t=arguments[0],this._textContent=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpSendFinishArgs=function(t){function e(){return this.setSender=bind(this.setSender,this),this.setResponseTextContent=bind(this.setResponseTextContent,this),this.setResponseHeaders=bind(this.setResponseHeaders,this),this.setResponseBinaryContent=bind(this.setResponseBinaryContent,this),this.setRequestTextContent=bind(this.setRequestTextContent,this),this.setRequestBinaryContent=bind(this.setRequestBinaryContent,this),this.getSender=bind(this.getSender,this),this.getResponseTextContent=bind(this.getResponseTextContent,this),this.getResponseHeaders=bind(this.getResponseHeaders,this),this.getResponseBinaryContent=bind(this.getResponseBinaryContent,this),this.getRequestTextContent=bind(this.getRequestTextContent,this),this.getRequestBinaryContent=bind(this.getRequestBinaryContent,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype._requestBinaryContent=null,e.prototype._requestTextContent=null,e.prototype._responseBinaryContent=null,e.prototype._responseHeaders=null,e.prototype._responseTextContent=null,e.prototype._sender=null,e.prototype.getRequestBinaryContent=function(){return this._requestBinaryContent},e.prototype.getRequestTextContent=function(){return this._requestTextContent},e.prototype.getResponseBinaryContent=function(){return this._responseBinaryContent},e.prototype.getResponseHeaders=function(){return this._responseHeaders},e.prototype.getResponseTextContent=function(){return this._responseTextContent},e.prototype.getSender=function(){return this._sender},e.prototype.setRequestBinaryContent=function(){var t;return t=arguments[0],this._requestBinaryContent=t},e.prototype.setRequestTextContent=function(){var t;return t=arguments[0],this._requestTextContent=t},e.prototype.setResponseBinaryContent=function(){var t;return t=arguments[0],this._responseBinaryContent=t},e.prototype.setResponseHeaders=function(){var t;return t=arguments[0],this._responseHeaders=t},e.prototype.setResponseTextContent=function(){var t;return t=arguments[0],this._responseTextContent=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpSendStartArgs=function(t){function e(){return this.setSender=bind(this.setSender,this),this.setRequestTextContent=bind(this.setRequestTextContent,this),this.setRequestBinaryContent=bind(this.setRequestBinaryContent,this),this.getSender=bind(this.getSender,this),this.getRequestTextContent=bind(this.getRequestTextContent,this),this.getRequestBinaryContent=bind(this.getRequestBinaryContent,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype._requestBinaryContent=null,e.prototype._requestTextContent=null,e.prototype._sender=null,e.prototype.getRequestBinaryContent=function(){return this._requestBinaryContent},e.prototype.getRequestTextContent=function(){return this._requestTextContent},e.prototype.getSender=function(){return this._sender},e.prototype.setRequestBinaryContent=function(){var t;return t=arguments[0],this._requestBinaryContent=t},e.prototype.setRequestTextContent=function(){var t;return t=arguments[0],this._requestTextContent=t},e.prototype.setSender=function(){var t;return t=arguments[0],this._sender=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.integerHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?void e.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],e.__super__.constructor.call(this),void this.setValue(t)):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.lockedRandomizer=function(t){function e(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void 0}return extend(e,t),e._randomizer=null,e._randomLock=null,e.next=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],fm.lockedRandomizer._randomizer.next(e,t)):0===arguments.length?fm.lockedRandomizer._randomizer.next():1===arguments.length?(t=arguments[0],fm.lockedRandomizer._randomizer.next(t)):void 0},e.nextBytes=function(){var t;return t=arguments[0],fm.lockedRandomizer._randomizer.nextBytes(t)},e.nextDouble=function(){return fm.lockedRandomizer._randomizer.nextDouble()},e.nextLong=function(){return 922337203685478e4*fm.lockedRandomizer._randomizer.nextDouble()},e.randomString=function(){var t;return t=arguments[0],fm.lockedRandomizer._randomizer.randomString(t)},e._randomizer=new fm.randomizer,e._randomLock=new fm.object,e}(fm.object);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.log=function(t){function e(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.__provider=null,e.debug=function(){var t,e;return 1===arguments.length?(e=arguments[0],void fm.log.getProvider().debug(e)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],fm.log.getProvider().debug(e,t)))},e.debugFormat=function(){var t,e;return e=arguments[0],t=arguments[1],fm.log.getProvider().debugFormat(e,t)},e.error=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],void fm.log.getProvider().error(e,t)):void(1===arguments.length&&(e=arguments[0],fm.log.getProvider().error(e)))},e.errorFormat=function(){var t,e;return e=arguments[0],t=arguments[1],fm.log.getProvider().errorFormat(e,t)},e.fatal=function(){var t,e;return 1===arguments.length?(e=arguments[0],void fm.log.getProvider().fatal(e)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],fm.log.getProvider().fatal(e,t)))},e.fatalFormat=function(){var t,e;return e=arguments[0],t=arguments[1],fm.log.getProvider().fatalFormat(e,t)},e.getDefault=function(){return new fm.nullLogProvider},e.getIsDebugEnabled=function(){return fm.log.getProvider().getIsDebugEnabled()},e.getIsErrorEnabled=function(){return fm.log.getProvider().getIsErrorEnabled()},e.getIsFatalEnabled=function(){return fm.log.getProvider().getIsFatalEnabled()},e.getIsInfoEnabled=function(){return fm.log.getProvider().getIsInfoEnabled()},e.getIsWarnEnabled=function(){return fm.log.getProvider().getIsWarnEnabled()},e.getProvider=function(){var t;return t=fm.log.__provider,(null===t||"undefined"==typeof t)&&(e.__provider=fm.log.getDefault()),fm.log.__provider},e.info=function(){var t,e;return 2===arguments.length?(e=arguments[0],t=arguments[1],void fm.log.getProvider().info(e,t)):void(1===arguments.length&&(e=arguments[0],fm.log.getProvider().info(e)))},e.infoFormat=function(){var t,e;return e=arguments[0],t=arguments[1],fm.log.getProvider().infoFormat(e,t)},e.setProvider=function(){var t,n;return n=arguments[0],t=n,(null===t||"undefined"==typeof t)&&(n=fm.log.getDefault()),e.__provider=n},e.warn=function(){var t,e;return 1===arguments.length?(e=arguments[0],void fm.log.getProvider().warn(e)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],fm.log.getProvider().warn(e,t)))},e.warnFormat=function(){var t,e;return e=arguments[0],t=arguments[1],fm.log.getProvider().warnFormat(e,t)},e.writeLine=function(){var t,e,n;return 1===arguments.length?(n=arguments[0],void fm.log.getProvider().writeLine(n)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],fm.log.getProvider().formatAndWriteLine(e,t)))},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.longHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?void e.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],e.__super__.constructor.call(this),void this.setValue(t)):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.shortHolder=function(t){function e(){this.setValue=bind(this.setValue,this),this.getValue=bind(this.getValue,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?void e.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],
e.__super__.constructor.call(this),void this.setValue(t)):void 0}return extend(e,t),e.prototype._value=0,e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(){var t;return t=arguments[0],this._value=t},e}(fm.object);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.splitter=function(t){function e(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.split=function(){var t,e,n,r,s,i,o,a,u,l;if(l=arguments[0],s=arguments[1],t=l,null===t||"undefined"==typeof t)throw new Error("str cannot be null.");if(e=s,null===e||"undefined"==typeof e)throw new Error("delimiter cannot be null.");if(0===s.length)return[l];for(u=0,a=0,o=[],i=0;i<l.length;)try{n=l.charAt(i),r=s.charAt(a),n===r?a===s.length-1?(fm.arrayExtensions.add(o,fm.stringExtensions.substring(l,u,i-a-u)),u=i+1,a=0):a++:a=0}finally{i++}return fm.arrayExtensions.add(o,l.substring(u)),fm.arrayExtensions.toArray(o)},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.textLogProvider=function(t){function e(){this.writeLine=bind(this.writeLine,this),this.setCallback=bind(this.setCallback,this),this.log=bind(this.log,this),this.getText=bind(this.getText,this),this.getCallback=bind(this.getCallback,this),this.clear=bind(this.clear,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.call(this,fm.logLevel.Warn),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?void e.call(this,fm.logLevel.Warn):1===arguments.length?(t=arguments[0],e.__super__.constructor.call(this),this.__text=new fm.stringBuilder,this.__textLock=new fm.object,void this.setLevel(t)):void 0}return extend(e,t),e.prototype.__callback=null,e.prototype.__text=null,e.prototype.__textLock=null,e.prototype.clear=function(){var t;return t=this.__text.toString(),this.__text=new fm.stringBuilder,t},e.prototype.getCallback=function(){return this.__callback},e.prototype.getText=function(){return this.__text.toString()},e.prototype.log=function(){var t,e,n;return 3===arguments.length?(e=arguments[0],n=arguments[1],t=arguments[2],void this.log(e,fm.stringExtensions.format("{0}\n{1}",n,t))):void(2===arguments.length&&(e=arguments[0],n=arguments[1],this.writeLine(fm.stringExtensions.format("{0} {1}",fm.logProvider.getPrefix(e,!0),n))))},e.prototype.setCallback=function(){var t,e;return e=arguments[0],t=this.__text.toString(),fm.stringExtensions.isNullOrEmpty(t)||(fm.stringExtensions.endsWith(t,"\n")&&(t=fm.stringExtensions.substring(t,0,t.length-1)),e(t)),this.__callback=e},e.prototype.writeLine=function(){var t,e;return e=arguments[0],this.__text.append(fm.stringExtensions.concat(e,"\n")),t=this.__callback,null!==t&&"undefined"!=typeof t?this.__callback(e):void 0},e}(fm.logProvider);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.stringAssistant=function(t){function e(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.isNullOrWhiteSpace=function(){var t,e;return e=arguments[0],t=e,null===t||"undefined"==typeof t||fm.stringExtensions.isNullOrEmpty(fm.stringExtensions.trim(e))},e.subArray=function(){var t,e,n,r,s;if(2===arguments.length)return t=arguments[0],r=arguments[1],fm.stringAssistant.subArray(t,r,t.length-r);if(3===arguments.length){for(t=arguments[0],r=arguments[1],e=arguments[2],s=new Array(e),n=0;e>n;)try{s[n]=t[r+n]}finally{n++}return s}},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpTransfer=function(t){function e(){return this.startRequest=bind(this.startRequest,this),this.shutdown=bind(this.shutdown,this),this.sendTextAsync=bind(this.sendTextAsync,this),this.sendText=bind(this.sendText,this),this.sendBinaryAsync=bind(this.sendBinaryAsync,this),this.sendBinary=bind(this.sendBinary,this),this.sendAsyncCallback=bind(this.sendAsyncCallback,this),this.sendAsync=bind(this.sendAsync,this),this.send=bind(this.send,this),this.raiseOnSendStart=bind(this.raiseOnSendStart,this),this.raiseOnSendFinish=bind(this.raiseOnSendFinish,this),this.finishRequest=bind(this.finishRequest,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),this._httpTransferCallbackKey="fm.httpTransfer.callback",void fm.util.attachProperties(this,arguments[0])):(e.__super__.constructor.call(this),void(this._httpTransferCallbackKey="fm.httpTransfer.callback"))}return extend(e,t),e.__wildcardCharacters=null,e.prototype._httpTransferCallbackKey=null,e._onSendFinish=null,e._onSendStart=null,e.addOnSendFinish=function(){var t;return t=arguments[0],fm.httpTransfer._onSendFinish=fm.delegate.combine(fm.httpTransfer._onSendFinish,t)},e.addOnSendStart=function(){var t;return t=arguments[0],fm.httpTransfer._onSendStart=fm.delegate.combine(fm.httpTransfer._onSendStart,t)},e.addQueryToUrl=function(){var t,e,n,r;return 2===arguments.length?(n=arguments[0],e=arguments[1],fm.httpTransfer.addQueryToUrl(n,e,null)):3===arguments.length?(n=arguments[0],e=arguments[1],r=arguments[2],fm.stringExtensions.isNullOrEmpty(e)?n:(t=r,(null===t||"undefined"==typeof t)&&(r=fm.stringExtensions.empty),e=fm.uri.escapeDataString(e),r=fm.uri.escapeDataString(r),fm.stringExtensions.concat([n,-1===fm.stringExtensions.indexOf(n,"?",fm.stringComparison.OrdinalIgnoreCase)?"?":"&",e,"=",r]))):void 0},e.getRandomWildcardCharacter=function(){var t,e;return e=fm.httpTransfer.getWildcardCharacters(),t=(new fm.randomizer).next(e.length),fm.stringExtensions.substring(e,t,1)},e.getWildcardCharacters=function(){return fm.httpTransfer.__wildcardCharacters},e.removeOnSendFinish=function(){var t;return t=arguments[0],fm.httpTransfer._onSendFinish=fm.delegate.remove(fm.httpTransfer._onSendFinish,t)},e.removeOnSendStart=function(){var t;return t=arguments[0],fm.httpTransfer._onSendStart=fm.delegate.remove(fm.httpTransfer._onSendStart,t)},e.replaceWildcards=function(){var t;return t=arguments[0],t.replace("*",fm.httpTransfer.getRandomWildcardCharacter())},e.setWildcardCharacters=function(){var t;return t=arguments[0],e.__wildcardCharacters=t},e.prototype.finishRequest=function(){var t;return t=arguments[0],this.raiseOnSendFinish(t)},e.prototype.raiseOnSendFinish=function(){var t,e,n,r;return r=arguments[0],e=fm.httpTransfer._onSendFinish,t=e,null!==t&&"undefined"!=typeof t?(n=new fm.httpSendFinishArgs,n.setSender(r.getRequestArgs().getSender()),n.setRequestBinaryContent(r.getRequestArgs().getBinaryContent()),n.setRequestTextContent(r.getRequestArgs().getTextContent()),n.setResponseBinaryContent(r.getBinaryContent()),n.setResponseTextContent(r.getTextContent()),n.setResponseHeaders(r.getHeaders()),e(n)):void 0},e.prototype.raiseOnSendStart=function(){var t,e,n,r;return r=arguments[0],e=fm.httpTransfer._onSendStart,t=e,null!==t&&"undefined"!=typeof t?(n=new fm.httpSendStartArgs,n.setSender(r.getSender()),n.setRequestBinaryContent(r.getBinaryContent()),n.setRequestTextContent(r.getTextContent()),e(n)):void 0},e.prototype.send=function(){var t,e,n,r,s,i;i=arguments[0],this.startRequest(i);try{t=i.getBinaryContent(),e=null!==t&&"undefined"!=typeof t?this.sendBinary(i):this.sendText(i)}catch(r){s=r,n=new fm.httpResponseArgs(i),n.setException(s),e=n}finally{}return this.finishRequest(e),e},e.prototype.sendAsync=function(){var t,e,n,r,s,i;i=arguments[0],e=arguments[1],this.startRequest(i),i.setDynamicValue(this._httpTransferCallbackKey,e);try{return t=i.getBinaryContent(),null!==t&&"undefined"!=typeof t?this.sendBinaryAsync(i,this.sendAsyncCallback):this.sendTextAsync(i,this.sendAsyncCallback)}catch(n){return r=n,s=new fm.httpResponseArgs(i),s.setException(r),e(s)}finally{}},e.prototype.sendAsyncCallback=function(){var t,e;return e=arguments[0],t=e.getRequestArgs().getDynamicValue(this._httpTransferCallbackKey),e.getRequestArgs().unsetDynamicValue(this._httpTransferCallbackKey),this.finishRequest(e),t(e)},e.prototype.sendBinary=function(){var t;return t=arguments[0]},e.prototype.sendBinaryAsync=function(){var t,e;return e=arguments[0],t=arguments[1]},e.prototype.sendText=function(){var t;return t=arguments[0]},e.prototype.sendTextAsync=function(){var t,e;return e=arguments[0],t=arguments[1]},e.prototype.shutdown=function(){},e.prototype.startRequest=function(){var t;return t=arguments[0],this.raiseOnSendStart(t)},e.__wildcardCharacters="abcdefghijklmnopqrstuvwxyz",e}(fm.object);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpTransferFactory=function(t){function e(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e._createHttpTransfer=null,e.defaultCreateHttpTransfer=function(){return new fm.httpWebRequestTransfer},e.getCreateHttpTransfer=function(){return fm.httpTransferFactory._createHttpTransfer},e.getHttpTransfer=function(){var t,n,r;return t=fm.httpTransferFactory.getCreateHttpTransfer(),(null===t||"undefined"==typeof t)&&e.setCreateHttpTransfer(e.defaultCreateHttpTransfer),r=fm.httpTransferFactory.getCreateHttpTransfer()(),n=r,(null===n||"undefined"==typeof n)&&(r=fm.httpTransferFactory.defaultCreateHttpTransfer()),r},e.setCreateHttpTransfer=function(){var t;return t=arguments[0],e._createHttpTransfer=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.jsonChecker=function(t){function e(){this.push=bind(this.push,this),this.pop=bind(this.pop,this),this.onError=bind(this.onError,this),this.finalCheck=bind(this.finalCheck,this),this.checkString=bind(this.checkString,this),this.check=bind(this.check,this);var t;if(1===arguments.length&&fm.util.isPlainObject(arguments[0]))return e.call(this,0),void fm.util.attachProperties(this,arguments[0]);if(0===arguments.length)return void e.call(this,0);if(1===arguments.length){if(t=arguments[0],e.__super__.constructor.call(this),0>t)throw new Error("Invalid depth.");return this.__state=0,this.__depth=t,this.__stack=new fm.stack(t),void this.push(fm.jsonCheckerMode.Done)}}return extend(e,t),e.prototype.__depth=0,e.prototype.__offset=0,e.prototype.__stack=null,e.prototype.__state=0,e._ascii_class=null,e._state_transition_table=null,e.prototype.check=function(){var t,e,n,r;return t=arguments[0],0>t&&this.onError(),t>=128?n=30:(n=fm.jsonChecker._ascii_class[t],-1>=n&&this.onError()),r=fm.jsonChecker._state_transition_table[this.__state][n],r>=0?(this.__state=r,this.__offset=this.__offset+1):(-9===r?(this.pop(fm.jsonCheckerMode.Key),this.__state=1):-8===r?(this.pop(fm.jsonCheckerMode.Object),this.__state=1):-7===r?(this.pop(fm.jsonCheckerMode.Array),this.__state=1):-6===r?(this.push(fm.jsonCheckerMode.Key),this.__state=2):-5===r?(this.push(fm.jsonCheckerMode.Array),this.__state=6):-4===r?(e=this.__stack.peek(),e===fm.jsonCheckerMode.Key?this.__state=4:e===fm.jsonCheckerMode.Array||e===fm.jsonCheckerMode.Object?this.__state=1:e===fm.jsonCheckerMode.Done?(this.push(fm.jsonCheckerMode.String),this.__state=7):e===fm.jsonCheckerMode.String?(this.pop(fm.jsonCheckerMode.String),this.__state=1):this.onError()):-3===r?(e=this.__stack.peek(),e===fm.jsonCheckerMode.Object?(this.pop(fm.jsonCheckerMode.Object),this.push(fm.jsonCheckerMode.Key),this.__state=3):e===fm.jsonCheckerMode.Array?this.__state=5:this.onError()):-2===r?(this.pop(fm.jsonCheckerMode.Key),this.push(fm.jsonCheckerMode.Object),this.__state=5):this.onError(),this.__offset=this.__offset+1)},e.prototype.checkString=function(){var t,e,n,r,s,i,o,a,u,l;if(l=arguments[0],i=0,s=0,t=new fm.holder(i),e=fm.parseAssistant.tryParseDoubleValue(l,t),i=t.getValue(),n=new fm.holder(s),r=fm.parseAssistant.tryParseDecimalValue(l,n),s=n.getValue(),"true"===l||"false"===l||"null"===l||e||r)return!0;try{for(u=0;u<l.length;)try{this.check(fm.convert.toInt32(l.charAt(u)))}finally{u++}return this.finalCheck(),!0}catch(o){return a=o,!1}finally{}},e.prototype.finalCheck=function(){return 1!==this.__state&&this.onError(),this.pop(fm.jsonCheckerMode.Done)},e.prototype.onError=function(){throw new Error(fm.stringExtensions.format("Invalid JSON text at character offset {0}.",fm.intExtensions.toString(this.__offset,"N0")))},e.prototype.pop=function(){var t;return t=arguments[0],this.__stack.pop()!==t?this.onError():void 0},e.prototype.push=function(){var t;return t=arguments[0],this.__depth>0&&this.__stack.getCount()>=this.__depth&&this.onError(),this.__stack.push(t)},e._ascii_class=[-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,30,8,30,30,30,30,30,30,30,30,11,7,12,13,10,14,15,15,15,15,15,15,15,15,15,6,30,30,30,30,30,30,28,28,28,28,29,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,4,9,5,30,30,30,16,17,18,19,20,21,30,30,30,30,30,22,30,23,30,30,30,24,25,26,27,30,30,30,30,30,2,30,3,30,30],e._state_transition_table=[[0,0,-6,-1,-5,-1,-1,-1,-4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,2,-1,-9,-1,-1,-1,-1,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,3,-1,-1,-1,-1,-1,-1,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,4,-1,-1,-1,-1,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[5,5,-6,-1,-5,-1,-1,-1,7,-1,-1,-1,13,-1,14,15,-1,-1,-1,-1,-1,23,-1,27,-1,-1,20,-1,-1,-1,-1],[6,6,-6,-1,-5,-7,-1,-1,7,-1,-1,-1,13,-1,14,15,-1,-1,-1,-1,-1,23,-1,27,-1,-1,20,-1,-1,-1,-1],[7,-1,7,7,7,7,7,7,-4,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[-1,-1,-1,-1,-1,-1,-1,-1,7,7,7,-1,-1,-1,-1,-1,-1,7,-1,-1,-1,7,-1,7,7,-1,7,9,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,10,10,10,10,10,10,10,-1,-1,-1,-1,-1,-1,10,10,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,11,11,11,11,11,11,11,-1,-1,-1,-1,-1,-1,11,11,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,12,12,12,12,12,12,12,12,-1,-1,-1,-1,-1,-1,12,12,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,7,7,7,7,7,7,7,-1,-1,-1,-1,-1,-1,7,7,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,16,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,16,15,15,-1,-1,-1,-1,17,-1,-1,-1,-1,-1,-1,-1,-1,17,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,16,16,-1,-1,-1,-1,17,-1,-1,-1,-1,-1,-1,-1,-1,17,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,18,18,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,21,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,22,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,24,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,25,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,26,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,28,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,29,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1]],e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.nullLogProvider=function(t){function e(){return this.writeLine=bind(this.writeLine,this),this.log=bind(this.log,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype.log=function(){var t,e,n;return 3===arguments.length?(e=arguments[0],n=arguments[1],void(t=arguments[2])):void(2===arguments.length&&(e=arguments[0],n=arguments[1]))},e.prototype.writeLine=function(){var t;return t=arguments[0]},e}(fm.logProvider);var extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.serializer=function(t){function e(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.charToUnicodeString=function(){var t,e,n,r,s;return s=arguments[0],t=fm.serializer.intToHex(s>>12&15),e=fm.serializer.intToHex(s>>8&15),n=fm.serializer.intToHex(s>>4&15),r=fm.serializer.intToHex(15&s),fm.stringExtensions.concat(["\\u",t.toString(),e.toString(),n.toString(),r.toString()])},e.deserializeBoolean=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),"null"===r)return null;if(n=!1,t=new fm.holder(n),e=fm.parseAssistant.tryParseBooleanValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeBooleanArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),"null"===t)return null;if(e=null,"["===t.charAt(0))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))e=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),e=new Array(r.length),n=0;n<r.length;)try{e[n]=fm.serializer.deserializeBoolean(fm.stringExtensions.trim(r[n]))}finally{n++}return e},e.deserializeDecimal=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),"null"===r)return null;if(n=0,t=new fm.holder(n),e=fm.parseAssistant.tryParseDecimalValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeDecimalArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),"null"===t)return null;if(n=null,"["===t.charAt(0))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),n=new Array(r.length),e=0;e<r.length;)try{n[e]=fm.serializer.deserializeDecimal(fm.stringExtensions.trim(r[e]))}finally{e++}return n},e.deserializeDouble=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),"null"===r)return null;if(n=0,t=new fm.holder(n),e=fm.parseAssistant.tryParseDoubleValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeDoubleArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),"null"===t)return null;if(n=null,"["===t.charAt(0))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),n=new Array(r.length),e=0;e<r.length;)try{n[e]=fm.serializer.deserializeDouble(fm.stringExtensions.trim(r[e]))}finally{e++}return n},e.deserializeFloat=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),"null"===r)return null;if(n=0,t=new fm.holder(n),e=fm.parseAssistant.tryParseFloatValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeFloatArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),"null"===t)return null;if(n=null,"["===t.charAt(0))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),n=new Array(r.length),e=0;e<r.length;)try{n[e]=fm.serializer.deserializeFloat(fm.stringExtensions.trim(r[e]))}finally{e++}return n},e.deserializeGuid=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),"null"===r)return null;if(n=fm.guid.empty,t=new fm.holder(n),e=fm.parseAssistant.tryParseGuidValue(fm.serializer.deserializeString(r),t),n=t.getValue(),e)return n}return null},e.deserializeGuidArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),"null"===t)return null;if(e=null,"["===t.charAt(0))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))e=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),e=new Array(r.length),n=0;n<r.length;)try{e[n]=fm.serializer.deserializeGuid(fm.stringExtensions.trim(r[n]))}finally{n++}return e},e.deserializeInteger=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),"null"===r)return null;if(n=0,t=new fm.holder(n),e=fm.parseAssistant.tryParseIntegerValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeIntegerArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),"null"===t)return null;if(n=null,"["===t.charAt(0))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),n=new Array(r.length),e=0;e<r.length;)try{n[e]=fm.serializer.deserializeInteger(fm.stringExtensions.trim(r[e]))}finally{e++}return n},e.deserializeLong=function(){var t,e,n,r;if(r=arguments[0],!fm.stringExtensions.isNullOrEmpty(r)){if(r=fm.stringExtensions.trim(r),"null"===r)return null;if(n=0,t=new fm.holder(n),e=fm.parseAssistant.tryParseLongValue(r,t),n=t.getValue(),e)return n}return null},e.deserializeLongArray=function(){var t,e,n,r;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),"null"===t)return null;if(n=null,"["===t.charAt(0))if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(r=fm.stringExtensions.split(t,[","]),n=new Array(r.length),e=0;e<r.length;)try{n[e]=fm.serializer.deserializeLong(fm.stringExtensions.trim(r[e]))}finally{e++}return n},e.deserializeObject=function(){var t,e,n,r,s,i,o,a,u,l,c,p,h,f,g,d,m,y,_;if(u=arguments[0],r=arguments[1],e=arguments[2],t=u,null===t||"undefined"==typeof t)return null;if(u=fm.stringExtensions.trim(u),"null"===u||u.length<2)return null;if(m=r(),"{"===u.charAt(0)&&"}"===u.charAt(u.length-1)&&u.length>2)for(u=fm.stringExtensions.concat(fm.stringExtensions.substring(u,1,u.length-2),","),c=0,p=0,s=!1,h=-2,l=fm.stringType.None,g=0,f=0,_=fm.stringExtensions.empty,d=fm.stringExtensions.empty,a=0;a<u.length;)try{if(n=u.charAt(a),i=h===a-1,o=!1,!s)switch(n){case"[":p++,o=!0;break;case"]":p--,o=!0;break;case"{":c++,o=!0;break;case"}":c--,o=!0}if(!o&&(s&&"\\"===n&&!i&&(h=a,o=!0),!o)){if(0===c&&0===p)switch(n){case",":s||(d=fm.stringExtensions.trim(fm.stringExtensions.substring(u,f,a-f)),e(m,fm.serializer.deserializeString(_),d),g=a+1),o=!0;break;case":":s||(_=fm.stringExtensions.trim(fm.stringExtensions.substring(u,g,a-g)),f=a+1),o=!0}o||"'"!==n&&'"'!==n||i||(y='"'===n?fm.stringType.Double:fm.stringType.Single,s?l===y&&(s=!1,l=fm.stringType.None):(s=!0,l=y),o=!0)}}finally{a++}return m},e.deserializeObjectArray=function(){var t,e,n,r,s,i,o,a,u,l,c;if(o=arguments[0],r=arguments[1],n=arguments[2],u=fm.serializer.deserializeRawArray(o),t=u,null===t||"undefined"==typeof t)return null;for(l=[],e=u,i=0,a=e.length;a>i;i++)c=e[i],s=fm.serializer.deserializeObject(c,r,n),fm.arrayExtensions.add(l,s);return l},e.deserializeObjectArrayFast=function(){var t,e,n,r,s,i,o,a,u,l,c;if(o=arguments[0],r=arguments[1],n=arguments[2],u=fm.serializer.deserializeRawArray(o),t=u,null===t||"undefined"==typeof t)return null;for(l=[],e=u,i=0,a=e.length;a>i;i++)c=e[i],s=fm.serializer.deserializeObject(c,r,n),s.setSerialized(c),fm.arrayExtensions.add(l,s);return l},e.deserializeObjectFast=function(){var t,e,n,r,s;return r=arguments[0],n=arguments[1],e=arguments[2],s=fm.serializer.deserializeObject(r,n,e),t=s,null!==t&&"undefined"!=typeof t&&s.setSerialized(r),s},e.deserializeRaw=function(){var t;return t=arguments[0],fm.stringExtensions.isNullOrEmpty(t)?null:fm.stringExtensions.trim(t)},e.deserializeRawArray=function(){var t,e,n,r,s,i,o,a,u,l,c,p;if(i=arguments[0],t=i,null===t||"undefined"==typeof t)return null;if(i=fm.stringExtensions.trim(i),"null"===i||i.length<2)return null;if(o=[],"["===i.charAt(0)&&"]"===i.charAt(i.length-1)&&i.length>2)for(u=0,c=0,n=!1,l=-2,a=fm.stringType.None,s=1;s<i.length-1;)try{if(e=i.charAt(s),r=l===s-1,!n)switch(e){case"{":0===u&&(c=s),u++;break;case"}":u--,0===u&&fm.arrayExtensions.add(o,fm.stringExtensions.substring(i,c,s-c+1))}n&&"\\"===e&&!r?l=s:"'"!==e&&'"'!==e||r||(p='"'===e?fm.stringType.Double:fm.stringType.Single,n?a===p&&(n=!1,a=fm.stringType.None):(n=!0,a=p))}finally{s++}return o},e.deserializeString=function(){var t,e,n;return n=arguments[0],fm.stringExtensions.isNullOrEmpty(n)?null:(n=fm.stringExtensions.trim(n),"null"===n?null:(t=fm.stringExtensions.startsWith(n,'"')||fm.stringExtensions.startsWith(n,"'"),e=fm.stringExtensions.endsWith(n,'"')||fm.stringExtensions.endsWith(n,"'"),t&&e?fm.serializer.unescapeString(fm.serializer.trimQuotes(n)):null))},e.deserializeStringArray=function(){var t,e,n;if(t=arguments[0],fm.stringExtensions.isNullOrEmpty(t))return null;if(t=fm.stringExtensions.trim(t),"null"===t)return null;if("["===t.charAt(0)){if(t=fm.stringExtensions.substring(t,1,t.length-2),fm.stringExtensions.isNullOrEmpty(t))n=new Array(0);else for(n=fm.stringExtensions.split(t,[","]),e=0;e<n.length;)try{n[e]=fm.serializer.unescapeString(fm.serializer.trimQuotes(fm.stringExtensions.trim(n[e])))}finally{e++}return n}return[t]},e.escapeString=function(){var t,e,n,r,s;for(s=arguments[0],t=new fm.stringBuilder,r=-1,n=0;n<s.length;)try{if(e=s.charAt(n),e>"~")-1!==r&&(t.append(s,r,n-r),r=-1),t.append(fm.serializer.charToUnicodeString(e));else switch(e){case"\b":-1!==r&&(t.append(s,r,n-r),r=-1),t.append("\\b");break;case"\f":-1!==r&&(t.append(s,r,n-r),r=-1),t.append("\\f");break;case"\n":-1!==r&&(t.append(s,r,n-r),r=-1),t.append("\\n");break;case"\r":-1!==r&&(t.append(s,r,n-r),r=-1),t.append("\\r");break;case"    ":-1!==r&&(t.append(s,r,n-r),r=-1),t.append("\\t");break;case'"':-1!==r&&(t.append(s,r,n-r),r=-1),t.append('\\"');break;case"/":-1!==r&&(t.append(s,r,n-r),r=-1),t.append("\\/");break;case"\\":-1!==r&&(t.append(s,r,n-r),r=-1),t.append("\\\\");break;default:-1===r&&(r=n)}}finally{n++}return-1!==r&&t.append(s,r,s.length-r),t.toString()},e.intToHex=function(){var t;return t=arguments[0],9>=t?t+48:t-10+97},e.isValidJson=function(){var t;return t=arguments[0],(new fm.jsonChecker).checkString(t)},e.serializeBoolean=function(){var t;return t=arguments[0],null===t?"null":t?"true":"false"},e.serializeBooleanArray=function(){var t,e,n,r;if(e=arguments[0],t=e,null===t||"undefined"==typeof t)return"null";for(r=new Array(e.length),n=0;n<e.length;)try{r[n]=fm.serializer.serializeBoolean(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},e.serializeDecimal=function(){var t;return t=arguments[0],null===t?"null":t.toString()},e.serializeDecimalArray=function(){var t,e,n,r;if(e=arguments[0],t=e,null===t||"undefined"==typeof t)return"null";for(r=new Array(e.length),n=0;n<e.length;)try{r[n]=fm.serializer.serializeDecimal(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},e.serializeDouble=function(){var t;return t=arguments[0],null===t?"null":t.toString()},e.serializeDoubleArray=function(){var t,e,n,r;if(e=arguments[0],t=e,null===t||"undefined"==typeof t)return"null";for(r=new Array(e.length),n=0;n<e.length;)try{r[n]=fm.serializer.serializeDouble(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},e.serializeFloat=function(){var t;return t=arguments[0],null===t?"null":t.toString()},e.serializeFloatArray=function(){var t,e,n,r;if(e=arguments[0],t=e,null===t||"undefined"==typeof t)return"null";for(r=new Array(e.length),n=0;n<e.length;)try{r[n]=fm.serializer.serializeFloat(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},e.serializeGuid=function(){var t;return t=arguments[0],null===t?"null":fm.stringExtensions.concat('"',t.toString(),'"')},e.serializeGuidArray=function(){var t,e,n,r;if(e=arguments[0],t=e,null===t||"undefined"==typeof t)return"null";for(r=new Array(e.length),n=0;n<e.length;)try{r[n]=fm.serializer.serializeGuid(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},e.serializeInteger=function(){var t;return t=arguments[0],null===t?"null":fm.intExtensions.toString(t)},e.serializeIntegerArray=function(){var t,e,n,r;if(e=arguments[0],t=e,null===t||"undefined"==typeof t)return"null";for(r=new Array(e.length),n=0;n<e.length;)try{r[n]=fm.serializer.serializeInteger(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},e.serializeLong=function(){var t;return t=arguments[0],null===t?"null":fm.intExtensions.toString(t)},e.serializeLongArray=function(){var t,e,n,r;if(e=arguments[0],t=e,null===t||"undefined"==typeof t)return"null";for(r=new Array(e.length),n=0;n<e.length;)try{r[n]=fm.serializer.serializeLong(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},e.serializeObject=function(){var t,e,n,r,s,i,o,a,u;if(a=arguments[0],n=arguments[1],t=a,null===t||"undefined"==typeof t)return"null";for(s={},n(a,s),o=[],e=fm.hashExtensions.getKeys(s),r=0,i=e.length;i>r;r++)u=e[r],fm.arrayExtensions.add(o,fm.stringExtensions.concat(fm.serializer.serializeString(u),":",s[u]));return fm.stringExtensions.concat("{",fm.stringExtensions.join(",",fm.arrayExtensions.toArray(o)),"}")},e.serializeObjectArray=function(){var t,e,n,r,s;if(r=arguments[0],e=arguments[1],t=r,null===t||"undefined"==typeof t)return"null";if(0===r.length)return"[]";for(s=new Array(r.length),n=0;n<r.length;)try{s[n]=fm.serializer.serializeObject(r[n],e)}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",s),"]")},e.serializeObjectArrayFast=function(){var t,e,n,r,s;if(r=arguments[0],e=arguments[1],t=r,null===t||"undefined"==typeof t)return"null";if(0===r.length)return"[]";for(s=new Array(r.length),n=0;n<r.length;)try{s[n]=fm.serializer.serializeObjectFast(r[n],e);
}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",s),"]")},e.serializeObjectFast=function(){var t,e,n;return n=arguments[0],e=arguments[1],t=n,null===t||"undefined"==typeof t?"null":((!n.getIsSerialized()||n.getIsDirty())&&n.setSerialized(fm.serializer.serializeObject(n,e)),n.getSerialized())},e.serializeRaw=function(){var t;return t=arguments[0]},e.serializeRawArray=function(){var t,e;return e=arguments[0],t=e,null===t||"undefined"==typeof t?"null":fm.stringExtensions.concat("[",fm.stringExtensions.join(",",e),"]")},e.serializeString=function(){var t,e;return e=arguments[0],t=e,null===t||"undefined"==typeof t?"null":fm.stringExtensions.concat('"',fm.serializer.escapeString(e),'"')},e.serializeStringArray=function(){var t,e,n,r;if(e=arguments[0],t=e,null===t||"undefined"==typeof t)return"null";for(r=new Array(e.length),n=0;n<e.length;)try{r[n]=fm.serializer.serializeString(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},e.trimQuotes=function(){var t,e,n;return n=arguments[0],n.length>1&&(t=n.charAt(0),e=n.charAt(n.length-1),t!==e||"'"!==t&&'"'!==t||(n=fm.stringExtensions.substring(n,1,n.length-2))),n},e.unescapeString=function(){var t,e,n,r,s,i;for(i=arguments[0],t=new fm.stringBuilder,s=-1,r=0;r<i.length;)try{if(e=i.charAt(r),"\\"===e){if(-1!==s&&(t.append(i,s,r-s),s=-1),r===i.length-1)continue;switch(n=i.charAt(r+1)){case"b":t.append("\b");break;case"f":t.append("\f");break;case"n":t.append("\n");break;case"r":t.append("\r");break;case"t":t.append(" ");break;case"/":t.append("/");break;case"u":r<i.length-5?(t.append(fm.serializer.unicodeStringToChar(fm.stringExtensions.substring(i,r,6)).toString()),r+=4):t.append("u");break;case"x":r<i.length-3?(t.append(fm.serializer.unicodeStringToChar(fm.stringExtensions.substring(i,r,4)).toString()),r+=2):t.append("x");break;default:t.append(n.toString())}r++;continue}-1===s&&(s=r)}finally{r++}return-1!==s&&t.append(i,s,i.length-s),t.toString()},e.unicodeStringToChar=function(){var t;if(t=arguments[0],t.length<2)throw new Error("Unicode string has invalid length.");return fm.convert.toInt32(t.substring(2),16)},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketSendState=function(t){function e(){return this.setSendArgs=bind(this.setSendArgs,this),this.setRequestBytes=bind(this.setRequestBytes,this),this.getSendArgs=bind(this.getSendArgs,this),this.getRequestBytes=bind(this.getRequestBytes,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype._requestBytes=null,e.prototype._sendArgs=null,e.prototype.getRequestBytes=function(){return this._requestBytes},e.prototype.getSendArgs=function(){return this._sendArgs},e.prototype.setRequestBytes=function(){var t;return t=arguments[0],this._requestBytes=t},e.prototype.setSendArgs=function(){var t;return t=arguments[0],this._sendArgs=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketRequest=function(t){function e(){return this.setCallback=bind(this.setCallback,this),this.setArgs=bind(this.setArgs,this),this.getCallback=bind(this.getCallback,this),this.getArgs=bind(this.getArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void e.__super__.constructor.call(this)}return extend(e,t),e.prototype._args=null,e.prototype._callback=null,e.prototype.getArgs=function(){return this._args},e.prototype.getCallback=function(){return this._callback},e.prototype.setArgs=function(){var t;return t=arguments[0],this._args=t},e.prototype.setCallback=function(){var t;return t=arguments[0],this._callback=t},e}(fm.object);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocketWebRequestTransfer=function(t){function e(){this.streamFailure=bind(this.streamFailure,this),this.shutdown=bind(this.shutdown,this),this.setWebSocket=bind(this.setWebSocket,this),this.sendAsync=bind(this.sendAsync,this),this.send=bind(this.send,this),this.receive=bind(this.receive,this),this.open=bind(this.open,this),this.getWebSocket=bind(this.getWebSocket,this),this.connectSuccess=bind(this.connectSuccess,this),this.connectFailure=bind(this.connectFailure,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(e.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],void e.__super__.constructor.call(this,t))}return extend(e,t),e.prototype._activeRequest=null,e.prototype._webSocket=null,e.prototype.connectFailure=function(){var t,e;return e=arguments[0],t=this.getOnOpenFailure(),null!==t&&"undefined"!=typeof t?this.getOnOpenFailure()(e):void 0},e.prototype.connectSuccess=function(){var t,e;return e=arguments[0],t=this.getOnOpenSuccess(),null!==t&&"undefined"!=typeof t?this.getOnOpenSuccess()(e):void 0},e.prototype.getWebSocket=function(){return this._webSocket},e.prototype.open=function(){var t,e,n,r;n=arguments[0],this.setWebSocket(new fm.webSocket(this.getUrl()));try{return r=new fm.webSocketOpenArgs,r.setHandshakeTimeout(this.getHandshakeTimeout()),r.setHeaders(n),r.setOnSuccess(this.connectSuccess),r.setOnFailure(this.connectFailure),r.setOnStreamFailure(this.streamFailure),r.setOnRequestCreated(this.getOnRequestCreated()),r.setOnResponseReceived(this.getOnResponseReceived()),r.setOnReceive(this.receive),r.setSender(this.getSender()),this.getWebSocket().open(r)}catch(t){return e=t,fm.log.error("Could not open WebSocket.",e)}finally{}},e.prototype.receive=function(){var t,e;return t=arguments[0],e=new fm.httpResponseArgs(this._activeRequest.getArgs()),e.setTextContent(t.getTextMessage()),e.setBinaryContent(t.getBinaryMessage()),this._activeRequest.getCallback()(e)},e.prototype.send=function(){var t;throw t=arguments[0],new Error("Synchronous WebSockets are not supported.")},e.prototype.sendAsync=function(){var t,e,n,r,s,i,o,a,u;a=arguments[0],e=arguments[1];try{return o=new fm.webSocketRequest,o.setArgs(a),o.setCallback(e),i=o,t=new fm.webSocketSendArgs,t.setTimeout(i.getArgs().getTimeout()),u=t,u.setTextMessage(i.getArgs().getTextContent()),u.setBinaryMessage(i.getArgs().getBinaryContent()),this._activeRequest=i,this.getWebSocket().send(u)}catch(n){return r=n,s=new fm.httpResponseArgs(a),s.setException(r),s.setStatusCode(0),e(s)}finally{}},e.prototype.setWebSocket=function(){var t;return t=arguments[0],this._webSocket=t},e.prototype.shutdown=function(){return this.getWebSocket().close()},e.prototype.streamFailure=function(){var t,e;return e=arguments[0],t=this.getOnStreamFailure(),null!==t&&"undefined"!=typeof t?this.getOnStreamFailure()(e):void 0},e}(fm.webSocketTransfer);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.timeoutTimer=function(t){function e(t,n){this._timerCallback=bind(this._timerCallback,this),this.stop=bind(this.stop,this),this.start=bind(this.start,this),e.__super__.constructor.call(this),this._callback=t,this._state=n}return extend(e,t),e.prototype._timer=null,e.prototype._callback=null,e.prototype._state=null,e.prototype._currentTimeout=0,e.prototype.start=function(t){if(this._timer)throw new Error("Timer is currently active.");return this._currentTimeout=t,t=fm.mathAssistant.max(0,t),this._timer=setTimeout(this._timerCallback,t)},e.prototype.stop=function(){return this._timer?(clearTimeout(this._timer),this._timer=null,!0):!1},e.prototype._timerCallback=function(){return this._currentTimeout>=0&&this.stop()&&this._callback?this._callback(this._state):void 0},e}(fm.baseTimeoutTimer);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.webSocket=function(t){function e(t){this.raiseOnResponseReceived=bind(this.raiseOnResponseReceived,this),this.raiseOnRequestCreated=bind(this.raiseOnRequestCreated,this),this.raiseCloseComplete=bind(this.raiseCloseComplete,this),this.raiseReceive=bind(this.raiseReceive,this),this.raiseStreamFailure=bind(this.raiseStreamFailure,this),this.raiseOpenFailure=bind(this.raiseOpenFailure,this),this.raiseOpenSuccess=bind(this.raiseOpenSuccess,this),this.close=bind(this.close,this),this.send=bind(this.send,this),this._onMessage=bind(this._onMessage,this),this._onClose=bind(this._onClose,this),this._onError=bind(this._onError,this),this._onOpen=bind(this._onOpen,this),this.open=bind(this.open,this),this.getIsOpen=bind(this.getIsOpen,this),this.getBufferedAmount=bind(this.getBufferedAmount,this),e.__super__.constructor.call(this),t=fm.util.absolutizeUrl(t),t=t.replace("https://","wss://"),t=t.replace("http://","ws://"),this._requestUrl=t}return extend(e,t),e.getExists=function(){return!0},e._disableBinary=!1,e.setDisableBinary=function(t){return e._disableBinary=t},e.getDisableBinary=function(){return"undefined"==typeof Uint8Array?!0:e._disableBinary},e.prototype.getBufferedAmount=function(){return this._webSocket?this._webSocket.bufferedAmount:0},e.prototype.getIsOpen=function(){return this._webSocket?1===this._webSocket.readyState:!1},e.prototype.open=function(t){var e,n,r,s,i;if(i=this._requestUrl,r=t.getHeaders(),s={},r&&(s=r.toHash()),fm.webSocket.getDisableBinary()&&(s["X-FM-DisableBinary"]="true"),i=fm.httpTransfer.addQueryToUrl(i,"headers",fm.json.serialize(s)),"WebSocket"in window?this._webSocket=new WebSocket(i):"MozWebSocket"in window&&(this._webSocket=new MozWebSocket(i)),!this._webSocket)return void this.raiseOpenFailure(t,{statusCode:0,exception:new Error("Could not create WebSocket.")});if(!fm.webSocket.getDisableBinary())try{this._webSocket.binaryType="arraybuffer"}catch(n){e=n,fm.webSocket.setDisableBinary(!0)}return this._onRequestCreated=t.getOnRequestCreated(),this._onResponseReceived=t.getOnResponseReceived(),this.raiseOnRequestCreated(t),this._opening=!0,this._closing=!1,this._openArgs=t,this._raisedStreamFailure=!1,this._raisedOpenFailure=!1,this._webSocket.onopen=this._onOpen,this._webSocket.onerror=this._onError,this._webSocket.onclose=this._onClose,this._webSocket.onmessage=this._onMessage},e.prototype._onOpen=function(t){var e;return e=this._openArgs,this.raiseOnResponseReceived(e),this._opening=!1,this.raiseOpenSuccess(e)},e.prototype._onError=function(t){var e;if(e=this._openArgs,this._opening){if(this._opening=!1,!this._raisedOpenFailure)return this._raisedOpenFailure=!0,this.raiseOpenFailure(e,{statusCode:t.code,exception:new Error(t.message||"Unspecified WebSocket error.")})}else if(!this._closing&&!this._raisedStreamFailure)return this._raisedStreamFailure=!0,this.raiseStreamFailure(e,{statusCode:t.code,exception:new Error(t.message||"Unspecified WebSocket error.")})},e.prototype._onClose=function(t){var e;if(e=this._openArgs,this._opening){if(this._opening=!1,!this._raisedOpenFailure)return this._raisedOpenFailure=!0,this.raiseOpenFailure(e,{statusCode:t.code,exception:new Error("Could not open WebSocket.")})}else if(this._aborting&&!this._raisedStreamFailure)return this._raisedStreamFailure=!0,this.raiseStreamFailure(e,{statusCode:t.code,exception:new Error("WebSocket request timed out.")})},e.prototype._onMessage=function(t){var e,n,r;return e=this._openArgs,this._timer&&window.clearTimeout(this._timer),this.raiseOnResponseReceived(this._sendArgs),this._sendArgs=null,n=null,r=null,!fm.webSocket.getDisableBinary()&&t.data instanceof ArrayBuffer?n=new Uint8Array(t.data):r=t.data,this.raiseReceive(e,{textMessage:r,binaryMessage:n})},e.prototype.send=function(t){var e,n,r,s,i;if(this._webSocket){if(this._sendArgs=t,this.raiseOnRequestCreated(t),this._timer&&window.clearTimeout(this._timer),i=t.getTimeout(),i>0&&(this._timer=window.setTimeout(function(t){return function(){return t._aborting=!0,t._webSocket.close(),t._onClose({code:0})}}(this),i)),s=!1,e=t.getBinaryMessage(),!fm.webSocket.getDisableBinary()&&e)try{this._webSocket.send(e.buffer),s=!0}catch(r){n=r,fm.webSocket.setDisableBinary(!0)}return s?void 0:this._webSocket.send(t.getTextMessage())}},e.prototype.close=function(t){var e,n;return t||this.close(new fm.webSocketCloseArgs),this._webSocket?(e=t.getStatusCode()||fm.webSocketStatusCode.Normal,n=t.getReason()||"",this._closing=!0,this._webSocket.close(e,n),this._webSocket=null,this.raiseCloseComplete(t,{statusCode:e,reason:n}),!0):!1},e.prototype.raiseOpenSuccess=function(t){var e,n;return n=t.getOnSuccess(),n?(e=new fm.webSocketOpenSuccessArgs,e.setOpenArgs(t),n(e)):void 0},e.prototype.raiseOpenFailure=function(t,e){var n,r;return r=t.getOnFailure(),r?(n=new fm.webSocketOpenFailureArgs(e),n.setOpenArgs(t),r(n)):void 0},e.prototype.raiseStreamFailure=function(t,e){var n,r;return r=t.getOnStreamFailure(),r?(n=new fm.webSocketStreamFailureArgs(e),n.setOpenArgs(t),r(n)):void 0},e.prototype.raiseReceive=function(t,e){var n,r;return r=t.getOnReceive(),r?(n=new fm.webSocketReceiveArgs(e),n.setOpenArgs(t),r(n)):void 0},e.prototype.raiseCloseComplete=function(t,e){var n,r;return r=t.getOnComplete(),r?(n=new fm.webSocketCloseCompleteArgs(e),n.setCloseArgs(t),r(n)):void 0},e.prototype.raiseOnRequestCreated=function(t){var e,n;return n=this._onRequestCreated(),n?(e=new fm.httpRequestCreatedArgs,e.setRequestArgs(t),e.setSender(t.getSender()),e.setRequest(null),n(e)):void 0},e.prototype.raiseOnResponseReceived=function(t){var e,n;return n=this._onResponseReceived(),n?(e=new fm.httpResponseReceivedArgs,e.setRequestArgs(t),e.setSender(t.getSender()),e.setResponse(null),n(e)):void 0},e}(fm.baseWebSocket);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.httpWebRequestTransfer=function(t){function e(){return this.sendInternal=bind(this.sendInternal,this),this.process=bind(this.process,this),this.sendBinary=bind(this.sendBinary,this),this.sendBinaryAsync=bind(this.sendBinaryAsync,this),this.sendText=bind(this.sendText,this),this.sendTextAsync=bind(this.sendTextAsync,this),e.__super__.constructor.apply(this,arguments)}return extend(e,t),e._corsFailCache={},e._corsSuccessCache={},e._pmFailCache={},e._pmSuccessCache={},e.getPlatformCode=function(){return"js"},e.setDisableCORS=function(t){return e._disableCORS=t},e.getDisableCORS=function(){return e._disableCORS||!1},e.setDisablePostMessage=function(t){return e._disablePostMessage=t},e.getDisablePostMessage=function(){return e._disablePostMessage||!1},e.setForceJSONP=function(t){return e._forceJSONP=t},e.getForceJSONP=function(){return e._forceJSONP||!1},e.prototype.sendTextAsync=function(t,e){return fm.util.addOnLoad(function(n){return function(){return n.process(t,e)}}(this))},e.prototype.sendText=function(t){return this.process(t,null)},e.prototype.sendBinaryAsync=function(t,e){return fm.util.addOnLoad(function(n){return function(){return n.process(t,e)}}(this))},e.prototype.sendBinary=function(t){return this.process(t,null)},e.prototype.process=function(t,e){var n,r,s,i,o,a,u,l,c;return a=fm.httpWebRequestTransfer,c=t.getUrl(),t._processed||(c=fm.util.absolutizeUrl(c),t.setUrl(c),t._processed=!0),l=t.getSender(),r=a.getDisableCORS()||(l?l.getDisableCORS():!1),s=a.getDisablePostMessage()||(l?l.getDisablePostMessage():!1),o=a.getForceJSONP()||(l?l.getForceJSONP():!1),i=fm.xhr.send,n=!1,u=!1,fm.util.isXD(c)&&(r||!a.canCORS()||a._corsFailCache[c]?s||!a.canPostMessage()||a._pmFailCache[c]?i=fm.jsonp.send:(u=!0,i=fm.postMessage.send):n=!0),o&&(i=fm.jsonp.send),this.sendInternal(i,n,u,t,e)},e.prototype.sendInternal=function(t,e,n,r,s){var i,o,a,u,l,c;switch(l=this,u=new fm.httpResponseArgs(r),u.setException(new Error("Environment does not support synchronous requests.")),c=r.getUrl(),i=r.getDynamicProperties().frameUrl,i&&!r._processedFrame&&(i=fm.util.absolutizeUrl(i),r.getDynamicProperties().frameUrl=i,r._processedFrame=!0),i=i||c,o="GET",r.getMethod()){case fm.httpMethod.Head:o="HEAD";break;case fm.httpMethod.Post:o="POST";break;case fm.httpMethod.Put:o="PUT";break;case fm.httpMethod.Patch:o="PATCH";break;case fm.httpMethod.Delete:o="DELETE"}return a={sync:s?!1:!0,url:c,frameUrl:i,method:o,content:r.getTextContent(),contentBinary:r.getBinaryContent(),headers:r.getHeaders().toHash(),timeout:r.getTimeout(),robustResponse:!0,onRequestCreated:function(t){return function(t){var e,n;return n=r.getOnRequestCreated(),n?(e=new fm.httpRequestCreatedArgs,e.setRequestArgs(r),e.setSender(r.getSender()),e.setRequest(t),n(e)):void 0}}(this),onResponseReceived:function(t){return function(t){var e,n;return n=r.getOnResponseReceived(),n?(e=new fm.httpResponseReceivedArgs,e.setRequestArgs(r),e.setSender(r.getSender()),e.setResponse(t),n(e)):void 0}}(this),onSuccess:function(t){return function(t){return 0===t.statusCode&&e?(fm.httpWebRequestTransfer._corsSuccessCache[c]||(fm.httpWebRequestTransfer._corsFailCache[c]=!0),void(s?l.sendTextAsync(r,s):u=l.sendText(r))):(e?(fm.httpWebRequestTransfer._corsSuccessCache[c]=!0,delete fm.httpWebRequestTransfer._corsFailCache[c]):n&&(fm.httpWebRequestTransfer._pmSuccessCache[c]=!0,delete fm.httpWebRequestTransfer._pmFailCache[c]),u.setException(null),u.setTextContent(t.content),t.hasOwnProperty("contentBinary")&&u.setBinaryContent(t.contentBinary),u.setStatusCode(t.statusCode),u.setHeaders(new fm.nameValueCollection(t.headers)),s?s(u):void 0)}}(this),onFailure:function(t){return function(t){var i;return e&&!fm.httpWebRequestTransfer._corsSuccessCache[c]?(fm.httpWebRequestTransfer._corsFailCache[c]=!0,void(s?l.sendTextAsync(r,s):u=l.sendText(r))):!n||!t.local&&fm.httpWebRequestTransfer._pmSuccessCache[c]?(i=new Error(t.message),u.setException(i),s?s(u):void 0):(fm.httpWebRequestTransfer._pmFailCache[c]=!0,void(s?l.sendTextAsync(r,s):u=l.sendText(r)))}}(this)},t(a),u},e.canCORS=function(){return window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest},e.canPostMessage=function(){return fm.util.isIE6()||fm.util.isIE7()?!1:window.postMessage?!0:!1},e}(fm.httpTransfer);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;fm.domLogProvider=function(t){function e(t,n){this.log=bind(this.log,this),this.writeLine=bind(this.writeLine,this),this._container=t,e.__super__.constructor.call(this),n||(n=fm.logLevel.Warn),this.setLevel(n)}return extend(e,t),e.prototype._container=null,e.prototype.writeLine=function(t){var e;return e=document.createElement("div"),e.innerHTML=t.replace(/\n/g,"<br />"),this._container.appendChild(e)},e.prototype.log=function(t,e,n){var r;return r=fm.logProvider.getPrefix(t,!0)+" "+(e||""),n&&(r+="<br />"+n.message),this.writeLine(r)},e}(fm.logProvider);var bind=function(t,e){return function(){return t.apply(e,arguments)}},extend=function(t,e){function n(){this.constructor=t}for(var r in e)hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},hasProp={}.hasOwnProperty;return fm.consoleLogProvider=function(t){function e(t){this.log=bind(this.log,this),this.writeLine=bind(this.writeLine,this),e.__super__.constructor.call(this),t||(t=fm.logLevel.Warn),this.setLevel(t)}return extend(e,t),e.prototype.writeLine=function(t){return window.console&&window.console.log?window.console.log(t):void 0},e.prototype.log=function(t,e,n){var r;return r=fm.logProvider.getPrefix(t,!0)+" "+e,n&&(r+="\n"+n.message),this.writeLine(r)},e}(fm.logProvider),function(){return fm.httpTransfer.addQueryToUrl=function(){var t,e,n;return 1===arguments.length?e=arguments[0]:2===arguments.length?(e=arguments[0],t=arguments[1],fm.httpTransfer.addQueryToUrl(e,t,null)):3===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2],fm.stringExtensions.isNullOrEmpty(t)?e:((null===n||"undefined"==typeof n)&&(n=""),n=encodeURIComponent(n),fm.stringExtensions.concat([e,-1===fm.stringExtensions.indexOf(e,"?",fm.stringComparison.OrdinalIgnoreCase)?"?":"&",t,"=",n]))):void 0}}(),fm});

var cs = fm;

/*
 * Title: webrtc Client for JavaScript
 * Version: 4.8.1
 * Copyright Frozen Mountain Software 2011+
 */

!function(e,t,n){if("function"==typeof define&&define.amd)define(e,t,n);else if("object"==typeof exports){for(var s=0;s<t.length;s++)require("./"+t[s]);module.exports=n()}else this[e]=n()}("fm.webrtc",["fm"],function(){if("undefined"==typeof global||global.window||(global.window=global,global.document={cookie:""}),!window.fm)throw new Error("fm must be loaded before fm.webrtc.");window.fm.webrtc||(window.fm.webrtc={}),fm.webrtc.getVersion=function(){return"4.8.1"},fm.webrtc.connectRetryMode={Aggressive:1,Intelligent:2,None:3,Default:2},fm.webrtc.concurrencyMode={Low:1,High:2,Default:1},fm.webrtc.reconnect={Retry:1,Handshake:2,None:3},fm.webrtc.connectionType={WebSocket:1,LongPolling:2,CallbackPolling:3,IFrame:4,Flash:5,Unknown:99},fm.webrtc.messageType={Connect:1,Disconnect:2,Bind:3,Unbind:4,Subscribe:5,Unsubscribe:6,Publish:7,Notify:8,Service:9,Stream:10,Unknown:11};var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.backoffArgs=function(n){function s(){return this.setLastTimeout=e(this.setLastTimeout,this),this.setIndex=e(this.setIndex,this),this.getLastTimeout=e(this.getLastTimeout,this),this.getIndex=e(this.getIndex,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._index=0,s.prototype._lastTimeout=0,s.prototype.getIndex=function(){return this._index},s.prototype.getLastTimeout=function(){return this._lastTimeout},s.prototype.setIndex=function(){var e;return e=arguments[0],this._index=e},s.prototype.setLastTimeout=function(){var e;return e=arguments[0],this._lastTimeout=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.extensible=function(n){function s(){return this.setMeta=e(this.setMeta,this),this.setExtensionValue=e(this.setExtensionValue,this),this.getMeta=e(this.getMeta,this),this.getExtensionValue=e(this.getExtensionValue,this),this.setMetaJson=e(this.setMetaJson,this),this.setExtensionValueJson=e(this.setExtensionValueJson,this),this.setExtensions=e(this.setExtensions,this),this.getMetaJson=e(this.getMetaJson,this),this.getExtensionValueJson=e(this.getExtensionValueJson,this),this.getExtensions=e(this.getExtensions,this),this.getExtensionNames=e(this.getExtensionNames,this),this.getExtensionCount=e(this.getExtensionCount,this),this.copyExtensions=e(this.copyExtensions,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__extensions=null,s._acknowledgementExtensionName="fm.ack",s._disableBinaryExtensionName="fm.dbin",s._lastClientIdExtensionName="fm.lcid",s._lastSessionIdExtensionName="fm.lsid",s._metaExtensionName="fm.meta",s._notifyClientIdExtensionName="fm.notify",s._notifyingClientExtensionName="fm.notifying",s._publishingClientExtensionName="fm.publishing",s._serverActionsExtensionName="fm.server",s._serverTimeoutExtensionName="fm.timeout",s._sessionIdExtensionName="fm.sessionId",s._tagExtensionName="fm.tag",s.convertKeyToRecord=function(){var e;return e=arguments[0],new fm.webrtc.record(e)},s.convertRecordToKey=function(){var e;return e=arguments[0],e.getKey()},s.sharedGetChannel=function(){var e,t;return t=arguments[0],e=t,null===e||"undefined"==typeof e||0===t.length?null:t[0]},s.sharedGetChannels=function(){var e;return e=arguments[0]},s.sharedGetKey=function(){var e,t,n;return n=arguments[0],t=fm.webrtc.extensible.sharedGetRecord(n),e=t,null===e||"undefined"==typeof e?null:fm.webrtc.extensible.convertRecordToKey(t)},s.sharedGetKeys=function(){var e,t,n,s,r,i,o;if(o=arguments[0],o=fm.webrtc.extensible.sharedGetRecords(o),e=o,null===e||"undefined"==typeof e)return null;for(r=[],t=o,n=0,s=t.length;s>n;n++)i=t[n],fm.arrayExtensions.add(r,fm.webrtc.extensible.convertRecordToKey(i));return fm.arrayExtensions.toArray(r)},s.sharedGetRecord=function(){var e,t;return t=arguments[0],e=t,null===e||"undefined"==typeof e||0===t.length?null:t[0]},s.sharedGetRecords=function(){var e;return e=arguments[0]},s.sharedSetChannel=function(){var e,t,n,s,r,i;if(2===arguments.length){if(s=arguments[0],i=arguments[1],e=s,null===e||"undefined"==typeof e)return null;if(r=null,t=new fm.holder(r),n=fm.webrtc.extensible.validateChannel(s,t),r=t.getValue(),i&&!n)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",r));return[s]}return 1===arguments.length?(s=arguments[0],fm.webrtc.extensible.sharedSetChannel(s,!0)):void 0},s.sharedSetChannels=function(){var e,t,n,s,r,i,o,a,u,c;if(2===arguments.length){if(r=arguments[0],c=arguments[1],e=r,null!==e&&"undefined"!=typeof e)for(t=r,o=0,a=t.length;a>o;o++)if(u=t[o],i=null,n=new fm.holder(i),s=fm.webrtc.extensible.validateChannel(u,n),i=n.getValue(),c&&!s)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",i));return r}return 1===arguments.length?(r=arguments[0],fm.webrtc.extensible.sharedSetChannels(r,!0)):void 0},s.sharedSetKey=function(){var e,t,n,s,r,i,o;if(2===arguments.length){if(r=arguments[0],o=arguments[1],e=r,null===e||"undefined"==typeof e)return null;if(i=fm.webrtc.extensible.convertKeyToRecord(r),s=null,t=new fm.holder(s),n=fm.webrtc.extensible.validateRecord(i,t),s=t.getValue(),o&&!n)throw new Error(fm.stringExtensions.format("Invalid record. {0}",s));return[i]}return 1===arguments.length?(r=arguments[0],fm.webrtc.extensible.sharedSetKey(r,!0)):void 0},s.sharedSetKeys=function(){var e,t,n,s,r,i,o,a,u,c,l,h;if(1===arguments.length)return o=arguments[0],fm.webrtc.extensible.sharedSetKeys(o,!0);if(2===arguments.length){if(o=arguments[0],h=arguments[1],e=o,null===e||"undefined"==typeof e)return null;for(u=[],t=o,i=0,a=t.length;a>i;i++){if(l=t[i],c=fm.webrtc.extensible.convertKeyToRecord(l),r=null,n=new fm.holder(r),s=fm.webrtc.extensible.validateRecord(c,n),r=n.getValue(),h&&!s)throw new Error(fm.stringExtensions.format("Invalid record. {0}",r));fm.arrayExtensions.add(u,c)}return fm.arrayExtensions.toArray(u)}},s.sharedSetRecord=function(){var e,t,n,s,r;if(2===arguments.length){if(s=arguments[0],r=arguments[1],n=null,e=new fm.holder(n),t=fm.webrtc.extensible.validateRecord(s,e),n=e.getValue(),r&&!t)throw new Error(fm.stringExtensions.format("Invalid record. {0}",n));return[s]}return 1===arguments.length?(s=arguments[0],fm.webrtc.extensible.sharedSetRecord(s,!0)):void 0},s.sharedSetRecords=function(){var e,t,n,s,r,i,o,a,u,c;if(2===arguments.length){if(u=arguments[0],c=arguments[1],e=u,null!==e&&"undefined"!=typeof e)for(t=u,i=0,o=t.length;o>i;i++)if(a=t[i],r=null,n=new fm.holder(r),s=fm.webrtc.extensible.validateRecord(a,n),r=n.getValue(),c&&!s)throw new Error(fm.stringExtensions.format("Invalid record. {0}",r));return u}return 1===arguments.length?(u=arguments[0],fm.webrtc.extensible.sharedSetRecords(u,!0)):void 0},s.validateChannel=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=t,null===e||"undefined"==typeof e?(n.setValue("Channel is null."),!1):fm.stringExtensions.startsWith(t,"/",fm.stringComparison.Ordinal)?fm.stringExtensions.indexOf(t,"*",fm.stringComparison.Ordinal)>=0?(n.setValue("Channel may not contain asterisks (*)."),!1):fm.webrtc.metaChannels.isReservedChannel(t)?(n.setValue("Channel is reserved."),!1):(n.setValue(null),!0):(n.setValue("Channel must start with a forward-slash (/)."),!1)},s.validateRecord=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=n,null===e||"undefined"==typeof e?(t.setValue("Record is null."),!1):fm.stringExtensions.isNullOrEmpty(n.getKey())?(t.setValue("Key is null or empty."),!1):(t.setValue(null),!0)},s.prototype.copyExtensions=function(){var e,t,n,s,r,i;for(t=arguments[0],e=t.getExtensionNames(),r=[],n=0,s=e.length;s>n;n++)i=e[n],r.push(this.setExtensionValueJson(i,t.getExtensionValueJson(i),!1));return r},s.prototype.getExtensionCount=function(){return this.getExtensions().getCount()},s.prototype.getExtensionNames=function(){return this.getExtensions().getNames()},s.prototype.getExtensions=function(){var e;return e=this.__extensions,(null===e||"undefined"==typeof e)&&(this.__extensions=new fm.webrtc.extensions),this.__extensions},s.prototype.getExtensionValueJson=function(){var e;return e=arguments[0],this.getExtensions().getValueJson(e)},s.prototype.getMetaJson=function(){return this.getExtensionValueJson("fm.meta")},s.prototype.setExtensions=function(){var e,t;return t=arguments[0],e=t,null===e||"undefined"==typeof e?this.__extensions=new fm.webrtc.extensions:this.__extensions=t},s.prototype.setExtensionValueJson=function(){var e,t,n;return 3===arguments.length?(e=arguments[0],n=arguments[1],t=arguments[2],this.getExtensions().setValueJson(e,n,t),void this.setIsDirty(!0)):void(2===arguments.length&&(e=arguments[0],n=arguments[1],this.getExtensions().setValueJson(e,n),this.setIsDirty(!0)))},s.prototype.setMetaJson=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.meta",e)},s.prototype.getExtensionValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getExtensionValueJson.apply(this,arguments))},s.prototype.getMeta=function(){return fm.json.deserialize(this.getMetaJson.apply(this,arguments))},s.prototype.setExtensionValue=function(){var e,t,n;return 3===arguments.length?(t=arguments[0],n=arguments[1],e=arguments[2],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),void this.setExtensionValueJson.apply(this,arguments)):void(2===arguments.length&&(t=arguments[0],e=arguments[1],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setExtensionValueJson.apply(this,arguments)))},s.prototype.setMeta=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setMetaJson.apply(this,arguments)},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseInputArgs=function(n){function s(){return this.setSynchronous=e(this.setSynchronous,this),this.setRequestUrl=e(this.setRequestUrl,this),this.setRequestTimeout=e(this.setRequestTimeout,this),this.setIsRetry=e(this.setIsRetry,this),this.getSynchronous=e(this.getSynchronous,this),this.getRequestUrl=e(this.getRequestUrl,this),this.getRequestTimeout=e(this.getRequestTimeout,this),this.getIsRetry=e(this.getIsRetry,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isRetry=!1,s.prototype._requestTimeout=null,s.prototype._requestUrl=null,s.prototype._synchronous=null,s.prototype.getIsRetry=function(){return this._isRetry},s.prototype.getRequestTimeout=function(){return this._requestTimeout},s.prototype.getRequestUrl=function(){return this._requestUrl},s.prototype.getSynchronous=function(){return this._synchronous},s.prototype.setIsRetry=function(){var e;return e=arguments[0],this._isRetry=e},s.prototype.setRequestTimeout=function(){var e;return e=arguments[0],this._requestTimeout=e},s.prototype.setRequestUrl=function(){var e;return e=arguments[0],this._requestUrl=e},s.prototype.setSynchronous=function(){var e;return e=arguments[0],this._synchronous=e},s}(fm.webrtc.extensible);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseOutputArgs=function(n){function s(){return this.setTimestamp=e(this.setTimestamp,this),this.setClient=e(this.setClient,this),this.getTimestamp=e(this.getTimestamp,this),this.getClient=e(this.getClient,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__timestamp=null,s.prototype._client=null,s.prototype.getClient=function(){return this._client},s.prototype.getTimestamp=function(){return this.__timestamp},s.prototype.setClient=function(){var e;return e=arguments[0],this._client=e},s.prototype.setTimestamp=function(){var e;return e=arguments[0],null!==e?this.__timestamp=e:this.__timestamp=null},s}(fm.webrtc.extensible);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.basePublisherEventArgs=function(n){function s(){return this.setPublisher=e(this.setPublisher,this),this.getPublisher=e(this.getPublisher,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._publisher=null,s.prototype.getPublisher=function(){return this._publisher},s.prototype.setPublisher=function(){var e;return e=arguments[0],this._publisher=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.basePublisherResponseEventArgs=function(n){function s(){return this.setException=e(this.setException,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype.getException=function(){return this._exception},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s}(fm.webrtc.basePublisherEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.basePublisherResponseEventArgsGeneric=function(n){function s(){return this.setResponses=e(this.setResponses,this),this.setRequests=e(this.setRequests,this),this.getResponses=e(this.getResponses,this),this.getRequests=e(this.getRequests,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._requests=null,s.prototype._responses=null,s.prototype.getRequests=function(){return this._requests},s.prototype.getResponses=function(){return this._responses},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s}(fm.webrtc.basePublisherResponseEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.basePublisherRequestEventArgs=function(n){function s(){return this.setCancel=e(this.setCancel,this),this.getCancel=e(this.getCancel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._cancel=!1,s.prototype.getCancel=function(){return this._cancel},s.prototype.setCancel=function(){var e;return e=arguments[0],this._cancel=e},s}(fm.webrtc.basePublisherEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.basePublisherRequestEventArgsGeneric=function(n){function s(){return this.setRequests=e(this.setRequests,this),this.getRequests=e(this.getRequests,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._requests=null,s.prototype.getRequests=function(){return this._requests},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s}(fm.webrtc.basePublisherRequestEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseClientEventArgs=function(n){function s(){return this.setClient=e(this.setClient,this),this.getClient=e(this.getClient,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._client=null,s.prototype.getClient=function(){return this._client},s.prototype.setClient=function(){var e;return e=arguments[0],this._client=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseClientEndEventArgs=function(n){function s(){return this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._response=null,s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){return this._response},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this._response=e},s}(fm.webrtc.baseClientEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseClientEndEventArgsGeneric=function(n){function s(){return this.setMethodArgs=e(this.setMethodArgs,this),this.getMethodArgs=e(this.getMethodArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._methodArgs=null,s.prototype.getMethodArgs=function(){return this._methodArgs},s.prototype.setMethodArgs=function(){var e;return e=arguments[0],this._methodArgs=e},s}(fm.webrtc.baseClientEndEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseClientResponseEventArgs=function(n){function s(){return this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._response=null,s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){return this._response},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this._response=e},s}(fm.webrtc.baseClientEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseClientResponseEventArgsGeneric=function(n){function s(){return this.setMethodArgs=e(this.setMethodArgs,this),this.getMethodArgs=e(this.getMethodArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._methodArgs=null,s.prototype.getMethodArgs=function(){return this._methodArgs},s.prototype.setMethodArgs=function(){var e;return e=arguments[0],this._methodArgs=e},s}(fm.webrtc.baseClientResponseEventArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientNotifyResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseServerArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseOutputArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseSuccessArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseOutputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseReceiveArgs=function(n){function s(){this.getData=e(this.getData,this),this.setReconnectAfter=e(this.setReconnectAfter,this),this.getTag=e(this.getTag,this),this.getReconnectAfter=e(this.getReconnectAfter,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getConnectionType=e(this.getConnectionType,this);var t,n,r,i;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(r=arguments[0],n=arguments[1],t=arguments[2],i=arguments[3],s.__super__.constructor.call(this),this.__dataJson=r,this.__dataBytes=n,this.__connectionType=t,void this.setReconnectAfter(i))}return t(s,n),s.prototype.__connectionType=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._reconnectAfter=0,s.prototype.getConnectionType=function(){return this.__connectionType},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getReconnectAfter=function(){return this._reconnectAfter},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setReconnectAfter=function(){var e;return e=arguments[0],this._reconnectAfter=e},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.webrtc.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseClientRequestEventArgs=function(n){function s(){return this.setCancel=e(this.setCancel,this),this.getCancel=e(this.getCancel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._cancel=!1,s.prototype.getCancel=function(){return this._cancel},s.prototype.setCancel=function(){var e;return e=arguments[0],this._cancel=e},s}(fm.webrtc.baseClientEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseClientRequestEventArgsGeneric=function(n){function s(){return this.setMethodArgs=e(this.setMethodArgs,this),this.getMethodArgs=e(this.getMethodArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._methodArgs=null,s.prototype.getMethodArgs=function(){return this._methodArgs},s.prototype.setMethodArgs=function(){var e;return e=arguments[0],this._methodArgs=e},s}(fm.webrtc.baseClientRequestEventArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientNotifyRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientSubscribeEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientBindEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientConnectEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientDisconnectEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientNotifyEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientPublishEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientServiceEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientUnbindEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientUnsubscribeEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this);
}return t(n,e),n}(fm.webrtc.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.stateRestoredArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.notifyReceiveArgs=function(n){function s(){this.getWasSentByMe=e(this.getWasSentByMe,this),this.getNotifyingClient=e(this.getNotifyingClient,this);var t,n,r,i;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(r=arguments[0],n=arguments[1],t=arguments[2],i=arguments[3],void s.__super__.constructor.call(this,r,n,t,i))}return t(s,n),s.prototype.getNotifyingClient=function(){return fm.webrtc.notifyingClient.fromJson(this.getExtensionValueJson("fm.notifying"))},s.prototype.getWasSentByMe=function(){var e,t,n;return e=this.getNotifyingClient(),t=this.getClient(),n=this.getNotifyingClient().getClientId(),null!==e&&"undefined"!=typeof e&&null!==t&&"undefined"!=typeof t&&null!==this.getNotifyingClient().getClientId()&&(null===n?n===this.getClient().getClientId():n.equals(this.getClient().getClientId()))},s}(fm.webrtc.baseReceiveArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.serverSubscribeArgs=function(n){function s(){return this.getTag=e(this.getTag,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.getChannel=function(){return fm.webrtc.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.webrtc.extensible.sharedGetChannels(this.__channels)},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.webrtc.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.serverUnsubscribeArgs=function(n){function s(){return this.getTag=e(this.getTag,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.getChannel=function(){return fm.webrtc.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.webrtc.extensible.sharedGetChannels(this.__channels)},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.webrtc.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.serverUnbindArgs=function(n){function s(){return this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype.getKey=function(){return fm.webrtc.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.webrtc.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.webrtc.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.webrtc.extensible.sharedGetRecords(this.__records)},s}(fm.webrtc.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.serverBindArgs=function(n){function s(){return this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype.getKey=function(){return fm.webrtc.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.webrtc.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.webrtc.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.webrtc.extensible.sharedGetRecords(this.__records)},s}(fm.webrtc.baseServerArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.messageRequestCreatedArgs=function(n){function s(){return this.setSender=e(this.setSender,this),this.setRequests=e(this.setRequests,this),this.getSender=e(this.getSender,this),this.getRequests=e(this.getRequests,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._requests=null,s.prototype._sender=null,s.prototype.getRequests=function(){return this._requests},s.prototype.getSender=function(){return this._sender},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s.prototype.setSender=function(){var e;return e=arguments[0],this._sender=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.messageResponseReceivedArgs=function(n){function s(){return this.setSender=e(this.setSender,this),this.setResponses=e(this.setResponses,this),this.getSender=e(this.getSender,this),this.getResponses=e(this.getResponses,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._responses=null,s.prototype._sender=null,s.prototype.getResponses=function(){return this._responses},s.prototype.getSender=function(){return this._sender},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s.prototype.setSender=function(){var e;return e=arguments[0],this._sender=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.messageRequestArgs=function(n){function s(){this.setUrl=e(this.setUrl,this),this.setTimeout=e(this.setTimeout,this),this.setSender=e(this.setSender,this),this.setOnResponseReceived=e(this.setOnResponseReceived,this),this.setOnRequestCreated=e(this.setOnRequestCreated,this),this.setOnHttpResponseReceived=e(this.setOnHttpResponseReceived,this),this.setOnHttpRequestCreated=e(this.setOnHttpRequestCreated,this),this.setMessages=e(this.setMessages,this),this.setHeaders=e(this.setHeaders,this),this.getUrl=e(this.getUrl,this),this.getTimeout=e(this.getTimeout,this),this.getSender=e(this.getSender,this),this.getOnResponseReceived=e(this.getOnResponseReceived,this),this.getOnRequestCreated=e(this.getOnRequestCreated,this),this.getOnHttpResponseReceived=e(this.getOnHttpResponseReceived,this),this.getOnHttpRequestCreated=e(this.getOnHttpRequestCreated,this),this.getMessages=e(this.getMessages,this),this.getIsBinary=e(this.getIsBinary,this),this.getHeaders=e(this.getHeaders,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setTimeout(15e3),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(s.__super__.constructor.call(this),void this.setTimeout(15e3)):1===arguments.length?(t=arguments[0],s.call(this),void this.setHeaders(t)):void 0}return t(s,n),s.prototype._headers=null,s.prototype._messages=null,s.prototype._onHttpRequestCreated=null,s.prototype._onHttpResponseReceived=null,s.prototype._onRequestCreated=null,s.prototype._onResponseReceived=null,s.prototype._sender=null,s.prototype._timeout=0,s.prototype._url=null,s.prototype.getHeaders=function(){return this._headers},s.prototype.getIsBinary=function(){var e,t,n,s;for(e=this.getMessages(),t=0,n=e.length;n>t;t++)if(s=e[t],s.getDisableBinary()===!0||!s.getIsBinary())return!1;return!0},s.prototype.getMessages=function(){return this._messages},s.prototype.getOnHttpRequestCreated=function(){return this._onHttpRequestCreated},s.prototype.getOnHttpResponseReceived=function(){return this._onHttpResponseReceived},s.prototype.getOnRequestCreated=function(){return this._onRequestCreated},s.prototype.getOnResponseReceived=function(){return this._onResponseReceived},s.prototype.getSender=function(){return this._sender},s.prototype.getTimeout=function(){return this._timeout},s.prototype.getUrl=function(){return this._url},s.prototype.setHeaders=function(){var e;return e=arguments[0],this._headers=e},s.prototype.setMessages=function(){var e;return e=arguments[0],this._messages=e},s.prototype.setOnHttpRequestCreated=function(){var e;return e=arguments[0],this._onHttpRequestCreated=e},s.prototype.setOnHttpResponseReceived=function(){var e;return e=arguments[0],this._onHttpResponseReceived=e},s.prototype.setOnRequestCreated=function(){var e;return e=arguments[0],this._onRequestCreated=e},s.prototype.setOnResponseReceived=function(){var e;return e=arguments[0],this._onResponseReceived=e},s.prototype.setSender=function(){var e;return e=arguments[0],this._sender=e},s.prototype.setTimeout=function(){var e;return e=arguments[0],this._timeout=e},s.prototype.setUrl=function(){var e;return e=arguments[0],this._url=e},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.messageResponseArgs=function(n){function s(){this.setRequestArgs=e(this.setRequestArgs,this),this.setMessages=e(this.setMessages,this),this.setHeaders=e(this.setHeaders,this),this.setException=e(this.setException,this),this.getRequestArgs=e(this.getRequestArgs,this),this.getMessages=e(this.getMessages,this),this.getHeaders=e(this.getHeaders,this),this.getException=e(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],s.__super__.constructor.call(this),void this.setRequestArgs(t))}return t(s,n),s.prototype._exception=null,s.prototype._headers=null,s.prototype._messages=null,s.prototype._requestArgs=null,s.prototype.getException=function(){return this._exception},s.prototype.getHeaders=function(){return this._headers},s.prototype.getMessages=function(){return this._messages},s.prototype.getRequestArgs=function(){return this._requestArgs},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setHeaders=function(){var e;return e=arguments[0],this._headers=e},s.prototype.setMessages=function(){var e;return e=arguments[0],this._messages=e},s.prototype.setRequestArgs=function(){var e;return e=arguments[0],this._requestArgs=e},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.notifyArgs=function(n){function s(){this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.setClientId=e(this.setClientId,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getClientId=e(this.getClientId,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):3===arguments.length?(t=arguments[0],n=arguments[1],r=arguments[2],s.__super__.constructor.call(this),this.setClientId(t),this.setDataJson(n),void this.setTag(r)):2===arguments.length?(t=arguments[0],n=arguments[1],void s.call(this,t,n,null)):void 0}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(e),!1)},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e},s.prototype.setDataJson=function(){var e,t;if(t=arguments[0],e=t,null!==e&&"undefined"!=typeof e&&!fm.serializer.isValidJson(t))throw new Error("The value is not valid JSON.");return this.__dataJson=t,this.__dataBytes=null},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1)},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.webrtc.baseInputArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseCompleteArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseOutputArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.notifyCompleteArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseFailureArgs=function(n){function s(){return this.setRetry=e(this.setRetry,this),this.setException=e(this.setException,this),this.getRetry=e(this.getRetry,this),this.getException=e(this.getException,this),this.getErrorMessage=e(this.getErrorMessage,this),this.getErrorCode=e(this.getErrorCode,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._retry=!1,s.getErrorCode=function(){var e,t,n,s,r,i,o,a;r=arguments[0],i=-1;try{if(e=r,null===e||"undefined"==typeof e||fm.stringExtensions.isNullOrEmpty(r.message))return i;if(fm.stringExtensions.indexOf(r.message,"::")<=-1)return i;a=fm.splitter.split(r.message,"::")[0],t=new fm.holder(i),n=fm.parseAssistant.tryParseIntegerValue(a,t),i=t.getValue(),n||(i=-1)}catch(s){o=s}finally{}return i},s.getErrorMessage=function(){var e,t,n,s,r;n=arguments[0],s=null;try{if(e=n,null===e||"undefined"==typeof e||fm.stringExtensions.isNullOrEmpty(n.message))return s;if(fm.stringExtensions.indexOf(n.message,"::")>-1)return fm.splitter.split(n.message,"::")[1];s=n.message}catch(t){r=t}finally{}return s},s.prototype.getErrorCode=function(){return fm.webrtc.baseFailureArgs.getErrorCode(this.getException())},s.prototype.getErrorMessage=function(){return fm.webrtc.baseFailureArgs.getErrorMessage(this.getException())},s.prototype.getException=function(){return this._exception},s.prototype.getRetry=function(){return this._retry},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setRetry=function(){var e;return e=arguments[0],this._retry=e},s}(fm.webrtc.baseOutputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.notifyFailureArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getClientId=e(this.getClientId,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.webrtc.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.notifySuccessArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getClientId=e(this.getClientId,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.webrtc.baseSuccessArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publisherNotifyResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.basePublisherResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publisherNotifyRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.basePublisherRequestEventArgsGeneric);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.unhandledExceptionArgs=function(n){function s(){return this.setHandled=e(this.setHandled,this),this.getHandled=e(this.getHandled,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__exception=null,s.prototype._handled=!1,s.prototype.getException=function(){return this.__exception},s.prototype.getHandled=function(){return this._handled},s.prototype.setHandled=function(){var e;return e=arguments[0],this._handled=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientResponseArgs=function(n){function s(){return this.setResponses=e(this.setResponses,this),this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponses=e(this.getResponses,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this),this.getErrorMessage=e(this.getErrorMessage,this),this.getErrorCode=e(this.getErrorCode,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._responses=null,s.prototype.getErrorCode=function(){return fm.webrtc.baseFailureArgs.getErrorCode(this.getException())},s.prototype.getErrorMessage=function(){return fm.webrtc.baseFailureArgs.getErrorMessage(this.getException())},s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){var e;return e=this.getResponses(),null===e||"undefined"==typeof e||0===this.getResponses().length?null:this.getResponses()[0]},s.prototype.getResponses=function(){return this._responses},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this.setResponses([e])},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.connectArgs=function(n){function s(){return this.setRetryMode=e(this.setRetryMode,this),this.setRetryBackoff=e(this.setRetryBackoff,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnStreamFailure=e(this.setOnStreamFailure,this),this.setOnStateRestored=e(this.setOnStateRestored,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setLastSessionId=e(this.setLastSessionId,this),this.setLastClientId=e(this.setLastClientId,this),this.setIsReconnect=e(this.setIsReconnect,this),this.getRetryMode=e(this.getRetryMode,this),this.getRetryBackoff=e(this.getRetryBackoff,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnStreamFailure=e(this.getOnStreamFailure,this),this.getOnStateRestored=e(this.getOnStateRestored,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getLastSessionId=e(this.getLastSessionId,this),this.getLastClientId=e(this.getLastClientId,this),this.getIsReconnect=e(this.getIsReconnect,this),this.defaultRetryBackoff=e(this.defaultRetryBackoff,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._defaultRetryBackoffTimeout=500,this.setRetryMode(fm.webrtc.connectRetryMode.Intelligent),this.setRetryBackoff(this.defaultRetryBackoff),void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),this._defaultRetryBackoffTimeout=500,this.setRetryMode(fm.webrtc.connectRetryMode.Intelligent),void this.setRetryBackoff(this.defaultRetryBackoff))}return t(s,n),s.prototype._defaultRetryBackoffTimeout=0,s.prototype._isReconnect=!1,s.prototype._lastClientId=null,s.prototype._lastSessionId=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onStateRestored=null,s.prototype._onStreamFailure=null,s.prototype._onSuccess=null,s.prototype._retryBackoff=null,s.prototype._retryMode=null,s.prototype.defaultRetryBackoff=function(){var e;return e=arguments[0],0===e.getIndex()?this._defaultRetryBackoffTimeout:2*e.getLastTimeout()},s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.getLastClientId=function(){return this._lastClientId},s.prototype.getLastSessionId=function(){return this._lastSessionId},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnStateRestored=function(){return this._onStateRestored},s.prototype.getOnStreamFailure=function(){return this._onStreamFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getRetryBackoff=function(){return this._retryBackoff},s.prototype.getRetryMode=function(){return this._retryMode},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s.prototype.setLastClientId=function(){var e;return e=arguments[0],this._lastClientId=e},s.prototype.setLastSessionId=function(){var e;return e=arguments[0],this._lastSessionId=e},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnStateRestored=function(){var e;return e=arguments[0],this._onStateRestored=e},s.prototype.setOnStreamFailure=function(){var e;return e=arguments[0],this._onStreamFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setRetryBackoff=function(){var e;return e=arguments[0],this._retryBackoff=e},s.prototype.setRetryMode=function(){var e;return e=arguments[0],this._retryMode=e},s}(fm.webrtc.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.bindArgs=function(n){function s(){this.setRecords=e(this.setRecords,this),this.setRecord=e(this.setRecord,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setIsRebind=e(this.setIsRebind,this),this.setAutoRebind=e(this.setAutoRebind,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsRebind=e(this.getIsRebind,this),this.getAutoRebind=e(this.getAutoRebind,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),
void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],s.__super__.constructor.call(this),void this.setRecords(t))}return t(s,n),s.prototype.__records=null,s.prototype._autoRebind=null,s.prototype._isRebind=!1,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getAutoRebind=function(){return this._autoRebind},s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getRecord=function(){return fm.webrtc.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.webrtc.extensible.sharedGetRecords(this.__records)},s.prototype.setAutoRebind=function(){var e;return e=arguments[0],this._autoRebind=e},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setRecord=function(){var e;return e=arguments[0],this.__records=fm.webrtc.extensible.sharedSetRecord(e)},s.prototype.setRecords=function(){var e;return e=arguments[0],this.__records=fm.webrtc.extensible.sharedSetRecords(e)},s}(fm.webrtc.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.serviceArgs=function(n){function s(){this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):3===arguments.length?(t=arguments[0],n=arguments[1],r=arguments[2],s.__super__.constructor.call(this),this.setChannel(t),this.setDataJson(n),void this.setTag(r)):2===arguments.length?(t=arguments[0],n=arguments[1],void s.call(this,t,n,null)):void 0}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setChannel=function(){var e,t,n,s;if(s=arguments[0],n=null,e=new fm.holder(n),t=fm.webrtc.extensible.validateChannel(s,e),n=e.getValue(),!t)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",n));return this.__channel=s},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e},s.prototype.setDataJson=function(){var e,t;if(t=arguments[0],e=t,null!==e&&"undefined"!=typeof e&&!fm.serializer.isValidJson(t))throw new Error("The value is not valid JSON.");return this.__dataJson=t,this.__dataBytes=null},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1)},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.webrtc.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.unbindArgs=function(n){function s(){this.setRecords=e(this.setRecords,this),this.setRecord=e(this.setRecord,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setKeys=e(this.setKeys,this),this.setKey=e(this.setKey,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],s.__super__.constructor.call(this),void this.setRecords(t))}return t(s,n),s.prototype.__records=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getKey=function(){return fm.webrtc.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.webrtc.extensible.sharedGetKeys(this.__records)},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getRecord=function(){return fm.webrtc.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.webrtc.extensible.sharedGetRecords(this.__records)},s.prototype.setKey=function(){var e;return e=arguments[0],this.__records=fm.webrtc.extensible.sharedSetKey(e)},s.prototype.setKeys=function(){var e;return e=arguments[0],this.__records=fm.webrtc.extensible.sharedSetKeys(e)},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setRecord=function(){var e;return e=arguments[0],this.__records=fm.webrtc.extensible.sharedSetRecord(e)},s.prototype.setRecords=function(){var e;return e=arguments[0],this.__records=fm.webrtc.extensible.sharedSetRecords(e)},s}(fm.webrtc.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.disconnectArgs=function(n){function s(){return this.setOnComplete=e(this.setOnComplete,this),this.getOnComplete=e(this.getOnComplete,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._onComplete=null,s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s}(fm.webrtc.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publishArgs=function(n){function s(){this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):3===arguments.length?(t=arguments[0],n=arguments[1],r=arguments[2],s.__super__.constructor.call(this),this.setChannel(t),this.setDataJson(n),void this.setTag(r)):2===arguments.length?(t=arguments[0],n=arguments[1],void s.call(this,t,n,null)):void 0}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setChannel=function(){var e,t,n,s;if(s=arguments[0],n=null,e=new fm.holder(n),t=fm.webrtc.extensible.validateChannel(s,e),n=e.getValue(),!t)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",n));return this.__channel=s},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e},s.prototype.setDataJson=function(){var e,t;if(t=arguments[0],e=t,null!==e&&"undefined"!=typeof e&&!fm.serializer.isValidJson(t))throw new Error("The value is not valid JSON.");return this.__dataJson=t,this.__dataBytes=null},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1)},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.webrtc.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.subscribeArgs=function(n){function s(){this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnReceive=e(this.setOnReceive,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setIsResubscribe=e(this.setIsResubscribe,this),this.setChannels=e(this.setChannels,this),this.setChannel=e(this.setChannel,this),this.setAutoResubscribe=e(this.setAutoResubscribe,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnReceive=e(this.getOnReceive,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsResubscribe=e(this.getIsResubscribe,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),this.getAutoResubscribe=e(this.getAutoResubscribe,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(t=arguments[0],n=arguments[1],s.__super__.constructor.call(this),this.setChannels(t),void this.setTag(n)):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),void this.setChannels(t)):void 0}return t(s,n),s.prototype.__channels=null,s.prototype._autoResubscribe=null,s.prototype._isResubscribe=!1,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onReceive=null,s.prototype._onSuccess=null,s.prototype.getAutoResubscribe=function(){return this._autoResubscribe},s.prototype.getChannel=function(){return fm.webrtc.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.webrtc.extensible.sharedGetChannels(this.__channels)},s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnReceive=function(){return this._onReceive},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setAutoResubscribe=function(){var e;return e=arguments[0],this._autoResubscribe=e},s.prototype.setChannel=function(){var e;return e=arguments[0],this.__channels=fm.webrtc.extensible.sharedSetChannel(e)},s.prototype.setChannels=function(){var e;return e=arguments[0],this.__channels=fm.webrtc.extensible.sharedSetChannels(e)},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnReceive=function(){var e;return e=arguments[0],this._onReceive=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(null!=e?e:fm.stringExtensions.empty),!1)},s}(fm.webrtc.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.unsubscribeArgs=function(n){function s(){this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setChannels=e(this.setChannels,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(t=arguments[0],n=arguments[1],s.__super__.constructor.call(this),this.setChannels(t),void this.setTag(n)):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),void this.setChannels(t)):void 0}return t(s,n),s.prototype.__channels=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getChannel=function(){return fm.webrtc.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.webrtc.extensible.sharedGetChannels(this.__channels)},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setChannel=function(){var e;return e=arguments[0],this.__channels=fm.webrtc.extensible.sharedSetChannel(e)},s.prototype.setChannels=function(){var e;return e=arguments[0],this.__channels=fm.webrtc.extensible.sharedSetChannels(e)},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(null!=e?e:fm.stringExtensions.empty),!1)},s}(fm.webrtc.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.connectCompleteArgs=function(n){function s(){return this.setIsReconnect=e(this.setIsReconnect,this),this.getIsReconnect=e(this.getIsReconnect,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isReconnect=!1,s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s}(fm.webrtc.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.bindCompleteArgs=function(n){function s(){return this.setIsRebind=e(this.setIsRebind,this),this.getIsRebind=e(this.getIsRebind,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isRebind=!1,s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s}(fm.webrtc.baseCompleteArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.serviceCompleteArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.unbindCompleteArgs=function(n){function s(){return this.getForced=e(this.getForced,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__forced=!1,s.prototype.getForced=function(){return this.__forced},s}(fm.webrtc.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.disconnectCompleteArgs=function(n){function s(){return this.setException=e(this.setException,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype.getException=function(){return this._exception},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s}(fm.webrtc.baseCompleteArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publishCompleteArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.subscribeCompleteArgs=function(n){function s(){return this.setIsResubscribe=e(this.setIsResubscribe,this),this.getIsResubscribe=e(this.getIsResubscribe,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isResubscribe=!1,s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s}(fm.webrtc.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.unsubscribeCompleteArgs=function(n){function s(){return this.getForced=e(this.getForced,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__forced=!1,s.prototype.getForced=function(){return this.__forced},s}(fm.webrtc.baseCompleteArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientConnectResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientDisconnectResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientPublishResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientSubscribeResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientUnsubscribeResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientBindResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientUnbindResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientServiceResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientConnectRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientDisconnectRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientPublishRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientSubscribeRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientUnsubscribeRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientBindRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientUnbindRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientServiceRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this);
}return t(n,e),n}(fm.webrtc.baseClientRequestEventArgsGeneric);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.connectFailureArgs=function(n){function s(){return this.setIsReconnect=e(this.setIsReconnect,this),this.getIsReconnect=e(this.getIsReconnect,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isReconnect=!1,s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s}(fm.webrtc.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.bindFailureArgs=function(n){function s(){return this.setIsRebind=e(this.setIsRebind,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getIsRebind=e(this.getIsRebind,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype._isRebind=!1,s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.getKey=function(){return fm.webrtc.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.webrtc.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.webrtc.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.webrtc.extensible.sharedGetRecords(this.__records)},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s}(fm.webrtc.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.serviceFailureArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.webrtc.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.unbindFailureArgs=function(n){function s(){return this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype.getKey=function(){return fm.webrtc.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.webrtc.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.webrtc.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.webrtc.extensible.sharedGetRecords(this.__records)},s}(fm.webrtc.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.streamFailureArgs=function(n){function s(){return this.setConnectArgs=e(this.setConnectArgs,this),this.getConnectArgs=e(this.getConnectArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._connectArgs=null,s.prototype.getConnectArgs=function(){return this._connectArgs},s.prototype.setConnectArgs=function(){var e;return e=arguments[0],this._connectArgs=e},s}(fm.webrtc.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publishFailureArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.webrtc.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.subscribeFailureArgs=function(n){function s(){return this.setIsResubscribe=e(this.setIsResubscribe,this),this.getTag=e(this.getTag,this),this.getIsResubscribe=e(this.getIsResubscribe,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype._isResubscribe=!1,s.prototype.getChannel=function(){return fm.webrtc.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.webrtc.extensible.sharedGetChannels(this.__channels)},s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s}(fm.webrtc.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.unsubscribeFailureArgs=function(n){function s(){return this.getTag=e(this.getTag,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.getChannel=function(){return fm.webrtc.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.webrtc.extensible.sharedGetChannels(this.__channels)},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.webrtc.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.connectSuccessArgs=function(n){function s(){return this.setIsReconnect=e(this.setIsReconnect,this),this.setConnectionType=e(this.setConnectionType,this),this.getIsReconnect=e(this.getIsReconnect,this),this.getConnectionType=e(this.getConnectionType,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._connectionType=null,s.prototype._isReconnect=!1,s.prototype.getConnectionType=function(){return this._connectionType},s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.setConnectionType=function(){var e;return e=arguments[0],this._connectionType=e},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s}(fm.webrtc.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.bindSuccessArgs=function(n){function s(){return this.setIsRebind=e(this.setIsRebind,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getIsRebind=e(this.getIsRebind,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype._isRebind=!1,s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.getKey=function(){return fm.webrtc.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.webrtc.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.webrtc.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.webrtc.extensible.sharedGetRecords(this.__records)},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s}(fm.webrtc.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.serviceSuccessArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.webrtc.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.unbindSuccessArgs=function(n){function s(){return this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getForced=e(this.getForced,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__forced=!1,s.prototype.__records=null,s.prototype.getForced=function(){return this.__forced},s.prototype.getKey=function(){return fm.webrtc.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.webrtc.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.webrtc.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.webrtc.extensible.sharedGetRecords(this.__records)},s}(fm.webrtc.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publishSuccessArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.webrtc.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.subscribeReceiveArgs=function(n){function s(){this.getWasSentByMe=e(this.getWasSentByMe,this),this.getPublishingClient=e(this.getPublishingClient,this),this.getChannel=e(this.getChannel,this);var t,n,r,i,o;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],i=arguments[1],r=arguments[2],n=arguments[3],o=arguments[4],s.__super__.constructor.call(this,i,r,n,o),void(this.__channel=t))}return t(s,n),s.prototype.__channel=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getPublishingClient=function(){return fm.webrtc.publishingClient.fromJson(this.getExtensionValueJson("fm.publishing"))},s.prototype.getWasSentByMe=function(){var e,t,n;return e=this.getPublishingClient(),t=this.getClient(),n=this.getPublishingClient().getClientId(),null!==e&&"undefined"!=typeof e&&null!==t&&"undefined"!=typeof t&&null!==this.getPublishingClient().getClientId()&&(null===n?n===this.getClient().getClientId():n.equals(this.getClient().getClientId()))},s}(fm.webrtc.baseReceiveArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.subscribeSuccessArgs=function(n){function s(){return this.setIsResubscribe=e(this.setIsResubscribe,this),this.getTag=e(this.getTag,this),this.getIsResubscribe=e(this.getIsResubscribe,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype._isResubscribe=!1,s.prototype.getChannel=function(){return fm.webrtc.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.webrtc.extensible.sharedGetChannels(this.__channels)},s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s}(fm.webrtc.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.unsubscribeSuccessArgs=function(n){function s(){return this.getTag=e(this.getTag,this),this.getForced=e(this.getForced,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.__forced=!1,s.prototype.getChannel=function(){return fm.webrtc.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.webrtc.extensible.sharedGetChannels(this.__channels)},s.prototype.getForced=function(){return this.__forced},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.webrtc.baseSuccessArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publisherPublishResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.basePublisherResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publisherPublishRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.webrtc.basePublisherRequestEventArgsGeneric);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.deferredRetryConnectState=function(n){function s(){return this.setConnectArgs=e(this.setConnectArgs,this),this.setBackoffTimeout=e(this.setBackoffTimeout,this),this.getConnectArgs=e(this.getConnectArgs,this),this.getBackoffTimeout=e(this.getBackoffTimeout,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._backoffTimeout=0,s.prototype._connectArgs=null,s.prototype.getBackoffTimeout=function(){return this._backoffTimeout},s.prototype.getConnectArgs=function(){return this._connectArgs},s.prototype.setBackoffTimeout=function(){var e;return e=arguments[0],this._backoffTimeout=e},s.prototype.setConnectArgs=function(){var e;return e=arguments[0],this._connectArgs=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.deferredStreamState=function(n){function s(){return this.setReceivedMessages=e(this.setReceivedMessages,this),this.setConnectArgs=e(this.setConnectArgs,this),this.getReceivedMessages=e(this.getReceivedMessages,this),this.getConnectArgs=e(this.getConnectArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._connectArgs=null,s.prototype._receivedMessages=!1,s.prototype.getConnectArgs=function(){return this._connectArgs},s.prototype.getReceivedMessages=function(){return this._receivedMessages},s.prototype.setConnectArgs=function(){var e;return e=arguments[0],this._connectArgs=e},s.prototype.setReceivedMessages=function(){var e;return e=arguments[0],this._receivedMessages=e},s}(fm.object);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.messageTransferFactory=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n._createHttpMessageTransfer=null,n._createWebSocketMessageTransfer=null,n.defaultCreateHttpMessageTransfer=function(){return new fm.webrtc.httpMessageTransfer},n.defaultCreateWebSocketMessageTransfer=function(){var e;return e=arguments[0],new fm.webrtc.webSocketMessageTransfer(e)},n.getCreateHttpMessageTransfer=function(){return fm.webrtc.messageTransferFactory._createHttpMessageTransfer},n.getCreateWebSocketMessageTransfer=function(){return fm.webrtc.messageTransferFactory._createWebSocketMessageTransfer},n.getHttpMessageTransfer=function(){var e,t,s;return e=fm.webrtc.messageTransferFactory.getCreateHttpMessageTransfer(),(null===e||"undefined"==typeof e)&&n.setCreateHttpMessageTransfer(n.defaultCreateHttpMessageTransfer),s=fm.webrtc.messageTransferFactory.getCreateHttpMessageTransfer()(),t=s,(null===t||"undefined"==typeof t)&&(s=fm.webrtc.messageTransferFactory.defaultCreateHttpMessageTransfer()),s},n.getWebSocketMessageTransfer=function(){var e,t,s,r;return s=arguments[0],e=fm.webrtc.messageTransferFactory.getCreateWebSocketMessageTransfer(),(null===e||"undefined"==typeof e)&&n.setCreateWebSocketMessageTransfer(n.defaultCreateWebSocketMessageTransfer),r=fm.webrtc.messageTransferFactory.getCreateWebSocketMessageTransfer()(s),t=r,(null===t||"undefined"==typeof t)&&(r=fm.webrtc.messageTransferFactory.defaultCreateWebSocketMessageTransfer(s)),r},n.setCreateHttpMessageTransfer=function(){var e;return e=arguments[0],n._createHttpMessageTransfer=e},n.setCreateWebSocketMessageTransfer=function(){var e;return e=arguments[0],n._createWebSocketMessageTransfer=e},n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.messageTransfer=function(n){function s(){return this.shutdown=e(this.shutdown,this),this.sendMessagesAsync=e(this.sendMessagesAsync,this),this.sendMessages=e(this.sendMessages,this),this.sendAsyncCallback=e(this.sendAsyncCallback,this),this.sendAsync=e(this.sendAsync,this),this.send=e(this.send,this),this.messageRequestArgsToHttpRequestArgs=e(this.messageRequestArgsToHttpRequestArgs,this),this.httpResponseArgsToMessageResponseArgs=e(this.httpResponseArgsToMessageResponseArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._messageTransferCallbackKey="fm.webrtc.messageTransfer.callback",this._requestArgsKey="fm.webrtc.messageTransfer.requestArgs",void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),this._messageTransferCallbackKey="fm.webrtc.messageTransfer.callback",void(this._requestArgsKey="fm.webrtc.messageTransfer.requestArgs"))}return t(s,n),s.prototype._messageTransferCallbackKey=null,s.prototype._requestArgsKey=null,s.raiseRequestCreated=function(){var e,t,n;return n=arguments[0],e=n.getOnRequestCreated(),null!==e&&"undefined"!=typeof e?(t=new fm.webrtc.messageRequestCreatedArgs,t.setRequests(n.getMessages()),t.setSender(n.getSender()),n.getOnRequestCreated()(t)):void 0},s.raiseResponseReceived=function(){var e,t,n,s;return s=arguments[0],e=s.getException(),t=s.getRequestArgs().getOnResponseReceived(),null!==e&&"undefined"!=typeof e||null===t||"undefined"==typeof t?void 0:(n=new fm.webrtc.messageResponseReceivedArgs,n.setResponses(s.getMessages()),n.setSender(s.getRequestArgs().getSender()),s.getRequestArgs().getOnResponseReceived()(n))},s.prototype.httpResponseArgsToMessageResponseArgs=function(){var e,t,n,s,r;return r=arguments[0],s=r.getRequestArgs().getDynamicValue(this._requestArgsKey),n=new fm.webrtc.messageResponseArgs(s),n.setException(r.getException()),n.setHeaders(r.getHeaders()),t=n,fm.stringExtensions.isNullOrEmpty(r.getTextContent())?(e=r.getBinaryContent(),null!==e&&"undefined"!=typeof e&&t.setMessages(fm.webrtc.message.fromBinaryMultiple(r.getBinaryContent())),t):(t.setMessages(fm.webrtc.message.fromJsonMultiple(r.getTextContent())),t)},s.prototype.messageRequestArgsToHttpRequestArgs=function(){var e,t,n,s,r,i,o;for(i=arguments[0],n=new fm.httpRequestArgs,n.setMethod(fm.httpMethod.Post),n.setOnRequestCreated(i.getOnHttpRequestCreated()),n.setOnResponseReceived(i.getOnHttpResponseReceived()),n.setSender(i.getSender()),n.setTimeout(i.getTimeout()),n.setUrl(i.getUrl()),n.setDynamicProperties(i.getDynamicProperties()),t=n,t.setDynamicValue(this._requestArgsKey,i),e=i.getHeaders().getAllKeys(),s=0,r=e.length;r>s;s++)o=e[s],t.getHeaders().set(o,i.getHeaders().get(o));return t.setTextContent(fm.webrtc.message.toJsonMultiple(i.getMessages())),t.getHeaders().set("Content-Type","application/json"),i.getIsBinary()&&(t.setBinaryContent(fm.webrtc.message.toBinaryMultiple(i.getMessages())),t.getHeaders().set("Content-Type","application/octet-stream")),t},s.prototype.send=function(){var e,t,n,s,r;r=arguments[0],fm.webrtc.messageTransfer.raiseRequestCreated(r);try{e=this.sendMessages(r),fm.webrtc.messageTransfer.raiseResponseReceived(e)}catch(n){s=n,t=new fm.webrtc.messageResponseArgs(r),t.setException(s),e=t}finally{}return e},s.prototype.sendAsync=function(){var e,t,n,s,r;r=arguments[0],e=arguments[1],fm.webrtc.messageTransfer.raiseRequestCreated(r),r.setDynamicValue(this._messageTransferCallbackKey,e);try{return this.sendMessagesAsync(r,this.sendAsyncCallback)}catch(t){return n=t,s=new fm.webrtc.messageResponseArgs(r),s.setException(n),e(s)}finally{}},s.prototype.sendAsyncCallback=function(){var e,t;return t=arguments[0],e=t.getRequestArgs().getDynamicValue(this._messageTransferCallbackKey),t.getRequestArgs().unsetDynamicValue(this._messageTransferCallbackKey),fm.webrtc.messageTransfer.raiseResponseReceived(t),e(t)},s.prototype.sendMessages=function(){var e;return e=arguments[0]},s.prototype.sendMessagesAsync=function(){var e,t;return t=arguments[0],e=arguments[1]},s.prototype.shutdown=function(){},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.httpMessageTransfer=function(n){function s(){return this.shutdown=e(this.shutdown,this),this.sendMessagesAsyncCallback=e(this.sendMessagesAsyncCallback,this),this.sendMessagesAsync=e(this.sendMessagesAsync,this),this.sendMessages=e(this.sendMessages,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._callbackKey="fm.webrtc.httpMessageTransfer.callback",this._httpTransfer=fm.httpTransferFactory.getHttpTransfer(),void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),this._callbackKey="fm.webrtc.httpMessageTransfer.callback",void(this._httpTransfer=fm.httpTransferFactory.getHttpTransfer()))}return t(s,n),s.prototype._callbackKey=null,s.prototype._httpTransfer=null,s.prototype.sendMessages=function(){var e,t,n;return n=arguments[0],e=this.messageRequestArgsToHttpRequestArgs(n),t=this._httpTransfer.send(e),
this.httpResponseArgsToMessageResponseArgs(t)},s.prototype.sendMessagesAsync=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=this.messageRequestArgsToHttpRequestArgs(n),e.setDynamicValue(this._callbackKey,t),this._httpTransfer.sendAsync(e,this.sendMessagesAsyncCallback)},s.prototype.sendMessagesAsyncCallback=function(){var e,t;return t=arguments[0],e=t.getRequestArgs().getDynamicValue(this._callbackKey),t.getRequestArgs().unsetDynamicValue(this._callbackKey),e(this.httpResponseArgsToMessageResponseArgs(t))},s.prototype.shutdown=function(){var e,t;try{return this._httpTransfer.shutdown()}catch(e){t=e}finally{}},s}(fm.webrtc.messageTransfer);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.notifyingClient=function(n){function s(){this.getBoundRecordValue=e(this.getBoundRecordValue,this),this.toJson=e(this.toJson,this),this.setClientId=e(this.setClientId,this),this.setBoundRecords=e(this.setBoundRecords,this),this.getClientId=e(this.getClientId,this),this.getBoundRecordValueJson=e(this.getBoundRecordValueJson,this),this.getBoundRecords=e(this.getBoundRecords,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setBoundRecords({}),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(n=arguments[0],t=arguments[1],s.__super__.constructor.call(this),this.setClientId(n),void this.setBoundRecords(t)):0===arguments.length?(s.__super__.constructor.call(this),void this.setBoundRecords({})):void 0}return t(s,n),s.prototype._boundRecords=null,s.prototype._clientId=null,s.fromJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeNotifyingClient(e)},s.toJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeNotifyingClient(e)},s.prototype.getBoundRecords=function(){return this._boundRecords},s.prototype.getBoundRecordValueJson=function(){var e,t,n,s,r;return s=arguments[0],e=this.getBoundRecords(),null===e||"undefined"==typeof e?null:(r=null,t=new fm.holder(r),n=fm.hashExtensions.tryGetValue(this.getBoundRecords(),s,t),r=t.getValue(),n?r.getValueJson():null)},s.prototype.getClientId=function(){return this._clientId},s.prototype.setBoundRecords=function(){var e;return e=arguments[0],this._boundRecords=e},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.toJson=function(){return fm.webrtc.notifyingClient.toJson(this)},s.prototype.getBoundRecordValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments))},s}(fm.serializable);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseMessage=function(n){function s(){return this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setValidate=e(this.setValidate,this),this.setTimestamp=e(this.setTimestamp,this),this.setSuccessful=e(this.setSuccessful,this),this.setError=e(this.setError,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.getValidate=e(this.getValidate,this),this.getTimestamp=e(this.getTimestamp,this),this.getSuccessful=e(this.getSuccessful,this),this.getIsBinary=e(this.getIsBinary,this),this.getError=e(this.getError,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setValidate(!0),void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),void this.setValidate(!0))}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.__error=null,s.prototype.__successful=!1,s.prototype.__timestamp=null,s.prototype._validate=!1,s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getError=function(){return this.__error},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getSuccessful=function(){return this.__successful},s.prototype.getTimestamp=function(){return this.__timestamp},s.prototype.getValidate=function(){return this._validate},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e,this.setIsDirty(!0)},s.prototype.setDataJson=function(){var e,t;if(t=arguments[0],e=t,this.getValidate()&&null!==e&&"undefined"!=typeof e&&!fm.serializer.isValidJson(t))throw new Error("The value is not valid JSON.");return this.__dataJson=t,this.__dataBytes=null,this.setIsDirty(!0)},s.prototype.setError=function(){var e;return e=arguments[0],this.__error=e,this.setIsDirty(!0)},s.prototype.setSuccessful=function(){var e;return e=arguments[0],this.__successful=e,this.setIsDirty(!0)},s.prototype.setTimestamp=function(){var e;return e=arguments[0],this.__timestamp=e,this.setIsDirty(!0)},s.prototype.setValidate=function(){var e;return e=arguments[0],this._validate=e},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.webrtc.extensible);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.notification=function(n){function s(){this.toJson=e(this.toJson,this),this.setTag=e(this.setTag,this),this.setClientId=e(this.setClientId,this),this.getTag=e(this.getTag,this),this.getClientId=e(this.getClientId,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(t=arguments[0],n=arguments[1],void s.call(this,t,n,null)):3===arguments.length?(t=arguments[0],n=arguments[1],r=arguments[2],s.__super__.constructor.call(this),this.setClientId(t),this.setDataJson(n),void this.setTag(r)):0===arguments.length?void s.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),void this.setClientId(t)):void 0}return t(s,n),s.fromJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeNotification(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeNotificationArray(e)},s.fromMessage=function(){var e,t,n;return t=arguments[0],e=t,null===e||"undefined"==typeof e?null:(n=new fm.webrtc.notification,n.setClientId(t.getNotifyClientId()),n.setSuccessful(t.getSuccessful()),n.setError(t.getError()),n.setTimestamp(t.getTimestamp()),n.setDataJson(t.getDataJson()),n.setExtensions(t.getExtensions()),n)},s.fromMessages=function(){var e,t,n,s;if(n=arguments[0],e=n,null===e||"undefined"==typeof e)return null;for(s=new Array(n.length),t=0;t<n.length;)try{s[t]=fm.webrtc.notification.fromMessage(n[t])}finally{t++}return s},s.toJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeNotification(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeNotificationArray(e)},s.toMessage=function(){var e,t,n;return n=arguments[0],e=n,null===e||"undefined"==typeof e?null:(t=new fm.webrtc.message,t.setNotifyClientId(n.getClientId()),t.setSuccessful(n.getSuccessful()),t.setError(n.getError()),t.setTimestamp(n.getTimestamp()),t.setDataJson(n.getDataJson()),t.setExtensions(n.getExtensions()),t)},s.toMessages=function(){var e,t,n,s;if(s=arguments[0],e=s,null===e||"undefined"==typeof e)return null;for(n=new Array(s.length),t=0;t<s.length;)try{n[t]=fm.webrtc.notification.toMessage(s[t])}finally{t++}return n},s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1),this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.webrtc.notification.toJson(this)},s}(fm.webrtc.baseMessage);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publisherResponseArgs=function(n){function s(){return this.setResponses=e(this.setResponses,this),this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponses=e(this.getResponses,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._responses=null,s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){var e;return e=this.getResponses(),null===e||"undefined"==typeof e||0===this.getResponses().length?null:this.getResponses()[0]},s.prototype.getResponses=function(){return this._responses},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this.setResponses([e])},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseClient=function(n){function s(){return this.setRequestUrl=e(this.setRequestUrl,this),this.setRequestTimeout=e(this.setRequestTimeout,this),this.setDomainName=e(this.setDomainName,this),this.setDomainKeyString=e(this.setDomainKeyString,this),this.setDomainKey=e(this.setDomainKey,this),this.setDisableBinary=e(this.setDisableBinary,this),this.setConcurrencyMode=e(this.setConcurrencyMode,this),this.removeOnUnhandledException=e(this.removeOnUnhandledException,this),this.removeOnResponseReceived=e(this.removeOnResponseReceived,this),this.removeOnRequestCreated=e(this.removeOnRequestCreated,this),this.removeOnHttpResponseReceived=e(this.removeOnHttpResponseReceived,this),this.removeOnHttpRequestCreated=e(this.removeOnHttpRequestCreated,this),this.raiseUnhandledException=e(this.raiseUnhandledException,this),this.raiseBaseEvent=e(this.raiseBaseEvent,this),this.internalOnResponseReceived=e(this.internalOnResponseReceived,this),this.internalOnRequestCreated=e(this.internalOnRequestCreated,this),this.internalOnHttpResponseReceived=e(this.internalOnHttpResponseReceived,this),this.internalOnHttpRequestCreated=e(this.internalOnHttpRequestCreated,this),this.getRequestUrl=e(this.getRequestUrl,this),this.getRequestTimeout=e(this.getRequestTimeout,this),this.getDomainName=e(this.getDomainName,this),this.getDomainKeyString=e(this.getDomainKeyString,this),this.getDomainKey=e(this.getDomainKey,this),this.getDisableBinary=e(this.getDisableBinary,this),this.getConcurrencyMode=e(this.getConcurrencyMode,this),this.createHeadersNoCache=e(this.createHeadersNoCache,this),this.createHeaders=e(this.createHeaders,this),this.addOnUnhandledException=e(this.addOnUnhandledException,this),this.addOnResponseReceived=e(this.addOnResponseReceived,this),this.addOnRequestCreated=e(this.addOnRequestCreated,this),this.addOnHttpResponseReceived=e(this.addOnHttpResponseReceived,this),this.addOnHttpRequestCreated=e(this.addOnHttpRequestCreated,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setRequestTimeout(15e3),this.setDomainKey(fm.webrtc.defaults.getDomainKey()),this.setDomainName(fm.webrtc.defaults.getDomainName()),this.setConcurrencyMode(fm.webrtc.concurrencyMode.Low),void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),this.setRequestTimeout(15e3),this.setDomainKey(fm.webrtc.defaults.getDomainKey()),this.setDomainName(fm.webrtc.defaults.getDomainName()),void this.setConcurrencyMode(fm.webrtc.concurrencyMode.Low))}return t(s,n),s.prototype.__domainName=null,s.prototype.__requestUrl=null,s.prototype._concurrencyMode=null,s.prototype._disableBinary=!1,s.prototype._domainKey=null,s._headers=null,s._invalidResponseMessage="Invalid response received from server.",s.prototype._onHttpRequestCreated=null,s.prototype._onHttpResponseReceived=null,s.prototype._onRequestCreated=null,s.prototype._onResponseReceived=null,s.prototype._onUnhandledException=null,s.prototype._requestTimeout=0,s.sanitizeDomainName=function(){var e,t;return e=arguments[0],fm.stringExtensions.startsWith(e,"http://",fm.stringComparison.Ordinal)?e=e.substring("http://".length):fm.stringExtensions.startsWith(e,"https://",fm.stringComparison.Ordinal)&&(e=e.substring("https://".length)),t=fm.stringExtensions.indexOf(e,"/"),-1!==t&&(e=fm.stringExtensions.substring(e,0,t)),e},s.prototype.addOnHttpRequestCreated=function(){var e;return e=arguments[0],this._onHttpRequestCreated=fm.delegate.combine(this._onHttpRequestCreated,e)},s.prototype.addOnHttpResponseReceived=function(){var e;return e=arguments[0],this._onHttpResponseReceived=fm.delegate.combine(this._onHttpResponseReceived,e)},s.prototype.addOnRequestCreated=function(){var e;return e=arguments[0],this._onRequestCreated=fm.delegate.combine(this._onRequestCreated,e)},s.prototype.addOnResponseReceived=function(){var e;return e=arguments[0],this._onResponseReceived=fm.delegate.combine(this._onResponseReceived,e)},s.prototype.addOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.combine(this._onUnhandledException,e)},s.prototype.createHeaders=function(){var e;return this.getConcurrencyMode()===fm.webrtc.concurrencyMode.High?(e=fm.webrtc.baseClient._headers,(null===e||"undefined"==typeof e)&&(this._headers=this.createHeadersNoCache()),fm.webrtc.baseClient._headers):this.createHeadersNoCache()},s.prototype.createHeadersNoCache=function(){var e,t;return t=new fm.nameValueCollection,this.getDomainName()!==fm.webrtc.defaults.getDomainName()&&t.set("X-FM-DomainName",this.getDomainName()),e=this.getDomainKey(),(null===e?e===fm.webrtc.defaults.getDomainKey():e.equals(fm.webrtc.defaults.getDomainKey()))||t.set("X-FM-DomainKey",this.getDomainKey().toString()),t},s.prototype.getConcurrencyMode=function(){return this._concurrencyMode},s.prototype.getDisableBinary=function(){return this._disableBinary},s.prototype.getDomainKey=function(){return this._domainKey},s.prototype.getDomainKeyString=function(){return this.getDomainKey().toString()},s.prototype.getDomainName=function(){return this.__domainName},s.prototype.getRequestTimeout=function(){return this._requestTimeout},s.prototype.getRequestUrl=function(){return this.__requestUrl},s.prototype.internalOnHttpRequestCreated=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onHttpRequestCreated,e,"OnHttpRequestCreated")},s.prototype.internalOnHttpResponseReceived=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onHttpResponseReceived,e,"OnHttpResponseReceived")},s.prototype.internalOnRequestCreated=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onRequestCreated,e,"OnRequestCreated")},s.prototype.internalOnResponseReceived=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onResponseReceived,e,"OnResponseReceived")},s.prototype.raiseBaseEvent=function(){var e,t,n,s,r,i;if(s=arguments[0],t=arguments[1],r=arguments[2],e=s,null!==e&&"undefined"!=typeof e)try{return s(t)}catch(n){if(i=n,!this.raiseUnhandledException(i))return fm.asyncException.asyncThrow(i,fm.stringExtensions.format("BaseClient -> {0}",r))}finally{}},s.prototype.raiseUnhandledException=function(){var e,t,n,s,r,i,o;if(s=arguments[0],i=this._onUnhandledException,e=i,null!==e&&"undefined"!=typeof e){t=new fm.webrtc.unhandledExceptionArgs,t.__exception=s,o=t;try{i(o)}catch(n){r=n,fm.asyncException.asyncThrow(r,"BaseClient -> OnUnhandledException")}finally{}return o.getHandled()}return!1},s.prototype.removeOnHttpRequestCreated=function(){var e;return e=arguments[0],this._onHttpRequestCreated=fm.delegate.remove(this._onHttpRequestCreated,e)},s.prototype.removeOnHttpResponseReceived=function(){var e;return e=arguments[0],this._onHttpResponseReceived=fm.delegate.remove(this._onHttpResponseReceived,e)},s.prototype.removeOnRequestCreated=function(){var e;return e=arguments[0],this._onRequestCreated=fm.delegate.remove(this._onRequestCreated,e)},s.prototype.removeOnResponseReceived=function(){var e;return e=arguments[0],this._onResponseReceived=fm.delegate.remove(this._onResponseReceived,e)},s.prototype.removeOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.remove(this._onUnhandledException,e)},s.prototype.setConcurrencyMode=function(){var e;return e=arguments[0],this._concurrencyMode=e},s.prototype.setDisableBinary=function(){var e;return e=arguments[0],this._disableBinary=e},s.prototype.setDomainKey=function(){var e;return e=arguments[0],this._domainKey=e},s.prototype.setDomainKeyString=function(){var e;return e=arguments[0],this.setDomainKey(new fm.guid(e))},s.prototype.setDomainName=function(){var e,t;return t=arguments[0],e=t,(null===e||"undefined"==typeof e)&&(t=fm.webrtc.defaults.getDomainName()),this.__domainName=fm.webrtc.baseClient.sanitizeDomainName(t)},s.prototype.setRequestTimeout=function(){var e;return e=arguments[0],this._requestTimeout=e},s.prototype.setRequestUrl=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e)throw new Error("Request URL cannot be null.");return this.__requestUrl=fm.httpTransfer.replaceWildcards(t)},s._headers=null,s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.baseAdvice=function(n){function s(){return this.toJson=e(this.toJson,this),this.setReconnect=e(this.setReconnect,this),this.setInterval=e(this.setInterval,this),this.setHosts=e(this.setHosts,this),this.getReconnect=e(this.getReconnect,this),this.getInterval=e(this.getInterval,this),this.getHosts=e(this.getHosts,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__hosts=null,s.prototype.__interval=null,s.prototype.__reconnect=null,s.fromJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeBaseAdvice(e)},s.toJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeBaseAdvice(e)},s.prototype.getHosts=function(){return this.__hosts},s.prototype.getInterval=function(){return this.__interval},s.prototype.getReconnect=function(){return this.__reconnect},s.prototype.setHosts=function(){var e;return e=arguments[0],this.__hosts=e,this.setIsDirty(!0)},s.prototype.setInterval=function(){var e;return e=arguments[0],this.__interval=e,this.setIsDirty(!0)},s.prototype.setReconnect=function(){var e;return e=arguments[0],this.__reconnect=e,this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.webrtc.baseAdvice.toJson(this)},s}(fm.serializable);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.advice=function(n){function s(){return this.toJson=e(this.toJson,this),this.setWebSocket=e(this.setWebSocket,this),this.setLongPolling=e(this.setLongPolling,this),this.setCallbackPolling=e(this.setCallbackPolling,this),this.getWebSocket=e(this.getWebSocket,this),this.getLongPolling=e(this.getLongPolling,this),this.getCallbackPolling=e(this.getCallbackPolling,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._callbackPolling=null,s.prototype._longPolling=null,s.prototype._webSocket=null,s.fromJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeAdvice(e)},s.toJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeAdvice(e)},s.prototype.getCallbackPolling=function(){return this._callbackPolling},s.prototype.getLongPolling=function(){return this._longPolling},s.prototype.getWebSocket=function(){return this._webSocket},s.prototype.setCallbackPolling=function(){var e;return e=arguments[0],this._callbackPolling=e},s.prototype.setLongPolling=function(){var e;return e=arguments[0],this._longPolling=e},s.prototype.setWebSocket=function(){var e;return e=arguments[0],this._webSocket=e},s.prototype.toJson=function(){return fm.webrtc.advice.toJson(this)},s}(fm.webrtc.baseAdvice);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.metaChannels=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void 0}return t(n,e),n._bind="/meta/bind",n._connect="/meta/connect",n._disconnect="/meta/disconnect",n._handshake="/meta/handshake",n._metaPrefix="/meta/",n._notify="/meta/notify",n._servicePrefix="/service/",n._subscribe="/meta/subscribe",n._unbind="/meta/unbind",n._unsubscribe="/meta/unsubscribe",n.convertChannelFromServiced=function(){var e;return e=arguments[0],fm.webrtc.metaChannels.isServiceChannel(e)?e.substring("/service/".length-1):e},n.convertChannelToServiced=function(){var e,t;return t=arguments[0],e=t,null===e||"undefined"==typeof e||t.length<1?"/service/":fm.stringExtensions.concat("/service/",t.substring(1))},n.getMessageType=function(){var e;return e=arguments[0],"/meta/handshake"===e?fm.webrtc.messageType.Connect:"/meta/connect"===e?fm.webrtc.messageType.Stream:"/meta/disconnect"===e?fm.webrtc.messageType.Disconnect:"/meta/bind"===e?fm.webrtc.messageType.Bind:"/meta/unbind"===e?fm.webrtc.messageType.Unbind:"/meta/subscribe"===e?fm.webrtc.messageType.Subscribe:"/meta/unsubscribe"===e?fm.webrtc.messageType.Unsubscribe:"/meta/notify"===e?fm.webrtc.messageType.Notify:fm.webrtc.metaChannels.isServiceChannel(e)?fm.webrtc.messageType.Service:fm.webrtc.metaChannels.isMetaChannel(e)?fm.webrtc.messageType.Unknown:fm.webrtc.messageType.Publish},n.isMetaChannel=function(){var e,t;return t=arguments[0],e=t,null!==e&&"undefined"!=typeof e&&fm.stringExtensions.startsWith(t,"/meta/",fm.stringComparison.Ordinal)},n.isReservedChannel=function(){var e;return e=arguments[0],fm.webrtc.metaChannels.isMetaChannel(e)||fm.webrtc.metaChannels.isServiceChannel(e)},n.isServiceChannel=function(){var e,t;return t=arguments[0],e=t,null!==e&&"undefined"!=typeof e&&fm.stringExtensions.startsWith(t,"/service/",fm.stringComparison.Ordinal)},n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.client=function(n){function s(){this.webSocketStreamFailure=e(this.webSocketStreamFailure,this),this.webSocketOpenSuccess=e(this.webSocketOpenSuccess,this),this.webSocketOpenFailure=e(this.webSocketOpenFailure,this),this.unsubscribe=e(this.unsubscribe,this),this.unsetCustomOnReceiveWithTag=e(this.unsetCustomOnReceiveWithTag,this),this.unsetCustomOnReceive=e(this.unsetCustomOnReceive,this),this.unbind=e(this.unbind,this),this.tryWebSocket=e(this.tryWebSocket,this),this.subscribe=e(this.subscribe,this),this.streamDeferred=e(this.streamDeferred,this),this.streamCallback=e(this.streamCallback,this),this.stream=e(this.stream,this),this.startBatch=e(this.startBatch,this),this.setToken=e(this.setToken,this),this.setSynchronous=e(this.setSynchronous,this),this.setStreamRequestUrl=e(this.setStreamRequestUrl,this),this.setSessionId=e(this.setSessionId,this),this.setServerTimeout=e(this.setServerTimeout,this),this.setIsDisconnecting=e(this.setIsDisconnecting,this),this.setIsConnecting=e(this.setIsConnecting,this),this.setIsConnected=e(this.setIsConnected,this),this.setInstanceId=e(this.setInstanceId,this),this.setDisableWebSockets=e(this.setDisableWebSockets,this),this.setCustomOnReceiveWithTag=e(this.setCustomOnReceiveWithTag,this),this.setCustomOnReceive=e(this.setCustomOnReceive,this),this.setClientId=e(this.setClientId,this),this.service=e(this.service,this),this.sendMany=e(this.sendMany,this),this.sendCallback=e(this.sendCallback,this),this.send=e(this.send,this),this.retryConnectDeferred=e(this.retryConnectDeferred,this),this.retryConnect=e(this.retryConnect,this),this.restream=e(this.restream,this),this.removeSubscribedOnReceive=e(this.removeSubscribedOnReceive,this),this.removeSubscribedChannels=e(this.removeSubscribedChannels,this),this.removeOnUnsubscribeSuccess=e(this.removeOnUnsubscribeSuccess,this),this.removeOnUnsubscribeFailure=e(this.removeOnUnsubscribeFailure,this),this.removeOnUnsubscribeComplete=e(this.removeOnUnsubscribeComplete,this),this.removeOnUnbindSuccess=e(this.removeOnUnbindSuccess,this),this.removeOnUnbindFailure=e(this.removeOnUnbindFailure,this),this.removeOnUnbindComplete=e(this.removeOnUnbindComplete,this),this.removeOnSubscribeSuccess=e(this.removeOnSubscribeSuccess,this),this.removeOnSubscribeFailure=e(this.removeOnSubscribeFailure,this),this.removeOnSubscribeComplete=e(this.removeOnSubscribeComplete,this),this.removeOnStreamFailure=e(this.removeOnStreamFailure,this),this.removeOnStateRestored=e(this.removeOnStateRestored,this),this.removeOnServiceSuccess=e(this.removeOnServiceSuccess,this),this.removeOnServiceFailure=e(this.removeOnServiceFailure,this),this.removeOnServiceComplete=e(this.removeOnServiceComplete,this),this.removeOnServerUnsubscribe=e(this.removeOnServerUnsubscribe,this),this.removeOnServerUnbind=e(this.removeOnServerUnbind,this),this.removeOnServerSubscribe=e(this.removeOnServerSubscribe,this),this.removeOnServerBind=e(this.removeOnServerBind,this),this.removeOnPublishSuccess=e(this.removeOnPublishSuccess,this),this.removeOnPublishFailure=e(this.removeOnPublishFailure,this),this.removeOnPublishComplete=e(this.removeOnPublishComplete,this),this.removeOnNotifySuccess=e(this.removeOnNotifySuccess,this),this.removeOnNotifyFailure=e(this.removeOnNotifyFailure,this),this.removeOnNotifyComplete=e(this.removeOnNotifyComplete,this),this.removeOnNotify=e(this.removeOnNotify,this),this.removeOnDisconnectComplete=e(this.removeOnDisconnectComplete,this),this.removeOnConnectSuccess=e(this.removeOnConnectSuccess,this),this.removeOnConnectFailure=e(this.removeOnConnectFailure,this),this.removeOnConnectComplete=e(this.removeOnConnectComplete,this),this.removeOnBindSuccess=e(this.removeOnBindSuccess,this),this.removeOnBindFailure=e(this.removeOnBindFailure,this),this.removeOnBindComplete=e(this.removeOnBindComplete,this),this.removeBoundRecords=e(this.removeBoundRecords,this),this.reconnect=e(this.reconnect,this),this.receiveSink=e(this.receiveSink,this),this.receiveMessage=e(this.receiveMessage,this),this.raiseUnsubscribeSuccess=e(this.raiseUnsubscribeSuccess,this),this.raiseUnsubscribeFailure=e(this.raiseUnsubscribeFailure,this),this.raiseUnsubscribeComplete=e(this.raiseUnsubscribeComplete,this),this.raiseUnbindSuccess=e(this.raiseUnbindSuccess,this),this.raiseUnbindFailure=e(this.raiseUnbindFailure,this),this.raiseUnbindComplete=e(this.raiseUnbindComplete,this),this.raiseSubscribeSuccess=e(this.raiseSubscribeSuccess,this),this.raiseSubscribeFailure=e(this.raiseSubscribeFailure,this),this.raiseSubscribeDelivery=e(this.raiseSubscribeDelivery,this),this.raiseSubscribeComplete=e(this.raiseSubscribeComplete,this),this.raiseStreamFailure=e(this.raiseStreamFailure,this),this.raiseStateRestored=e(this.raiseStateRestored,this),this.raiseServiceSuccess=e(this.raiseServiceSuccess,this),this.raiseServiceFailure=e(this.raiseServiceFailure,this),this.raiseServiceComplete=e(this.raiseServiceComplete,this),this.raiseServerUnsubscribe=e(this.raiseServerUnsubscribe,this),this.raiseServerUnbind=e(this.raiseServerUnbind,this),this.raiseServerSubscribe=e(this.raiseServerSubscribe,this),this.raiseServerBind=e(this.raiseServerBind,this),this.raiseSendException=e(this.raiseSendException,this),this.raiseRetriable=e(this.raiseRetriable,this),this.raiseResponseEvent=e(this.raiseResponseEvent,this),this.raiseRequestEvent=e(this.raiseRequestEvent,this),this.raisePublishSuccess=e(this.raisePublishSuccess,this),this.raisePublishFailure=e(this.raisePublishFailure,this),this.raisePublishComplete=e(this.raisePublishComplete,this),this.raiseNotifySuccess=e(this.raiseNotifySuccess,this),this.raiseNotifyFailure=e(this.raiseNotifyFailure,this),this.raiseNotifyDelivery=e(this.raiseNotifyDelivery,this),this.raiseNotifyComplete=e(this.raiseNotifyComplete,this),this.raiseFunctionManual=e(this.raiseFunctionManual,this),this.raiseFunction=e(this.raiseFunction,this),this.raiseForcedUnsubscribes=e(this.raiseForcedUnsubscribes,this),this.raiseForcedUnbinds=e(this.raiseForcedUnbinds,this),this.raiseEvent=e(this.raiseEvent,this),this.raiseDisconnectComplete=e(this.raiseDisconnectComplete,this),this.raiseConnectSuccess=e(this.raiseConnectSuccess,this),this.raiseConnectFailure=e(this.raiseConnectFailure,this),this.raiseConnectComplete=e(this.raiseConnectComplete,this),this.raiseCompleteEvent=e(this.raiseCompleteEvent,this),this.raiseBindSuccess=e(this.raiseBindSuccess,this),this.raiseBindFailure=e(this.raiseBindFailure,this),this.raiseBindComplete=e(this.raiseBindComplete,this),this.raiseActionManual=e(this.raiseActionManual,this),this.raiseAction=e(this.raiseAction,this),this.publish=e(this.publish,this),this.processServerAction=e(this.processServerAction,this),this.processRequestUrl=e(this.processRequestUrl,this),this.processQueue=e(this.processQueue,this),this.processPendingReceives=e(this.processPendingReceives,this),this.processAdvice=e(this.processAdvice,this),this.preRaise=e(this.preRaise,this),this.postRaise=e(this.postRaise,this),this.performUnsubscribeCallback=e(this.performUnsubscribeCallback,this),this.performUnsubscribe=e(this.performUnsubscribe,this),this.performUnbindCallback=e(this.performUnbindCallback,this),
this.performUnbind=e(this.performUnbind,this),this.performSubscribeCallback=e(this.performSubscribeCallback,this),this.performSubscribe=e(this.performSubscribe,this),this.performServiceCallback=e(this.performServiceCallback,this),this.performService=e(this.performService,this),this.performPublishCallback=e(this.performPublishCallback,this),this.performPublish=e(this.performPublish,this),this.performNotifyCallback=e(this.performNotifyCallback,this),this.performNotify=e(this.performNotify,this),this.performDisconnectCallback=e(this.performDisconnectCallback,this),this.performDisconnect=e(this.performDisconnect,this),this.performConnectCallback=e(this.performConnectCallback,this),this.performConnect=e(this.performConnect,this),this.performBindCallback=e(this.performBindCallback,this),this.performBind=e(this.performBind,this),this.notify=e(this.notify,this),this.maybeRaiseStateRestored=e(this.maybeRaiseStateRestored,this),this.inCallback=e(this.inCallback,this),this.inBatch=e(this.inBatch,this),this.getToken=e(this.getToken,this),this.getThreadId=e(this.getThreadId,this),this.getSynchronous=e(this.getSynchronous,this),this.getSubscribedChannels=e(this.getSubscribedChannels,this),this.getStreamRequestUrl=e(this.getStreamRequestUrl,this),this.getStreamRequestTimeout=e(this.getStreamRequestTimeout,this),this.getSessionId=e(this.getSessionId,this),this.getServerTimeout=e(this.getServerTimeout,this),this.getIsDisconnecting=e(this.getIsDisconnecting,this),this.getIsConnecting=e(this.getIsConnecting,this),this.getIsConnected=e(this.getIsConnected,this),this.getInstanceId=e(this.getInstanceId,this),this.getDisableWebSockets=e(this.getDisableWebSockets,this),this.getCustomOnReceiveWithTag=e(this.getCustomOnReceiveWithTag,this),this.getCustomOnReceive=e(this.getCustomOnReceive,this),this.getClientId=e(this.getClientId,this),this.getBoundRecords=e(this.getBoundRecords,this),this.endBatch=e(this.endBatch,this),this.doLongPolling=e(this.doLongPolling,this),this.disconnect=e(this.disconnect,this),this.decrementPendingRestoreStateCalls=e(this.decrementPendingRestoreStateCalls,this),this.connect=e(this.connect,this),this.clearSubscribedChannels=e(this.clearSubscribedChannels,this),this.clearBoundRecords=e(this.clearBoundRecords,this),this.checkSynchronous=e(this.checkSynchronous,this),this.bind=e(this.bind,this),this.addToQueue=e(this.addToQueue,this),this.addSubscribedOnReceive=e(this.addSubscribedOnReceive,this),this.addSubscribedChannels=e(this.addSubscribedChannels,this),this.addOnUnsubscribeSuccess=e(this.addOnUnsubscribeSuccess,this),this.addOnUnsubscribeFailure=e(this.addOnUnsubscribeFailure,this),this.addOnUnsubscribeComplete=e(this.addOnUnsubscribeComplete,this),this.addOnUnbindSuccess=e(this.addOnUnbindSuccess,this),this.addOnUnbindFailure=e(this.addOnUnbindFailure,this),this.addOnUnbindComplete=e(this.addOnUnbindComplete,this),this.addOnSubscribeSuccess=e(this.addOnSubscribeSuccess,this),this.addOnSubscribeFailure=e(this.addOnSubscribeFailure,this),this.addOnSubscribeComplete=e(this.addOnSubscribeComplete,this),this.addOnStreamFailure=e(this.addOnStreamFailure,this),this.addOnStateRestored=e(this.addOnStateRestored,this),this.addOnServiceSuccess=e(this.addOnServiceSuccess,this),this.addOnServiceFailure=e(this.addOnServiceFailure,this),this.addOnServiceComplete=e(this.addOnServiceComplete,this),this.addOnServerUnsubscribe=e(this.addOnServerUnsubscribe,this),this.addOnServerUnbind=e(this.addOnServerUnbind,this),this.addOnServerSubscribe=e(this.addOnServerSubscribe,this),this.addOnServerBind=e(this.addOnServerBind,this),this.addOnPublishSuccess=e(this.addOnPublishSuccess,this),this.addOnPublishFailure=e(this.addOnPublishFailure,this),this.addOnPublishComplete=e(this.addOnPublishComplete,this),this.addOnNotifySuccess=e(this.addOnNotifySuccess,this),this.addOnNotifyFailure=e(this.addOnNotifyFailure,this),this.addOnNotifyComplete=e(this.addOnNotifyComplete,this),this.addOnNotify=e(this.addOnNotify,this),this.addOnDisconnectComplete=e(this.addOnDisconnectComplete,this),this.addOnConnectSuccess=e(this.addOnConnectSuccess,this),this.addOnConnectFailure=e(this.addOnConnectFailure,this),this.addOnConnectComplete=e(this.addOnConnectComplete,this),this.addOnBindSuccess=e(this.addOnBindSuccess,this),this.addOnBindFailure=e(this.addOnBindFailure,this),this.addOnBindComplete=e(this.addOnBindComplete,this),this.addBoundRecords=e(this.addBoundRecords,this),this.activateStream=e(this.activateStream,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._counter=0,this._lastBackoffTimeout=0,this._lastBackoffIndex=-1,this._threadCounters={},this._threadCountersLock=new fm.object,this._lastInterval=0,this._lastReconnect=null,this._connectArgs=null,this._responseArgs=null,this._reconnectCacheLock=new fm.object,this._reconnectCache=[],this._rebindCache={},this._resubscribeCache={},this._boundRecordsLock=new fm.object,this._boundRecords={},this._subscribedChannelsLock=new fm.object,this._subscribedChannels={},this._subscribedOnReceivesLock=new fm.object,this._subscribedOnReceives={},this._subscribedDynamicProperties={},this._pendingReceives={},this._customOnReceivesLock=new fm.object,this._customOnReceives={},this._stateLock=new fm.object,this._queueLock=new fm.object,this._queueActivated=!1,this._requestQueue={},this._supportedConnectionTypes=new Array(0),this._connectionType=fm.webrtc.connectionType.LongPolling,this._batchCounter=0,this._batchCounterLock=new fm.object,this._pendingRestoreStateCalls=0,this._pendingRestoreStateCallsLock=new fm.object,this._webSocketOpened=!1,this._counterLock=new fm.object,this.setSynchronous(!1),this.setToken(fm.webrtc.client.generateToken()),this.setInstanceId(fm.guid.newGuid()),this.setDisableWebSockets(!0),this._requestTransfer=fm.webrtc.messageTransferFactory.getHttpMessageTransfer(),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(s.__super__.constructor.call(this),this._counter=0,this._lastBackoffTimeout=0,this._lastBackoffIndex=-1,this._threadCounters={},this._threadCountersLock=new fm.object,this._lastInterval=0,this._lastReconnect=null,this._connectArgs=null,this._responseArgs=null,this._reconnectCacheLock=new fm.object,this._reconnectCache=[],this._rebindCache={},this._resubscribeCache={},this._boundRecordsLock=new fm.object,this._boundRecords={},this._subscribedChannelsLock=new fm.object,this._subscribedChannels={},this._subscribedOnReceivesLock=new fm.object,this._subscribedOnReceives={},this._subscribedDynamicProperties={},this._pendingReceives={},this._customOnReceivesLock=new fm.object,this._customOnReceives={},this._stateLock=new fm.object,this._queueLock=new fm.object,this._queueActivated=!1,this._requestQueue={},this._supportedConnectionTypes=new Array(0),this._connectionType=fm.webrtc.connectionType.LongPolling,this._batchCounter=0,this._batchCounterLock=new fm.object,this._pendingRestoreStateCalls=0,this._pendingRestoreStateCallsLock=new fm.object,this._webSocketOpened=!1,this._counterLock=new fm.object,this.setSynchronous(!1),this.setToken(fm.webrtc.client.generateToken()),this.setInstanceId(fm.guid.newGuid()),this.setDisableWebSockets(!0),void(this._requestTransfer=fm.webrtc.messageTransferFactory.getHttpMessageTransfer())):1===arguments.length?(t=arguments[0],void s.call(this,t,t)):2===arguments.length?(t=arguments[0],n=arguments[1],s.call(this),this.setRequestUrl(t),void this.setStreamRequestUrl(n)):void 0}return t(s,n),s.prototype.__streamRequestUrl=null,s._argsKey=null,s.prototype._batchCounter=0,s.prototype._batchCounterLock=null,s._bayeuxMinimumVersion=null,s._bayeuxVersion=null,s.prototype._boundRecords=null,s.prototype._boundRecordsLock=null,s.prototype._clientId=null,s.prototype._connectArgs=null,s.prototype._connectionType=null,s.prototype._counter=0,s.prototype._counterLock=null,s.prototype._customOnReceives=null,s.prototype._customOnReceivesLock=null,s.prototype._disableWebSockets=!1,s.prototype._instanceId=null,s.prototype._isConnected=!1,s.prototype._isConnecting=!1,s.prototype._isDisconnecting=!1,s.prototype._lastBackoffIndex=0,s.prototype._lastBackoffTimeout=0,s.prototype._lastInterval=0,s.prototype._lastReconnect=null,s.prototype._onBindComplete=null,s._onBindEnd=null,s.prototype._onBindFailure=null,s._onBindRequest=null,s._onBindResponse=null,s.prototype._onBindSuccess=null,s.prototype._onConnectComplete=null,s._onConnectEnd=null,s.prototype._onConnectFailure=null,s._onConnectRequest=null,s._onConnectResponse=null,s.prototype._onConnectSuccess=null,s.prototype._onDisconnectComplete=null,s._onDisconnectEnd=null,s._onDisconnectRequest=null,s._onDisconnectResponse=null,s.prototype._onNotify=null,s.prototype._onNotifyComplete=null,s._onNotifyEnd=null,s.prototype._onNotifyFailure=null,s._onNotifyRequest=null,s._onNotifyResponse=null,s.prototype._onNotifySuccess=null,s.prototype._onPublishComplete=null,s._onPublishEnd=null,s.prototype._onPublishFailure=null,s._onPublishRequest=null,s._onPublishResponse=null,s.prototype._onPublishSuccess=null,s.prototype._onServerBind=null,s.prototype._onServerSubscribe=null,s.prototype._onServerUnbind=null,s.prototype._onServerUnsubscribe=null,s.prototype._onServiceComplete=null,s._onServiceEnd=null,s.prototype._onServiceFailure=null,s._onServiceRequest=null,s._onServiceResponse=null,s.prototype._onServiceSuccess=null,s.prototype._onStateRestored=null,s.prototype._onStreamFailure=null,s.prototype._onSubscribeComplete=null,s._onSubscribeEnd=null,s.prototype._onSubscribeFailure=null,s._onSubscribeRequest=null,s._onSubscribeResponse=null,s.prototype._onSubscribeSuccess=null,s.prototype._onUnbindComplete=null,s._onUnbindEnd=null,s.prototype._onUnbindFailure=null,s._onUnbindRequest=null,s._onUnbindResponse=null,s.prototype._onUnbindSuccess=null,s.prototype._onUnsubscribeComplete=null,s._onUnsubscribeEnd=null,s.prototype._onUnsubscribeFailure=null,s._onUnsubscribeRequest=null,s._onUnsubscribeResponse=null,s.prototype._onUnsubscribeSuccess=null,s.prototype._pendingReceives=null,s.prototype._pendingRestoreStateCalls=0,s.prototype._pendingRestoreStateCallsLock=null,s.prototype._queueActivated=!1,s.prototype._queueLock=null,s.prototype._rebindCache=null,s.prototype._reconnectCache=null,s.prototype._reconnectCacheLock=null,s.prototype._requestQueue=null,s.prototype._requestTransfer=null,s._requestUrlCache=null,s._requestUrlCacheLock=null,s.prototype._responseArgs=null,s.prototype._resubscribeCache=null,s.prototype._serverTimeout=0,s.prototype._sessionId=null,s._stateKey=null,s.prototype._stateLock=null,s.prototype._streamRequestTransfer=null,s.prototype._subscribedChannels=null,s.prototype._subscribedChannelsLock=null,s.prototype._subscribedDynamicProperties=null,s.prototype._subscribedOnReceives=null,s.prototype._subscribedOnReceivesLock=null,s.prototype._supportedConnectionTypes=null,s.prototype._synchronous=null,s.prototype._threadCounters=null,s.prototype._threadCountersLock=null,s.prototype._token=null,s.prototype._webSocketOpened=!1,s.addOnBindEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onBindEnd=fm.delegate.combine(fm.webrtc.client._onBindEnd,e)},s.addOnBindRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onBindRequest=fm.delegate.combine(fm.webrtc.client._onBindRequest,e)},s.addOnBindResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onBindResponse=fm.delegate.combine(fm.webrtc.client._onBindResponse,e)},s.addOnConnectEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onConnectEnd=fm.delegate.combine(fm.webrtc.client._onConnectEnd,e)},s.addOnConnectRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onConnectRequest=fm.delegate.combine(fm.webrtc.client._onConnectRequest,e)},s.addOnConnectResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onConnectResponse=fm.delegate.combine(fm.webrtc.client._onConnectResponse,e)},s.addOnDisconnectEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onDisconnectEnd=fm.delegate.combine(fm.webrtc.client._onDisconnectEnd,e)},s.addOnDisconnectRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onDisconnectRequest=fm.delegate.combine(fm.webrtc.client._onDisconnectRequest,e)},s.addOnDisconnectResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onDisconnectResponse=fm.delegate.combine(fm.webrtc.client._onDisconnectResponse,e)},s.addOnNotifyEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onNotifyEnd=fm.delegate.combine(fm.webrtc.client._onNotifyEnd,e)},s.addOnNotifyRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onNotifyRequest=fm.delegate.combine(fm.webrtc.client._onNotifyRequest,e)},s.addOnNotifyResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onNotifyResponse=fm.delegate.combine(fm.webrtc.client._onNotifyResponse,e)},s.addOnPublishEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onPublishEnd=fm.delegate.combine(fm.webrtc.client._onPublishEnd,e)},s.addOnPublishRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onPublishRequest=fm.delegate.combine(fm.webrtc.client._onPublishRequest,e)},s.addOnPublishResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onPublishResponse=fm.delegate.combine(fm.webrtc.client._onPublishResponse,e)},s.addOnServiceEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onServiceEnd=fm.delegate.combine(fm.webrtc.client._onServiceEnd,e)},s.addOnServiceRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onServiceRequest=fm.delegate.combine(fm.webrtc.client._onServiceRequest,e)},s.addOnServiceResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onServiceResponse=fm.delegate.combine(fm.webrtc.client._onServiceResponse,e)},s.addOnSubscribeEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onSubscribeEnd=fm.delegate.combine(fm.webrtc.client._onSubscribeEnd,e)},s.addOnSubscribeRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onSubscribeRequest=fm.delegate.combine(fm.webrtc.client._onSubscribeRequest,e)},s.addOnSubscribeResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onSubscribeResponse=fm.delegate.combine(fm.webrtc.client._onSubscribeResponse,e)},s.addOnUnbindEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onUnbindEnd=fm.delegate.combine(fm.webrtc.client._onUnbindEnd,e)},s.addOnUnbindRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onUnbindRequest=fm.delegate.combine(fm.webrtc.client._onUnbindRequest,e)},s.addOnUnbindResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onUnbindResponse=fm.delegate.combine(fm.webrtc.client._onUnbindResponse,e)},s.addOnUnsubscribeEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onUnsubscribeEnd=fm.delegate.combine(fm.webrtc.client._onUnsubscribeEnd,e)},s.addOnUnsubscribeRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onUnsubscribeRequest=fm.delegate.combine(fm.webrtc.client._onUnsubscribeRequest,e)},s.addOnUnsubscribeResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onUnsubscribeResponse=fm.delegate.combine(fm.webrtc.client._onUnsubscribeResponse,e)},s.generateToken=function(){var e;return e=fm.intExtensions.toString(fm.dateTime.getUtcNow().getTicks()),fm.stringExtensions.substring(e,e.length-12,8)},s.getChannelForPublish=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__channel:(t=s.getChannel(),null===t||"undefined"==typeof t?n.__channel:s.getChannel())},s.getChannelForService=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__channel:(t=n.getChannel(),null===t||"undefined"==typeof t?s.__channel:n.getChannel())},s.getChannelsForSubscribe=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__channels:(t=n.getChannels(),null===t||"undefined"==typeof t?s.__channels:n.getChannels())},s.getChannelsForUnsubscribe=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__channels:(t=n.getChannels(),null===t||"undefined"==typeof t?s.__channels:n.getChannels())},s.getDataBytesForNotify=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__dataBytes:(t=s.getDataBytes(),null===t||"undefined"==typeof t?n.__dataBytes:s.getDataBytes())},s.getDataBytesForPublish=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__dataBytes:(t=s.getDataBytes(),null===t||"undefined"==typeof t?n.__dataBytes:s.getDataBytes())},s.getDataBytesForService=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__dataBytes:(t=n.getDataBytes(),null===t||"undefined"==typeof t?s.__dataBytes:n.getDataBytes())},s.getDataJsonForNotify=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__dataJson:(t=s.getDataJson(),null===t||"undefined"==typeof t?n.__dataJson:s.getDataJson())},s.getDataJsonForPublish=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__dataJson:(t=s.getDataJson(),null===t||"undefined"==typeof t?n.__dataJson:s.getDataJson())},s.getDataJsonForService=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__dataJson:(t=n.getDataJson(),null===t||"undefined"==typeof t?s.__dataJson:n.getDataJson())},s.getExtensions=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=n,null!==e&&"undefined"!=typeof e?n.getExtensions():t.getExtensions()},s.getRecordsForBind=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__records:(t=s.getRecords(),null===t||"undefined"==typeof t?n.__records:s.getRecords())},s.getRecordsForUnbind=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__records:(t=n.getRecords(),null===t||"undefined"==typeof t?s.__records:n.getRecords())},s.getSubscribeKey=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=n,null===e||"undefined"==typeof e?fm.stringExtensions.format("-1|{0}",t):fm.stringExtensions.format("{0}|{1}{2}",fm.intExtensions.toString(n.length),n,t)},s.getTimestamp=function(){var e,t;return t=arguments[0],e=t,null!==e&&"undefined"!=typeof e?t.getTimestamp():null},s.removeOnBindEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onBindEnd=fm.delegate.remove(fm.webrtc.client._onBindEnd,e)},s.removeOnBindRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onBindRequest=fm.delegate.remove(fm.webrtc.client._onBindRequest,e)},s.removeOnBindResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onBindResponse=fm.delegate.remove(fm.webrtc.client._onBindResponse,e)},s.removeOnConnectEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onConnectEnd=fm.delegate.remove(fm.webrtc.client._onConnectEnd,e)},s.removeOnConnectRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onConnectRequest=fm.delegate.remove(fm.webrtc.client._onConnectRequest,e)},s.removeOnConnectResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onConnectResponse=fm.delegate.remove(fm.webrtc.client._onConnectResponse,e)},s.removeOnDisconnectEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onDisconnectEnd=fm.delegate.remove(fm.webrtc.client._onDisconnectEnd,e)},s.removeOnDisconnectRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onDisconnectRequest=fm.delegate.remove(fm.webrtc.client._onDisconnectRequest,e)},s.removeOnDisconnectResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onDisconnectResponse=fm.delegate.remove(fm.webrtc.client._onDisconnectResponse,e)},s.removeOnNotifyEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onNotifyEnd=fm.delegate.remove(fm.webrtc.client._onNotifyEnd,e)},s.removeOnNotifyRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onNotifyRequest=fm.delegate.remove(fm.webrtc.client._onNotifyRequest,e)},s.removeOnNotifyResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onNotifyResponse=fm.delegate.remove(fm.webrtc.client._onNotifyResponse,e)},s.removeOnPublishEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onPublishEnd=fm.delegate.remove(fm.webrtc.client._onPublishEnd,e)},s.removeOnPublishRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onPublishRequest=fm.delegate.remove(fm.webrtc.client._onPublishRequest,e)},s.removeOnPublishResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onPublishResponse=fm.delegate.remove(fm.webrtc.client._onPublishResponse,e)},s.removeOnServiceEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onServiceEnd=fm.delegate.remove(fm.webrtc.client._onServiceEnd,e)},s.removeOnServiceRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onServiceRequest=fm.delegate.remove(fm.webrtc.client._onServiceRequest,e)},s.removeOnServiceResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onServiceResponse=fm.delegate.remove(fm.webrtc.client._onServiceResponse,e)},s.removeOnSubscribeEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onSubscribeEnd=fm.delegate.remove(fm.webrtc.client._onSubscribeEnd,e)},s.removeOnSubscribeRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onSubscribeRequest=fm.delegate.remove(fm.webrtc.client._onSubscribeRequest,e)},s.removeOnSubscribeResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onSubscribeResponse=fm.delegate.remove(fm.webrtc.client._onSubscribeResponse,e)},s.removeOnUnbindEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onUnbindEnd=fm.delegate.remove(fm.webrtc.client._onUnbindEnd,e)},s.removeOnUnbindRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onUnbindRequest=fm.delegate.remove(fm.webrtc.client._onUnbindRequest,e)},s.removeOnUnbindResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onUnbindResponse=fm.delegate.remove(fm.webrtc.client._onUnbindResponse,e)},s.removeOnUnsubscribeEnd=function(){var e;return e=arguments[0],fm.webrtc.client._onUnsubscribeEnd=fm.delegate.remove(fm.webrtc.client._onUnsubscribeEnd,e)},s.removeOnUnsubscribeRequest=function(){var e;return e=arguments[0],fm.webrtc.client._onUnsubscribeRequest=fm.delegate.remove(fm.webrtc.client._onUnsubscribeRequest,e)},s.removeOnUnsubscribeResponse=function(){var e;return e=arguments[0],fm.webrtc.client._onUnsubscribeResponse=fm.delegate.remove(fm.webrtc.client._onUnsubscribeResponse,e)},s.prototype.activateStream=function(){var e,t,n;return t=arguments[0],n=arguments[1],this.raiseConnectSuccess(this._connectArgs,this._responseArgs),this.raiseConnectComplete(this._connectArgs,this._responseArgs),e=new fm.webrtc.clientConnectEndArgs,e.setMethodArgs(t),this.raiseCompleteEvent(fm.webrtc.client._onConnectEnd,e,"OnConnectEnd",n),this.processQueue(!0),this.stream(this._connectArgs,!1)},s.prototype.addBoundRecords=function(){var e,t,n,s,r,i;for(r=arguments[0],e=r,i=[],t=0,n=e.length;n>t;t++)s=e[t],i.push(this._boundRecords[s.getKey()]=s);return i},s.prototype.addOnBindComplete=function(){var e;return e=arguments[0],this._onBindComplete=fm.delegate.combine(this._onBindComplete,e)},s.prototype.addOnBindFailure=function(){var e;return e=arguments[0],this._onBindFailure=fm.delegate.combine(this._onBindFailure,e)},s.prototype.addOnBindSuccess=function(){var e;return e=arguments[0],this._onBindSuccess=fm.delegate.combine(this._onBindSuccess,e)},s.prototype.addOnConnectComplete=function(){var e;return e=arguments[0],this._onConnectComplete=fm.delegate.combine(this._onConnectComplete,e)},s.prototype.addOnConnectFailure=function(){var e;return e=arguments[0],this._onConnectFailure=fm.delegate.combine(this._onConnectFailure,e)},s.prototype.addOnConnectSuccess=function(){var e;return e=arguments[0],this._onConnectSuccess=fm.delegate.combine(this._onConnectSuccess,e)},s.prototype.addOnDisconnectComplete=function(){var e;return e=arguments[0],this._onDisconnectComplete=fm.delegate.combine(this._onDisconnectComplete,e)},s.prototype.addOnNotify=function(){var e;return e=arguments[0],this._onNotify=fm.delegate.combine(this._onNotify,e)},s.prototype.addOnNotifyComplete=function(){var e;return e=arguments[0],this._onNotifyComplete=fm.delegate.combine(this._onNotifyComplete,e)},s.prototype.addOnNotifyFailure=function(){var e;return e=arguments[0],this._onNotifyFailure=fm.delegate.combine(this._onNotifyFailure,e)},s.prototype.addOnNotifySuccess=function(){var e;return e=arguments[0],this._onNotifySuccess=fm.delegate.combine(this._onNotifySuccess,e)},s.prototype.addOnPublishComplete=function(){var e;return e=arguments[0],this._onPublishComplete=fm.delegate.combine(this._onPublishComplete,e)},s.prototype.addOnPublishFailure=function(){var e;return e=arguments[0],this._onPublishFailure=fm.delegate.combine(this._onPublishFailure,e)},s.prototype.addOnPublishSuccess=function(){var e;return e=arguments[0],this._onPublishSuccess=fm.delegate.combine(this._onPublishSuccess,e)},s.prototype.addOnServerBind=function(){var e;return e=arguments[0],this._onServerBind=fm.delegate.combine(this._onServerBind,e)},s.prototype.addOnServerSubscribe=function(){var e;return e=arguments[0],this._onServerSubscribe=fm.delegate.combine(this._onServerSubscribe,e)},s.prototype.addOnServerUnbind=function(){var e;return e=arguments[0],this._onServerUnbind=fm.delegate.combine(this._onServerUnbind,e)},s.prototype.addOnServerUnsubscribe=function(){var e;return e=arguments[0],this._onServerUnsubscribe=fm.delegate.combine(this._onServerUnsubscribe,e)},s.prototype.addOnServiceComplete=function(){var e;return e=arguments[0],this._onServiceComplete=fm.delegate.combine(this._onServiceComplete,e)},s.prototype.addOnServiceFailure=function(){var e;return e=arguments[0],this._onServiceFailure=fm.delegate.combine(this._onServiceFailure,e)},s.prototype.addOnServiceSuccess=function(){var e;return e=arguments[0],this._onServiceSuccess=fm.delegate.combine(this._onServiceSuccess,e)},s.prototype.addOnStateRestored=function(){var e;return e=arguments[0],this._onStateRestored=fm.delegate.combine(this._onStateRestored,e)},s.prototype.addOnStreamFailure=function(){var e;return e=arguments[0],this._onStreamFailure=fm.delegate.combine(this._onStreamFailure,e)},s.prototype.addOnSubscribeComplete=function(){var e;return e=arguments[0],this._onSubscribeComplete=fm.delegate.combine(this._onSubscribeComplete,e)},s.prototype.addOnSubscribeFailure=function(){var e;return e=arguments[0],this._onSubscribeFailure=fm.delegate.combine(this._onSubscribeFailure,e)},s.prototype.addOnSubscribeSuccess=function(){var e;return e=arguments[0],this._onSubscribeSuccess=fm.delegate.combine(this._onSubscribeSuccess,e)},s.prototype.addOnUnbindComplete=function(){var e;return e=arguments[0],this._onUnbindComplete=fm.delegate.combine(this._onUnbindComplete,e)},s.prototype.addOnUnbindFailure=function(){var e;return e=arguments[0],this._onUnbindFailure=fm.delegate.combine(this._onUnbindFailure,e)},s.prototype.addOnUnbindSuccess=function(){var e;return e=arguments[0],this._onUnbindSuccess=fm.delegate.combine(this._onUnbindSuccess,e)},s.prototype.addOnUnsubscribeComplete=function(){var e;return e=arguments[0],this._onUnsubscribeComplete=fm.delegate.combine(this._onUnsubscribeComplete,e)},s.prototype.addOnUnsubscribeFailure=function(){var e;return e=arguments[0],this._onUnsubscribeFailure=fm.delegate.combine(this._onUnsubscribeFailure,e)},s.prototype.addOnUnsubscribeSuccess=function(){var e;return e=arguments[0],this._onUnsubscribeSuccess=fm.delegate.combine(this._onUnsubscribeSuccess,e)},s.prototype.addSubscribedChannels=function(){var e,t,n,s,r,i,o,a,u,c;for(c=arguments[0],s=arguments[1],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedChannels,c,e),r=e.getValue(),t||(r={},this._subscribedChannels[c]=r),n=s,a=[],i=0,o=n.length;o>i;i++)u=n[i],fm.hashExtensions.containsKey(r,u)?a.push(void 0):a.push(r[u]=new fm.object);return a},s.prototype.addSubscribedOnReceive=function(){var e,t,n,s,r,i,o,a,u,c,l,h;for(h=arguments[0],s=arguments[1],u=arguments[2],i=arguments[3],c=arguments[4],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedOnReceives,h,e),r=e.getValue(),t||(r={},this._subscribedOnReceives[h]=r),n=s,o=0,a=n.length;a>o;o++)l=n[o],r[l]=u,this._subscribedDynamicProperties[fm.webrtc.client.getSubscribeKey(l,h)]=i;return c=this.processPendingReceives(s,c)},s.prototype.addToQueue=function(){var e,t,n,s,r;return t=arguments[0],r=arguments[1],n=arguments[2],s=arguments[3],r=null!=r?r:this.getRequestUrl(),e=fm.stringExtensions.format("{0}|{1}{2}",fm.intExtensions.toString(s),n?"1":"0",r),fm.hashExtensions.containsKey(this._requestQueue,e)||(this._requestQueue[e]=[]),fm.arrayExtensions.add(this._requestQueue[e],t)},s.prototype.bind=function(){var e,t,n,s,r,i,o,a;if(r=arguments[0],e=r.getRecords(),null===e||"undefined"==typeof e||0===r.getRecords().length)throw new Error("records cannot be null.");for(t=r.getRecords(),i=0,o=t.length;o>i;i++){if(a=t[i],n=a.getKey(),null===n||"undefined"==typeof n)throw new Error("key cannot be null.");if(s=a.getValueJson(),null===s||"undefined"==typeof s)throw new Error("valueJson cannot be null.")}return this.performBind(r),this},s.prototype.checkSynchronous=function(){var e;return e=arguments[0],null!==e?e:null!==this.getSynchronous()?this.getSynchronous():!1},s.prototype.clearBoundRecords=function(){return fm.hashExtensions.clear(this._boundRecords)},s.prototype.clearSubscribedChannels=function(){return fm.hashExtensions.clear(this._subscribedChannels),fm.hashExtensions.clear(this._customOnReceives)},s.prototype.connect=function(){var e;return 1===arguments.length?(e=arguments[0],this.performConnect(e),this):0===arguments.length?this.connect(new fm.webrtc.connectArgs):void 0},s.prototype.decrementPendingRestoreStateCalls=function(){return this._pendingRestoreStateCalls--,this._pendingRestoreStateCalls},s.prototype.disconnect=function(){var e;return 0===arguments.length?this.disconnect(new fm.webrtc.disconnectArgs):1===arguments.length?(e=arguments[0],this.performDisconnect(e),this):void 0},s.prototype.doLongPolling=function(){return this._connectionType=fm.webrtc.connectionType.LongPolling,this._streamRequestTransfer=fm.webrtc.messageTransferFactory.getHttpMessageTransfer(),this.activateStream(this._connectArgs,this._responseArgs)},s.prototype.endBatch=function(){var e;return e=!1,this._batchCounter--,this._batchCounter<=0&&(this._batchCounter=0,e=!0),e&&this.processQueue(!1),this},s.prototype.getBoundRecords=function(){var e,t,n,s,r;for(t={},e=fm.hashExtensions.getKeys(this._boundRecords),n=0,s=e.length;s>n;n++)r=e[n],t[r]=this._boundRecords[r].duplicate();return t},s.prototype.getClientId=function(){return this._clientId},s.prototype.getCustomOnReceive=function(){var e;return e=arguments[0],this.getCustomOnReceiveWithTag(e,fm.stringExtensions.empty)},s.prototype.getCustomOnReceiveWithTag=function(){var e,t,n,s,r,i,o,a,u,c;if(a=arguments[0],c=arguments[1],e=a,null===e||"undefined"==typeof e)throw new Error("channel cannot be null.");return t=c,(null===t||"undefined"==typeof t)&&(c=fm.stringExtensions.empty),o=null,u=null,n=new fm.holder(u),s=fm.hashExtensions.tryGetValue(this._customOnReceives,c,n),u=n.getValue(),s?(r=new fm.holder(o),i=fm.hashExtensions.tryGetValue(u,a,r),o=r.getValue(),i||(o=null),o):o},s.prototype.getDisableWebSockets=function(){return this._disableWebSockets},s.prototype.getInstanceId=function(){return this._instanceId},s.prototype.getIsConnected=function(){return this._isConnected},s.prototype.getIsConnecting=function(){return this._isConnecting},s.prototype.getIsDisconnecting=function(){return this._isDisconnecting},s.prototype.getServerTimeout=function(){return this._serverTimeout},s.prototype.getSessionId=function(){return this._sessionId},s.prototype.getStreamRequestTimeout=function(){
return this.getRequestTimeout()+this.getServerTimeout()},s.prototype.getStreamRequestUrl=function(){return this.__streamRequestUrl},s.prototype.getSubscribedChannels=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f;if(1===arguments.length){if(f=arguments[0],h=[],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedChannels,f,e),r=e.getValue(),t||(r=null),n=r,null!==n&&"undefined"!=typeof n)for(s=fm.hashExtensions.getKeys(r),i=0,u=s.length;u>i;i++)p=s[i],fm.arrayExtensions.add(h,p);return fm.arrayExtensions.toArray(h)}if(0===arguments.length){for(h=[],e=fm.hashExtensions.getKeys(this._subscribedChannels),o=0,c=e.length;c>o;o++)for(p=e[o],t=fm.hashExtensions.getKeys(this._subscribedChannels[p]),a=0,l=t.length;l>a;a++)g=t[a],fm.arrayExtensions.add(h,g);return fm.arrayExtensions.toArray(h)}},s.prototype.getSynchronous=function(){return this._synchronous},s.prototype.getThreadId=function(){return fm.managedThread.currentThreadId()},s.prototype.getToken=function(){return this._token},s.prototype.inBatch=function(){return this._batchCounter>0},s.prototype.inCallback=function(){var e;return e=this.getThreadId(),fm.hashExtensions.containsKey(this._threadCounters,e)&&this._threadCounters[e]>0},s.prototype.maybeRaiseStateRestored=function(){var e,t;return 0===this.decrementPendingRestoreStateCalls()&&(t=this._connectArgs,e=t,null!==e&&"undefined"!=typeof e)?this.raiseStateRestored(t):void 0},s.prototype.notify=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getDataJson()))throw new Error("dataJson cannot be null.");return this.performNotify(e),this},s.prototype.performBind=function(){var e,t,n,s,r,i;return t=arguments[0],null===t.getAutoRebind()&&t.setAutoRebind(!this.inCallback()),e=new fm.webrtc.clientBindRequestArgs,e.setMethodArgs(t),this.raiseRequestEvent(fm.webrtc.client._onBindRequest,e,"OnBindRequest")?(i=this.checkSynchronous(t.getSynchronous()),r=new fm.webrtc.clientRequest,n=new fm.webrtc.message("/meta/bind"),n.setValidate(!1),n.setRecords(t.getRecords()),n.setExtensions(t.getExtensions()),r.setMessage(n),r.setCallback(this.performBindCallback),s=r,s.setDynamicValue(fm.webrtc.client._argsKey,t),this.addToQueue(s,t.getRequestUrl(),i,null!==t.getRequestTimeout()?t.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performBindCallback=function(){var e,t,n,s,r,i,o,a,u,c,l;if(l=arguments[0],i=l.getDynamicValue(fm.webrtc.client._argsKey),n=new fm.webrtc.clientBindResponseArgs,n.setMethodArgs(i),this.raiseResponseEvent(fm.webrtc.client._onBindResponse,n,"OnBindResponse",l),e=l.getException(),null!==e&&"undefined"!=typeof e){if(o=this.raiseBindFailure(i,l,!1),this.raiseBindComplete(i,l),s=new fm.webrtc.clientBindEndArgs,s.setMethodArgs(i),this.raiseCompleteEvent(fm.webrtc.client._onBindEnd,s,"OnBindEnd",l),o)return i.setIsRetry(!0),this.bind(i);if(i.getIsRebind())return this.maybeRaiseStateRestored()}else{if(i.getAutoRebind()===!0)for(fm.arrayExtensions.add(this._reconnectCache,i),t=l.getResponse().getRecords(),a=0,u=t.length;u>a;a++)c=t[a],this._rebindCache[c.getKey()]=i;if(this.addBoundRecords(l.getResponse().getRecords()),this.raiseBindSuccess(i,l),this.raiseBindComplete(i,l),r=new fm.webrtc.clientBindEndArgs,r.setMethodArgs(i),this.raiseCompleteEvent(fm.webrtc.client._onBindEnd,r,"OnBindEnd",l),i.getIsRebind())return this.maybeRaiseStateRestored()}},s.prototype.performConnect=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p;return r=arguments[0],s=new fm.webrtc.clientConnectRequestArgs,s.setMethodArgs(r),this.raiseRequestEvent(fm.webrtc.client._onConnectRequest,s,"OnConnectRequest")?this.getIsConnecting()||this.getIsConnected()?(h=this.getIsConnecting()?"Client is already connecting.":"Client is already connected.",t=new fm.webrtc.clientResponseArgs,t.setDynamicProperties(r.getDynamicProperties()),o=new fm.webrtc.message("/meta/handshake"),o.setExtensions(r.getExtensions()),o.setTimestamp(fm.dateTime.getUtcNow()),o.setSuccessful(!1),o.setError(h),t.setResponse(o),t.setException(new Error(h)),l=t,e=new fm.webrtc.clientConnectResponseArgs,e.setMethodArgs(r),this.raiseResponseEvent(fm.webrtc.client._onConnectResponse,e,"OnConnectResponse",l),this.raiseConnectFailure(r,l,!1),this.raiseConnectComplete(r,l),n=new fm.webrtc.clientConnectEndArgs,n.setMethodArgs(r),void this.raiseCompleteEvent(fm.webrtc.client._onConnectEnd,n,"OnConnectEnd",l)):(this.setIsConnecting(!0),this._connectArgs=r,i=[],this.getDisableWebSockets()||fm.arrayExtensions.add(i,fm.webrtc.connectionType.WebSocket),fm.arrayExtensions.add(i,fm.webrtc.connectionType.LongPolling),this._supportedConnectionTypes=fm.arrayExtensions.toArray(i),p=this.checkSynchronous(r.getSynchronous()),c=new fm.webrtc.clientRequest,a=new fm.webrtc.message("/meta/handshake"),a.setVersion(fm.webrtc.client._bayeuxVersion),a.setMinimumVersion(fm.webrtc.client._bayeuxMinimumVersion),a.setSupportedConnectionTypes(this._supportedConnectionTypes),a.setExtensions(r.getExtensions()),c.setMessage(a),c.setCallback(this.performConnectCallback),u=c,null!==r.getLastClientId()&&null!==r.getLastSessionId()&&(u.getMessage().setLastClientId(r.getLastClientId()),u.getMessage().setLastSessionId(r.getLastSessionId())),u.setDynamicValue(fm.webrtc.client._argsKey,r),this.send(u,r.getRequestUrl(),p,null!==r.getRequestTimeout()?r.getRequestTimeout():0)):void 0},s.prototype.performConnectCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y,_,b,v,R,C,w,S,O,x,E;if(v=arguments[0],h=v.getDynamicValue(fm.webrtc.client._argsKey),a=new fm.webrtc.clientConnectResponseArgs,a.setMethodArgs(h),this.raiseResponseEvent(fm.webrtc.client._onConnectResponse,a,"OnConnectResponse",v),e=v.getException(),null===e||"undefined"==typeof e){for(this.setClientId(v.getResponse().getClientId()),w=v.getResponse().getSessionId(),null!==w&&this.setSessionId(w),C=v.getResponse().getServerTimeout(),null!==C?this.setServerTimeout(C):this.setServerTimeout(25e3),f=2147483647,t=v.getResponse().getSupportedConnectionTypes(),m=0,y=t.length;y>m;m++)for(E=t[m],g=0;g<this._supportedConnectionTypes.length;)try{if(this._supportedConnectionTypes[g]===E){f>g&&(f=g);break}}finally{g++}0>f||f>this._supportedConnectionTypes.length?v.setException(new Error("Could not negotiate a connection type with the server.")):this._connectionType=this._supportedConnectionTypes[f]}if(n=v.getException(),null===n||"undefined"==typeof n){for(this._lastBackoffIndex=-1,this._lastBackoffTimeout=0,b=[],fm.arrayExtensions.addRange(b,this._reconnectCache),fm.arrayExtensions.clear(this._reconnectCache),fm.hashExtensions.clear(this._rebindCache),fm.hashExtensions.clear(this._resubscribeCache),this._pendingRestoreStateCalls=fm.arrayExtensions.getCount(b),s=b,d=0,_=s.length;_>d;d++)if(p=s[d],l=fm.global.tryCast(p,fm.webrtc.bindArgs),r=l,null!==r&&"undefined"!=typeof r)l.setIsRetry(!1),l.setIsRebind(!0),this.bind(l);else if(O=fm.global.tryCast(p,fm.webrtc.subscribeArgs),i=O,null!==i&&"undefined"!=typeof i){O.setIsRetry(!1),O.setIsResubscribe(!0),this.subscribe(O);continue}if(this.setIsConnecting(!1),this.setIsConnected(!0),this._responseArgs=v,this._connectionType!==fm.webrtc.connectionType.WebSocket||this.getDisableWebSockets())return this.doLongPolling();if(!this.tryWebSocket())return this.doLongPolling()}else{switch(this.setIsConnecting(!1),R=!1,h.getRetryMode()){case fm.webrtc.connectRetryMode.Aggressive:R=!0;break;case fm.webrtc.connectRetryMode.Intelligent:R=v.getErrorCode()<800||v.getErrorCode()>899}if(R=this.raiseConnectFailure(h,v,R),this.raiseConnectComplete(h,v),c=new fm.webrtc.clientConnectEndArgs,c.setMethodArgs(h),this.raiseCompleteEvent(fm.webrtc.client._onConnectEnd,c,"OnConnectEnd",v),R)return x=0,o=h.getRetryBackoff(),null!==o&&"undefined"!=typeof o&&(u=new fm.webrtc.backoffArgs,u.setIndex(this._lastBackoffIndex+1),u.setLastTimeout(this._lastBackoffTimeout),x=h.getRetryBackoff()(u)),x>0?(S=new fm.webrtc.deferredRetryConnectState,S.setConnectArgs(h),S.setBackoffTimeout(x),fm.deferrer.defer(this.retryConnectDeferred,x,S)):this.retryConnect(h,x)}},s.prototype.performDisconnect=function(){var e,t,n,s,r,i,o,a,u,c,l,h;return r=arguments[0],s=new fm.webrtc.clientDisconnectRequestArgs,s.setMethodArgs(r),this.raiseRequestEvent(fm.webrtc.client._onDisconnectRequest,s,"OnDisconnectRequest")?this.getIsDisconnecting()||!this.getIsConnected()?(l=this.getIsDisconnecting()?"Client is already disconnecting.":"Client is already disconnected.",t=new fm.webrtc.clientResponseArgs,t.setDynamicProperties(r.getDynamicProperties()),i=new fm.webrtc.message("/meta/handshake"),i.setExtensions(r.getExtensions()),i.setTimestamp(fm.dateTime.getUtcNow()),i.setSuccessful(!1),i.setError(l),t.setResponse(i),t.setException(new Error(l)),c=t,e=new fm.webrtc.clientDisconnectResponseArgs,e.setMethodArgs(r),this.raiseResponseEvent(fm.webrtc.client._onDisconnectResponse,e,"OnDisonnectResponse",c),this.raiseDisconnectComplete(r,c),n=new fm.webrtc.clientDisconnectEndArgs,n.setMethodArgs(r),void this.raiseCompleteEvent(fm.webrtc.client._onDisconnectEnd,n,"OnDisconnectEnd",c)):(this.setIsDisconnecting(!0),h=this.checkSynchronous(r.getSynchronous()),u=new fm.webrtc.clientRequest,o=new fm.webrtc.message("/meta/disconnect"),o.setExtensions(r.getExtensions()),u.setMessage(o),u.setCallback(this.performDisconnectCallback),a=u,a.setDynamicValue(fm.webrtc.client._argsKey,r),this.addToQueue(a,r.getRequestUrl(),h,null!==r.getRequestTimeout()?r.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performDisconnectCallback=function(){var e,t,n,s,r,i,o,a;a=arguments[0],r=a.getDynamicValue(fm.webrtc.client._argsKey),n=new fm.webrtc.clientDisconnectResponseArgs,n.setMethodArgs(r),this.raiseResponseEvent(fm.webrtc.client._onDisconnectResponse,n,"OnDisconnectResponse",a),this.raiseForcedUnsubscribes(r,a),this.raiseForcedUnbinds(r,a),this.clearBoundRecords(),this.clearSubscribedChannels(),this.setIsDisconnecting(!1),this.setIsConnected(!1),this._webSocketOpened=!1;try{e=this._requestTransfer,null!==e&&"undefined"!=typeof e&&this._requestTransfer.shutdown(),t=this._streamRequestTransfer,null!==t&&"undefined"!=typeof t&&this._streamRequestTransfer.shutdown()}catch(i){o=i}finally{}return this.raiseDisconnectComplete(r,a),this._queueActivated=!1,s=new fm.webrtc.clientDisconnectEndArgs,s.setMethodArgs(r),this.raiseCompleteEvent(fm.webrtc.client._onDisconnectEnd,s,"OnDisconnectEnd",a)},s.prototype.performNotify=function(){var e,t,n,s,r,i;return n=arguments[0],e=new fm.webrtc.clientNotifyRequestArgs,e.setMethodArgs(n),this.raiseRequestEvent(fm.webrtc.client._onNotifyRequest,e,"OnNotifyRequest")?(i=this.checkSynchronous(n.getSynchronous()),r=new fm.webrtc.clientRequest,t=new fm.webrtc.message("/meta/notify"),t.setValidate(!1),t.setDataJson(n.getDataJson()),t.setExtensions(n.getExtensions()),r.setMessage(t),r.setCallback(this.performNotifyCallback),s=r,s.setDynamicValue(fm.webrtc.client._argsKey,n),this.addToQueue(s,n.getRequestUrl(),i,null!==n.getRequestTimeout()?n.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performNotifyCallback=function(){var e,t,n,s,r,i,o;return o=arguments[0],r=o.getDynamicValue(fm.webrtc.client._argsKey),t=new fm.webrtc.clientNotifyResponseArgs,t.setMethodArgs(r),this.raiseResponseEvent(fm.webrtc.client._onNotifyResponse,t,"OnNotifyResponse",o),e=o.getException(),null===e||"undefined"==typeof e?(this.raiseNotifySuccess(r,o),this.raiseNotifyComplete(r,o),s=new fm.webrtc.clientNotifyEndArgs,s.setMethodArgs(r),this.raiseCompleteEvent(fm.webrtc.client._onNotifyEnd,s,"OnNotifyEnd",o)):(i=this.raiseNotifyFailure(r,o,!1),this.raiseNotifyComplete(r,o),n=new fm.webrtc.clientNotifyEndArgs,n.setMethodArgs(r),this.raiseCompleteEvent(fm.webrtc.client._onNotifyEnd,n,"OnNotifyEnd",o),i?(r.setIsRetry(!0),this.notify(r)):void 0)},s.prototype.performPublish=function(){var e,t,n,s,r,i;return n=arguments[0],e=new fm.webrtc.clientPublishRequestArgs,e.setMethodArgs(n),this.raiseRequestEvent(fm.webrtc.client._onPublishRequest,e,"OnPublishRequest")?(i=this.checkSynchronous(n.getSynchronous()),r=new fm.webrtc.clientRequest,t=new fm.webrtc.message(n.getChannel()),t.setValidate(!1),t.setDataJson(n.getDataJson()),t.setExtensions(n.getExtensions()),r.setMessage(t),r.setCallback(this.performPublishCallback),s=r,s.setDynamicValue(fm.webrtc.client._argsKey,n),this.addToQueue(s,n.getRequestUrl(),i,null!==n.getRequestTimeout()?n.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performPublishCallback=function(){var e,t,n,s,r,i,o;return o=arguments[0],r=o.getDynamicValue(fm.webrtc.client._argsKey),t=new fm.webrtc.clientPublishResponseArgs,t.setMethodArgs(r),this.raiseResponseEvent(fm.webrtc.client._onPublishResponse,t,"OnPublishResponse",o),e=o.getException(),null===e||"undefined"==typeof e?(this.raisePublishSuccess(r,o),this.raisePublishComplete(r,o),s=new fm.webrtc.clientPublishEndArgs,s.setMethodArgs(r),this.raiseCompleteEvent(fm.webrtc.client._onPublishEnd,s,"OnPublishEnd",o)):(i=this.raisePublishFailure(r,o,!1),this.raisePublishComplete(r,o),n=new fm.webrtc.clientPublishEndArgs,n.setMethodArgs(r),this.raiseCompleteEvent(fm.webrtc.client._onPublishEnd,n,"OnPublishEnd",o),i?(r.setIsRetry(!0),this.publish(r)):void 0)},s.prototype.performService=function(){var e,t,n,s,r,i;return r=arguments[0],e=new fm.webrtc.clientServiceRequestArgs,e.setMethodArgs(r),this.raiseRequestEvent(fm.webrtc.client._onServiceRequest,e,"OnServiceRequest")?(i=this.checkSynchronous(r.getSynchronous()),s=new fm.webrtc.clientRequest,t=new fm.webrtc.message(fm.webrtc.metaChannels.convertChannelToServiced(r.getChannel())),t.setValidate(!1),t.setDataJson(r.getDataJson()),t.setExtensions(r.getExtensions()),s.setMessage(t),s.setCallback(this.performServiceCallback),n=s,n.setDynamicValue(fm.webrtc.client._argsKey,r),this.addToQueue(n,r.getRequestUrl(),i,null!==r.getRequestTimeout()?r.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performServiceCallback=function(){var e,t,n,s,r,i,o;return o=arguments[0],r=o.getDynamicValue(fm.webrtc.client._argsKey),t=new fm.webrtc.clientServiceResponseArgs,t.setMethodArgs(r),this.raiseResponseEvent(fm.webrtc.client._onServiceResponse,t,"OnServiceResponse",o),e=o.getException(),null===e||"undefined"==typeof e?(this.raiseServiceSuccess(r,o),this.raiseServiceComplete(r,o),s=new fm.webrtc.clientServiceEndArgs,s.setMethodArgs(r),this.raiseCompleteEvent(fm.webrtc.client._onServiceEnd,s,"OnServiceEnd",o)):(i=this.raiseServiceFailure(r,o,!1),this.raiseServiceComplete(r,o),n=new fm.webrtc.clientServiceEndArgs,n.setMethodArgs(r),this.raiseCompleteEvent(fm.webrtc.client._onServiceEnd,n,"OnServiceEnd",o),i?(r.setIsRetry(!0),this.service(r)):void 0)},s.prototype.performSubscribe=function(){var e,t,n,s,r,i;return r=arguments[0],null===r.getAutoResubscribe()&&r.setAutoResubscribe(!this.inCallback()),e=new fm.webrtc.clientSubscribeRequestArgs,e.setMethodArgs(r),this.raiseRequestEvent(fm.webrtc.client._onSubscribeRequest,e,"OnSubscribeRequest")?(i=this.checkSynchronous(r.getSynchronous()),s=new fm.webrtc.clientRequest,t=new fm.webrtc.message("/meta/subscribe"),t.setValidate(!1),t.setChannels(r.getChannels()),t.setExtensions(r.getExtensions()),s.setMessage(t),s.setCallback(this.performSubscribeCallback),n=s,n.setDynamicValue(fm.webrtc.client._argsKey,r),this.addToQueue(n,r.getRequestUrl(),i,null!==r.getRequestTimeout()?r.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performSubscribeCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g;if(p=arguments[0],o=p.getDynamicValue(fm.webrtc.client._argsKey),s=new fm.webrtc.clientSubscribeResponseArgs,s.setMethodArgs(o),this.raiseResponseEvent(fm.webrtc.client._onSubscribeResponse,s,"OnSubscribeResponse",p),e=p.getException(),null!==e&&"undefined"!=typeof e){if(a=this.raiseSubscribeFailure(o,p,!1),this.raiseSubscribeComplete(o,p),r=new fm.webrtc.clientSubscribeEndArgs,r.setMethodArgs(o),this.raiseCompleteEvent(fm.webrtc.client._onSubscribeEnd,r,"OnSubscribeEnd",p),a)return o.setIsRetry(!0),this.subscribe(o);if(o.getIsResubscribe())return this.maybeRaiseStateRestored()}else{if(o.getAutoResubscribe()===!0)for(fm.arrayExtensions.add(this._reconnectCache,o),t=p.getResponse().getChannels(),u=0,l=t.length;l>u;u++)g=t[u],this._resubscribeCache[fm.webrtc.client.getSubscribeKey(g,o.getTag())]=o;for(n=p.getResponse().getChannels(),c=0,h=n.length;h>c;c++)g=n[c],this._subscribedDynamicProperties[fm.webrtc.client.getSubscribeKey(g,o.getTag())]=o.getDynamicProperties();if(this.addSubscribedChannels(p.getResponse().getTag(),p.getResponse().getChannels()),this.raiseSubscribeSuccess(o,p),this.raiseSubscribeComplete(o,p),this.addSubscribedOnReceive(p.getResponse().getTag(),p.getResponse().getChannels(),o.getOnReceive(),o.getDynamicProperties(),this._lastInterval),i=new fm.webrtc.clientSubscribeEndArgs,i.setMethodArgs(o),this.raiseCompleteEvent(fm.webrtc.client._onSubscribeEnd,i,"OnSubscribeEnd",p),o.getIsResubscribe())return this.maybeRaiseStateRestored()}},s.prototype.performUnbind=function(){var e,t,n,s,r,i;return i=arguments[0],e=new fm.webrtc.clientUnbindRequestArgs,e.setMethodArgs(i),this.raiseRequestEvent(fm.webrtc.client._onUnbindRequest,e,"OnUnbindRequest")?(r=this.checkSynchronous(i.getSynchronous()),s=new fm.webrtc.clientRequest,t=new fm.webrtc.message("/meta/unbind"),t.setValidate(!1),t.setRecords(i.getRecords()),t.setExtensions(i.getExtensions()),s.setMessage(t),s.setCallback(this.performUnbindCallback),n=s,n.setDynamicValue(fm.webrtc.client._argsKey,i),this.addToQueue(n,i.getRequestUrl(),r,null!==i.getRequestTimeout()?i.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performUnbindCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d;if(d=arguments[0],c=d.getDynamicValue(fm.webrtc.client._argsKey),i=new fm.webrtc.clientUnbindResponseArgs,i.setMethodArgs(c),this.raiseResponseEvent(fm.webrtc.client._onUnbindResponse,i,"OnUnbindResponse",d),e=d.getException(),null===e||"undefined"==typeof e){for(t=d.getResponse().getRecords(),p=0,g=t.length;g>p;p++)if(m=t[p],a=null,n=new fm.holder(a),s=fm.hashExtensions.tryGetValue(this._rebindCache,m.getKey(),n),a=n.getValue(),s||(a=null),r=a,null!==r&&"undefined"!=typeof r){for(f=[],h=0;h<fm.arrayExtensions.getCount(f);)try{f[h].getKey()===m.getKey()&&(f.removeAt(h),h--)}finally{h++}a.setRecords(fm.arrayExtensions.toArray(f)),fm.hashExtensions.remove(this._rebindCache,m.getKey()),fm.hashExtensions.containsValue(this._rebindCache,a)||fm.arrayExtensions.remove(this._reconnectCache,a)}return this.removeBoundRecords(d.getResponse().getRecords()),this.raiseUnbindSuccess(c,d,!1),this.raiseUnbindComplete(c,d,!1),u=new fm.webrtc.clientUnbindEndArgs,u.setMethodArgs(c),this.raiseCompleteEvent(fm.webrtc.client._onUnbindEnd,u,"OnUnbindEnd",d)}return l=this.raiseUnbindFailure(c,d,!1),this.raiseUnbindComplete(c,d,!1),o=new fm.webrtc.clientUnbindEndArgs,o.setMethodArgs(c),this.raiseCompleteEvent(fm.webrtc.client._onUnbindEnd,o,"OnUnbindEnd",d),l?(c.setIsRetry(!0),this.unbind(c)):void 0},s.prototype.performUnsubscribe=function(){var e,t,n,s,r,i;return i=arguments[0],e=new fm.webrtc.clientUnsubscribeRequestArgs,e.setMethodArgs(i),this.raiseRequestEvent(fm.webrtc.client._onUnsubscribeRequest,e,"OnUnsubscribeRequest")?(r=this.checkSynchronous(i.getSynchronous()),s=new fm.webrtc.clientRequest,t=new fm.webrtc.message("/meta/unsubscribe"),t.setValidate(!1),t.setChannels(i.getChannels()),t.setExtensions(i.getExtensions()),s.setMessage(t),s.setCallback(this.performUnsubscribeCallback),n=s,n.setDynamicValue(fm.webrtc.client._argsKey,i),this.addToQueue(n,i.getRequestUrl(),r,null!==i.getRequestTimeout()?i.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performUnsubscribeCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d;if(f=arguments[0],c=f.getDynamicValue(fm.webrtc.client._argsKey),i=new fm.webrtc.clientUnsubscribeResponseArgs,i.setMethodArgs(c),this.raiseResponseEvent(fm.webrtc.client._onUnsubscribeResponse,i,"OnUnsubscribeResponse",f),e=f.getException(),null===e||"undefined"==typeof e){for(t=f.getResponse().getChannels(),h=0,p=t.length;p>h;h++)m=t[h],a=null,d=fm.webrtc.client.getSubscribeKey(m,c.getTag()),n=new fm.holder(a),s=fm.hashExtensions.tryGetValue(this._resubscribeCache,d,n),a=n.getValue(),s||(a=null),r=a,null!==r&&"undefined"!=typeof r&&(g=[],fm.arrayExtensions.remove(g,m),a.setChannels(fm.arrayExtensions.toArray(g)),fm.hashExtensions.remove(this._resubscribeCache,d),fm.hashExtensions.containsValue(this._resubscribeCache,a)||fm.arrayExtensions.remove(this._reconnectCache,a));return this.removeSubscribedChannels(f.getResponse().getTag(),f.getResponse().getChannels()),this.removeSubscribedOnReceive(f.getResponse().getTag(),f.getResponse().getChannels()),this.raiseUnsubscribeSuccess(c,f,!1),this.raiseUnsubscribeComplete(c,f,!1),u=new fm.webrtc.clientUnsubscribeEndArgs,u.setMethodArgs(c),this.raiseCompleteEvent(fm.webrtc.client._onUnsubscribeEnd,u,"OnUnsubscribeEnd",f)}return l=this.raiseUnsubscribeFailure(c,f,!1),this.raiseUnsubscribeComplete(c,f,!1),o=new fm.webrtc.clientUnsubscribeEndArgs,o.setMethodArgs(c),this.raiseCompleteEvent(fm.webrtc.client._onUnsubscribeEnd,o,"OnUnsubscribeEnd",f),l?(c.setIsRetry(!0),this.unsubscribe(c)):void 0},s.prototype.postRaise=function(){var e,t;return t=arguments[0],this.getConcurrencyMode()===fm.webrtc.concurrencyMode.Low?(e=this._threadCounters[t],1===e?fm.hashExtensions.remove(this._threadCounters,t):this._threadCounters[t]=e-1):(e=this._threadCounters[t],this._threadCounters[t]=e-1)},s.prototype.preRaise=function(){var e,t;return t=arguments[0],e=0,fm.hashExtensions.containsKey(this._threadCounters,t)&&(e=this._threadCounters[t]),this._threadCounters[t]=e+1},s.prototype.processAdvice=function(){var e;return e=arguments[0],null!==e.getInterval()&&(this._lastInterval=e.getInterval()),null!==e.getReconnect()?this._lastReconnect=e.getReconnect():void 0},s.prototype.processPendingReceives=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g;for(i=arguments[0],p=arguments[1],e=i,o=0,u=e.length;u>o;o++)if(g=e[o],l=null,t=new fm.holder(l),n=fm.hashExtensions.tryGetValue(this._pendingReceives,g,t),l=t.getValue(),n&&fm.hashExtensions.remove(this._pendingReceives,g),s=l,null!==s&&"undefined"!=typeof s)for(r=l,a=0,c=r.length;c>a;a++)h=r[a],p=this.receiveMessage(h,p);return p},s.prototype.processQueue=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g;if(t=arguments[0],t&&(this._queueActivated=!0),this._queueActivated&&!this.inBatch()){for(i=this._requestQueue,this._requestQueue={},e=fm.hashExtensions.getKeys(i),a=[],s=0,r=e.length;r>s;s++)c=e[s],n=fm.stringExtensions.indexOf(c,"|"),u=fm.stringExtensions.substring(c,0,n),l=c.substring(n+1),p=fm.parseAssistant.parseIntegerValue(u),h="1"===fm.stringExtensions.substring(l,0,1),g=l.substring(1),o=fm.arrayExtensions.toArray(i[c]),a.push(this.sendMany(o,g,h,p));return a}},s.prototype.processRequestUrl=function(){var e,t,n,s,r;if(s=arguments[0],fm.stringExtensions.isNullOrEmpty(s)&&(s=this.getRequestUrl()),n=!1,r=null,this.getConcurrencyMode()===fm.webrtc.concurrencyMode.High&&(e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(fm.webrtc.client._requestUrlCache,s,e),r=e.getValue(),n=t),!n){if(r=s,r=fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(r,"token",this.getToken()),"src",fm.httpWebRequestTransfer.getPlatformCode()),"AspxAutoDetectCookieSupport","1"),this.getConcurrencyMode()!==fm.webrtc.concurrencyMode.High)return r;fm.webrtc.client._requestUrlCache[s]=r}return r},s.prototype.processServerAction=function(){var e,t,n,s;if(s=arguments[0],n=arguments[1],"/meta/bind"===s.getBayeuxChannel())return this.addBoundRecords(s.getRecords()),this.raiseServerBind(s),n;if("/meta/unbind"===s.getBayeuxChannel())return this.removeBoundRecords(s.getRecords()),this.raiseServerUnbind(s),n;if("/meta/subscribe"===s.getBayeuxChannel()){if(this.addSubscribedChannels(s.getTag(),s.getChannels()),t=this.raiseServerSubscribe(s),e=t,null===e||"undefined"==typeof e)throw new Error(fm.stringExtensions.format("The server subscribed the client to [{0}], but the client did not supply a callback to handle received messages. A callback must be specified in the client's OnServerSubscribe event.",fm.stringExtensions.join(", ",s.getChannels())));return n=this.addSubscribedOnReceive(s.getTag(),s.getChannels(),t,s.getDynamicProperties(),n)}return"/meta/unsubscribe"===s.getBayeuxChannel()&&(this.removeSubscribedChannels(s.getTag(),s.getChannels()),this.raiseServerUnsubscribe(s),this.removeSubscribedOnReceive(s.getTag(),s.getChannels())),n},s.prototype.publish=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getChannel()))throw new Error("channel cannot be null.");if(fm.stringExtensions.isNullOrEmpty(e.getDataJson()))throw new Error("dataJson cannot be null.");return this.performPublish(e),this},s.prototype.raiseAction=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],this.raiseActionManual(t,e,n,!1)},s.prototype.raiseActionManual=function(){var e,t,n,s,r,i,o,a,u,c;if(t=arguments[0],e=arguments[1],u=arguments[2],a=arguments[3])try{return t(e)}catch(n){if(i=n,r=i,!this.raiseUnhandledException(r))return fm.asyncException.asyncThrow(r,u)}finally{}else{c=this.getThreadId(),this.preRaise(c);try{return t(e)}catch(s){if(o=s,r=o,!this.raiseUnhandledException(r))return fm.asyncException.asyncThrow(r,u)}finally{this.postRaise(c)}}},s.prototype.raiseBindComplete=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.webrtc.bindCompleteArgs,s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),r)),s.setIsRebind(r.getIsRebind()),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onBindComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnBindComplete"),t=r.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnComplete(),n,"Client -> Bind -> OnComplete"):void 0},s.prototype.raiseBindFailure=function(){var e,t,n,s,r,i,o,a;return r=arguments[0],o=arguments[1],a=arguments[2],s=new fm.webrtc.bindFailureArgs,s.__records=fm.webrtc.client.getRecordsForBind(o.getResponse(),r),s.setException(o.getException()),s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),r)),s.setIsRebind(r.getIsRebind()),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onBindFailure,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnBindFailure"),t=r.getOnFailure(),null!==t&&"undefined"!=typeof t&&(a=this.raiseRetriable(r.getOnFailure(),a,n,"Client -> Bind -> OnFailure")),a},s.prototype.raiseBindSuccess=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.webrtc.bindSuccessArgs,s.__records=fm.webrtc.client.getRecordsForBind(o.getResponse(),r),s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),r)),s.setIsRebind(r.getIsRebind()),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onBindSuccess,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnBindSuccess"),t=r.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnSuccess(),n,"Client -> Bind -> OnSuccess"):void 0},s.prototype.raiseCompleteEvent=function(){var e,t,n,s;return t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3],e.setException(s.getException()),e.setResponse(s.getResponse()),this.raiseEvent(t,e,n)},s.prototype.raiseConnectComplete=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.webrtc.connectCompleteArgs,s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),r)),s.setIsReconnect(r.getIsReconnect()),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onConnectComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnConnectComplete"),t=r.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnComplete(),n,"Client -> Connect -> OnComplete"):void 0},s.prototype.raiseConnectFailure=function(){var e,t,n,s,r,i,o,a;return r=arguments[0],o=arguments[1],a=arguments[2],s=new fm.webrtc.connectFailureArgs,s.setException(o.getException()),s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),r)),s.setIsReconnect(r.getIsReconnect()),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onConnectFailure,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnConnectFailure"),t=r.getOnFailure(),null!==t&&"undefined"!=typeof t&&(a=this.raiseRetriable(r.getOnFailure(),a,n,"Client -> Connect -> OnFailure")),a},s.prototype.raiseConnectSuccess=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.webrtc.connectSuccessArgs,s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),r)),s.setConnectionType(this._connectionType),s.setIsReconnect(r.getIsReconnect()),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onConnectSuccess,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnConnectSuccess"),t=r.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnSuccess(),n,"Client -> Connect -> OnSuccess"):void 0},s.prototype.raiseDisconnectComplete=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.webrtc.disconnectCompleteArgs,s.setException(o.getException()),s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),r)),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onDisconnectComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnDisconnectComplete"),t=r.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnComplete(),n,"Client -> Disconnect -> OnComplete"):void 0},s.prototype.raiseEvent=function(){var e,t,n,s,r,i;if(s=arguments[0],t=arguments[1],r=arguments[2],t.setClient(this),e=s,null!==e&&"undefined"!=typeof e)try{return s(this,t)}catch(n){if(i=n,!this.raiseUnhandledException(i))return fm.asyncException.asyncThrow(i,fm.stringExtensions.format("Client -> {0}",r))}finally{}},s.prototype.raiseForcedUnbinds=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p;for(s=arguments[0],l=arguments[1],c=[],e=fm.hashExtensions.getKeys(this._boundRecords),i=0,a=e.length;a>i;i++)p=e[i],r=new fm.webrtc.unbindArgs([this._boundRecords[p]]),r.setRequestUrl(s.getRequestUrl()),r.setSynchronous(s.getSynchronous()),r.setIsRetry(s.getIsRetry()),r.setExtensions(fm.webrtc.client.getExtensions(l.getResponse(),s)),r.setDynamicProperties(s.getDynamicProperties()),fm.arrayExtensions.add(c,r);for(t=c,h=[],o=0,u=t.length;u>o;o++)n=t[o],this.raiseUnbindSuccess(n,l,!0),h.push(this.raiseUnbindComplete(n,l,!0));return h},s.prototype.raiseForcedUnsubscribes=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d;for(r=arguments[0],g=arguments[1],p=[],e=fm.hashExtensions.getKeys(this._subscribedChannels),o=0,c=e.length;c>o;o++)for(m=e[o],t=fm.hashExtensions.getKeys(this._subscribedChannels[m]),a=0,l=t.length;l>a;a++)d=t[a],i=new fm.webrtc.unsubscribeArgs([d],m),i.setRequestUrl(r.getRequestUrl()),i.setSynchronous(r.getSynchronous()),i.setIsRetry(r.getIsRetry()),i.setExtensions(fm.webrtc.client.getExtensions(g.getResponse(),r)),i.setDynamicProperties(r.getDynamicProperties()),fm.arrayExtensions.add(p,i);for(n=p,f=[],u=0,h=n.length;h>u;u++)s=n[u],this.raiseUnsubscribeSuccess(s,g,!0),f.push(this.raiseUnsubscribeComplete(s,g,!0));return f},s.prototype.raiseFunction=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],this.raiseFunctionManual(t,e,n,!1)},s.prototype.raiseFunctionManual=function(){
var e,t,n,s,r,i,o,a,u,c,l;if(t=arguments[0],e=arguments[1],c=arguments[2],u=arguments[3])try{return t(e)}catch(n){return i=n,r=i,this.raiseUnhandledException(r)||fm.asyncException.asyncThrow(r,c),null}finally{}l=this.getThreadId(),this.preRaise(l);try{a=t(e)}catch(s){o=s,r=o,this.raiseUnhandledException(r)||fm.asyncException.asyncThrow(r,c),a=null}finally{this.postRaise(l)}return a},s.prototype.raiseNotifyComplete=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.webrtc.notifyCompleteArgs,s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),r)),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onNotifyComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnNotifyComplete"),t=r.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnComplete(),n,"Client -> Notify -> OnComplete"):void 0},s.prototype.raiseNotifyDelivery=function(){var e,t,n,s,r,i;return s=arguments[0],i=arguments[1],r=arguments[2],n=new fm.webrtc.notifyReceiveArgs(i.__dataJson,i.__dataBytes,this._connectionType,r),n.setExtensions(i.getExtensions()),n.setTimestamp(fm.webrtc.client.getTimestamp(i)),n.setClient(this),t=n,e=s,null!==e&&"undefined"!=typeof e&&this.raiseActionManual(s,t,"Client -> OnNotify",!0),t.getReconnectAfter()},s.prototype.raiseNotifyFailure=function(){var e,t,n,s,r,i,o,a;return r=arguments[0],o=arguments[1],a=arguments[2],s=new fm.webrtc.notifyFailureArgs,s.__dataJson=fm.webrtc.client.getDataJsonForNotify(o.getResponse(),r),s.__dataBytes=fm.webrtc.client.getDataBytesForNotify(o.getResponse(),r),s.setException(o.getException()),s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),r)),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onNotifyFailure,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnNotifyFailure"),t=r.getOnFailure(),null!==t&&"undefined"!=typeof t&&(a=this.raiseRetriable(r.getOnFailure(),a,n,"Client -> Notify -> OnFailure")),a},s.prototype.raiseNotifySuccess=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.webrtc.notifySuccessArgs,s.__dataJson=fm.webrtc.client.getDataJsonForNotify(o.getResponse(),r),s.__dataBytes=fm.webrtc.client.getDataBytesForNotify(o.getResponse(),r),s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),r)),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onNotifySuccess,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnNotifySuccess"),t=r.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnSuccess(),n,"Client -> Notify -> OnSuccess"):void 0},s.prototype.raisePublishComplete=function(){var e,t,n,s,r,i,o;return i=arguments[0],o=arguments[1],s=new fm.webrtc.publishCompleteArgs,s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),i)),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(i.getDynamicProperties()),n=s,r=this._onPublishComplete,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnPublishComplete"),t=i.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(i.getOnComplete(),n,"Client -> Publish -> OnComplete"):void 0},s.prototype.raisePublishFailure=function(){var e,t,n,s,r,i,o,a;return i=arguments[0],o=arguments[1],a=arguments[2],s=new fm.webrtc.publishFailureArgs,s.__channel=fm.webrtc.client.getChannelForPublish(o.getResponse(),i),s.__dataJson=fm.webrtc.client.getDataJsonForPublish(o.getResponse(),i),s.__dataBytes=fm.webrtc.client.getDataBytesForPublish(o.getResponse(),i),s.setException(o.getException()),s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),i)),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(i.getDynamicProperties()),n=s,r=this._onPublishFailure,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnPublishFailure"),t=i.getOnFailure(),null!==t&&"undefined"!=typeof t&&(a=this.raiseRetriable(i.getOnFailure(),a,n,"Client -> Publish -> OnFailure")),a},s.prototype.raisePublishSuccess=function(){var e,t,n,s,r,i,o;return i=arguments[0],o=arguments[1],s=new fm.webrtc.publishSuccessArgs,s.__channel=fm.webrtc.client.getChannelForPublish(o.getResponse(),i),s.__dataJson=fm.webrtc.client.getDataJsonForPublish(o.getResponse(),i),s.__dataBytes=fm.webrtc.client.getDataBytesForPublish(o.getResponse(),i),s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),i)),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(i.getDynamicProperties()),n=s,r=this._onPublishSuccess,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnPublishSuccess"),t=i.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(i.getOnSuccess(),n,"Client -> Publish -> OnSuccess"):void 0},s.prototype.raiseRequestEvent=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],this.raiseEvent(t,e,n),!e.getCancel()},s.prototype.raiseResponseEvent=function(){var e,t,n,s;return t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3],e.setException(s.getException()),e.setResponse(s.getResponse()),this.raiseEvent(t,e,n)},s.prototype.raiseRetriable=function(){var e,t,n,s;return t=arguments[0],n=arguments[1],e=arguments[2],s=arguments[3],e.setRetry(n),this.raiseAction(t,e,s),e.getRetry()},s.prototype.raiseSendException=function(){var e,t,n,s,r,i,o,a;for(a=arguments[0],t=arguments[1],e=a.getRequests(),o=[],n=0,s=e.length;s>n;n++)i=e[n],r=new fm.webrtc.clientResponseArgs,r.setDynamicProperties(i.getDynamicProperties()),r.setException(t),o.push(i.getCallback()(r));return o},s.prototype.raiseServerBind=function(){var e,t,n,s;return s=arguments[0],n=this._onServerBind,e=n,null!==e&&"undefined"!=typeof e?(t=new fm.webrtc.serverBindArgs,t.__records=s.getRecords(),t.setExtensions(s.getExtensions()),t.setTimestamp(s.getTimestamp()),t.setClient(this),this.raiseAction(n,t,"Client -> OnServerBind")):void 0},s.prototype.raiseServerSubscribe=function(){var e,t,n,s;return s=arguments[0],n=this._onServerSubscribe,e=n,null!==e&&"undefined"!=typeof e?(t=new fm.webrtc.serverSubscribeArgs,t.__channels=s.getChannels(),t.setExtensions(s.getExtensions()),t.setTimestamp(s.getTimestamp()),t.setClient(this),this.raiseFunction(n,t,"Client -> OnServerSubscribe")):null},s.prototype.raiseServerUnbind=function(){var e,t,n,s;return s=arguments[0],n=this._onServerUnbind,e=n,null!==e&&"undefined"!=typeof e?(t=new fm.webrtc.serverUnbindArgs,t.__records=s.getRecords(),t.setExtensions(s.getExtensions()),t.setTimestamp(s.getTimestamp()),t.setClient(this),this.raiseAction(n,t,"Client -> OnServerUnbind")):void 0},s.prototype.raiseServerUnsubscribe=function(){var e,t,n,s;return s=arguments[0],n=this._onServerUnsubscribe,e=n,null!==e&&"undefined"!=typeof e?(t=new fm.webrtc.serverUnsubscribeArgs,t.__channels=s.getChannels(),t.setExtensions(s.getExtensions()),t.setTimestamp(s.getTimestamp()),t.setClient(this),this.raiseAction(n,t,"Client -> OnServerUnsubscribe")):void 0},s.prototype.raiseServiceComplete=function(){var e,t,n,s,r,i,o;return o=arguments[0],i=arguments[1],s=new fm.webrtc.serviceCompleteArgs,s.setExtensions(fm.webrtc.client.getExtensions(i.getResponse(),o)),s.setTimestamp(fm.webrtc.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(o.getDynamicProperties()),n=s,r=this._onServiceComplete,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnServiceComplete"),t=o.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(o.getOnComplete(),n,"Client -> Service -> OnComplete"):void 0},s.prototype.raiseServiceFailure=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],i=arguments[1],o=arguments[2],s=new fm.webrtc.serviceFailureArgs,s.__channel=fm.webrtc.client.getChannelForService(i.getResponse(),a),s.__dataJson=fm.webrtc.client.getDataJsonForService(i.getResponse(),a),s.__dataBytes=fm.webrtc.client.getDataBytesForService(i.getResponse(),a),s.setException(i.getException()),s.setExtensions(fm.webrtc.client.getExtensions(i.getResponse(),a)),s.setTimestamp(fm.webrtc.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),n=s,r=this._onServiceFailure,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnServiceFailure"),t=a.getOnFailure(),null!==t&&"undefined"!=typeof t&&(o=this.raiseRetriable(a.getOnFailure(),o,n,"Client -> Service -> OnFailure")),o},s.prototype.raiseServiceSuccess=function(){var e,t,n,s,r,i,o;return o=arguments[0],i=arguments[1],s=new fm.webrtc.serviceSuccessArgs,s.__channel=fm.webrtc.client.getChannelForService(i.getResponse(),o),s.__dataJson=fm.webrtc.client.getDataJsonForService(i.getResponse(),o),s.__dataBytes=fm.webrtc.client.getDataBytesForService(i.getResponse(),o),s.setExtensions(fm.webrtc.client.getExtensions(i.getResponse(),o)),s.setTimestamp(fm.webrtc.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(o.getDynamicProperties()),n=s,r=this._onServiceSuccess,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnServiceSuccess"),t=o.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(o.getOnSuccess(),n,"Client -> Service -> OnSuccess"):void 0},s.prototype.raiseStateRestored=function(){var e,t,n,s,r,i;return r=arguments[0],s=new fm.webrtc.stateRestoredArgs,s.setExtensions(r.getExtensions()),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onStateRestored,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnStateRestored"),t=r.getOnStateRestored(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnStateRestored(),n,"Client -> Connect -> OnStateRestored"):void 0},s.prototype.raiseStreamFailure=function(){var e,t,n,s,r,i,o,a,u;return r=arguments[0],a=arguments[1],u=arguments[2],i=arguments[3],s=new fm.webrtc.streamFailureArgs,s.setException(a.getException()),s.setExtensions(fm.webrtc.client.getExtensions(a.getResponse(),r)),s.setTimestamp(fm.webrtc.client.getTimestamp(a.getResponse())),s.setClient(this),s.setConnectArgs(r),s.setDynamicProperties(r.getDynamicProperties()),n=s,o=this._onStreamFailure,e=o,null!==e&&"undefined"!=typeof e&&this.raiseAction(o,n,"Client -> OnStreamFailure"),t=r.getOnStreamFailure(),null!==t&&"undefined"!=typeof t&&(u=this.raiseRetriable(r.getOnStreamFailure(),u,n,"Client -> Connect -> OnStreamFailure")),i.setValue(n.getConnectArgs()),u},s.prototype.raiseSubscribeComplete=function(){var e,t,n,s,r,i,o;return o=arguments[0],i=arguments[1],s=new fm.webrtc.subscribeCompleteArgs,s.setExtensions(fm.webrtc.client.getExtensions(i.getResponse(),o)),s.setIsResubscribe(o.getIsResubscribe()),s.setTimestamp(fm.webrtc.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(o.getDynamicProperties()),n=s,r=this._onSubscribeComplete,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnSubscribeComplete"),t=o.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(o.getOnComplete(),n,"Client -> Subscribe -> OnComplete"):void 0},s.prototype.raiseSubscribeDelivery=function(){var e,t,n,s,r,i,o;return r=arguments[0],s=arguments[1],o=arguments[2],i=arguments[3],n=new fm.webrtc.subscribeReceiveArgs(o.getBayeuxChannel(),o.__dataJson,o.__dataBytes,this._connectionType,i),n.setExtensions(o.getExtensions()),n.setTimestamp(fm.webrtc.client.getTimestamp(o)),n.setClient(this),n.setDynamicProperties(s),t=n,e=r,null!==e&&"undefined"!=typeof e&&this.raiseActionManual(r,t,"Client -> Subscribe -> OnReceive",!0),t.getReconnectAfter()},s.prototype.raiseSubscribeFailure=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],i=arguments[1],o=arguments[2],s=new fm.webrtc.subscribeFailureArgs,s.__channels=fm.webrtc.client.getChannelsForSubscribe(i.getResponse(),a),s.setException(i.getException()),s.setExtensions(fm.webrtc.client.getExtensions(i.getResponse(),a)),s.setIsResubscribe(a.getIsResubscribe()),s.setTimestamp(fm.webrtc.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),n=s,r=this._onSubscribeFailure,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnSubscribeFailure"),t=a.getOnFailure(),null!==t&&"undefined"!=typeof t&&(o=this.raiseRetriable(a.getOnFailure(),o,n,"Client -> Subscribe -> OnFailure")),o},s.prototype.raiseSubscribeSuccess=function(){var e,t,n,s,r,i,o;return o=arguments[0],i=arguments[1],s=new fm.webrtc.subscribeSuccessArgs,s.__channels=fm.webrtc.client.getChannelsForSubscribe(i.getResponse(),o),s.setExtensions(fm.webrtc.client.getExtensions(i.getResponse(),o)),s.setIsResubscribe(o.getIsResubscribe()),s.setTimestamp(fm.webrtc.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(o.getDynamicProperties()),n=s,r=this._onSubscribeSuccess,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnSubscribeSuccess"),t=o.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(o.getOnSuccess(),n,"Client -> Subscribe -> OnSuccess"):void 0},s.prototype.raiseUnbindComplete=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],o=arguments[1],r=arguments[2],s=new fm.webrtc.unbindCompleteArgs,s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),a)),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),s.__forced=r,n=s,i=this._onUnbindComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnUnbindComplete"),t=a.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(a.getOnComplete(),n,"Client -> Unbind -> OnComplete"):void 0},s.prototype.raiseUnbindFailure=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],i=arguments[1],o=arguments[2],s=new fm.webrtc.unbindFailureArgs,s.__records=fm.webrtc.client.getRecordsForUnbind(i.getResponse(),a),s.setException(i.getException()),s.setExtensions(fm.webrtc.client.getExtensions(i.getResponse(),a)),s.setTimestamp(fm.webrtc.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),n=s,r=this._onUnbindFailure,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnUnbindFailure"),t=a.getOnFailure(),null!==t&&"undefined"!=typeof t&&(o=this.raiseRetriable(a.getOnFailure(),o,n,"Client -> Unbind -> OnFailure")),o},s.prototype.raiseUnbindSuccess=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],o=arguments[1],r=arguments[2],s=new fm.webrtc.unbindSuccessArgs,s.__records=fm.webrtc.client.getRecordsForUnbind(o.getResponse(),a),s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),a)),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),s.__forced=r,n=s,i=this._onUnbindSuccess,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnUnbindSuccess"),t=a.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(a.getOnSuccess(),n,"Client -> Unbind -> OnSuccess"):void 0},s.prototype.raiseUnsubscribeComplete=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],o=arguments[1],r=arguments[2],s=new fm.webrtc.unsubscribeCompleteArgs,s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),a)),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),s.__forced=r,n=s,i=this._onUnsubscribeComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnUnsubscribeComplete"),t=a.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(a.getOnComplete(),n,"Client -> Unsubscribe -> OnComplete"):void 0},s.prototype.raiseUnsubscribeFailure=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],i=arguments[1],o=arguments[2],s=new fm.webrtc.unsubscribeFailureArgs,s.__channels=fm.webrtc.client.getChannelsForUnsubscribe(i.getResponse(),a),s.setException(i.getException()),s.setExtensions(fm.webrtc.client.getExtensions(i.getResponse(),a)),s.setTimestamp(fm.webrtc.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),n=s,r=this._onUnsubscribeFailure,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnUnsubscribeFailure"),t=a.getOnFailure(),null!==t&&"undefined"!=typeof t&&(o=this.raiseRetriable(a.getOnFailure(),o,n,"Client -> Unsubscribe -> OnFailure")),o},s.prototype.raiseUnsubscribeSuccess=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],o=arguments[1],r=arguments[2],s=new fm.webrtc.unsubscribeSuccessArgs,s.__channels=fm.webrtc.client.getChannelsForUnsubscribe(o.getResponse(),a),s.setExtensions(fm.webrtc.client.getExtensions(o.getResponse(),a)),s.setTimestamp(fm.webrtc.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),s.__forced=r,n=s,i=this._onUnsubscribeSuccess,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnUnsubscribeSuccess"),t=a.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(a.getOnSuccess(),n,"Client -> Unsubscribe -> OnSuccess"):void 0},s.prototype.receiveMessage=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y,_,b,v,R,C,w,S,O,x,E,P,A,T;if(S=arguments[0],E=arguments[1],"/meta/notify"===S.getBayeuxChannel())return"fm.server"===S.getTag()?(P=fm.webrtc.message.fromJson(S.getDataJson()),E=this.processServerAction(P,E)):(O=this._onNotify,e=O,null!==e&&"undefined"!=typeof e&&(E=this.raiseNotifyDelivery(O,S,E))),E;for(v=[],R=[],t=fm.hashExtensions.getKeys(this._customOnReceives),g=0,d=t.length;d>g;g++)for(A=t[g],c=this._customOnReceives[A],n=fm.hashExtensions.getKeys(c),f=0,y=n.length;y>f;f++)T=n[f],T===S.getChannel()&&(fm.arrayExtensions.add(v,c[T]),fm.arrayExtensions.add(R,{}));for(s=fm.hashExtensions.getKeys(this._subscribedOnReceives),m=0,_=s.length;_>m;m++)for(A=s[m],l=this._subscribedOnReceives[A],r=fm.hashExtensions.getKeys(l),w=0,b=r.length;b>w;w++)T=r[w],T===S.getChannel()&&(fm.arrayExtensions.add(v,l[T]),h=null,i=new fm.holder(h),o=fm.hashExtensions.tryGetValue(this._subscribedDynamicProperties,fm.webrtc.client.getSubscribeKey(T,A),i),h=i.getValue(),o||(h={}),fm.arrayExtensions.add(R,h));if(0===fm.arrayExtensions.getCount(v))return C=null,a=new fm.holder(C),u=fm.hashExtensions.tryGetValue(this._pendingReceives,S.getChannel(),a),C=a.getValue(),u||(C=[],this._pendingReceives[S.getChannel()]=C),fm.arrayExtensions.add(C,S),E;for(p=0;p<fm.arrayExtensions.getCount(v);)try{x=v[p],h=null,p<fm.arrayExtensions.getCount(R)&&(h=R[p]),E=this.raiseSubscribeDelivery(x,h,S,E)}finally{p++}return E},s.prototype.receiveSink=function(){var e;return e=arguments[0],fm.log.warn("Received message on channel with no receive handler.")},s.prototype.reconnect=function(){var e,t,n,s,r,i,o;return s=arguments[0],o=arguments[1],r=null,e=new fm.holder(r),t=this.raiseStreamFailure(s,o,!0,e),r=e.getValue(),i=t,n=r,(null===n||"undefined"==typeof n)&&(r=s),this.raiseForcedUnsubscribes(s,o),this.raiseForcedUnbinds(s,o),this.clearBoundRecords(),this.clearSubscribedChannels(),this.setIsConnected(!1),this._queueActivated=!1,i?(s.setIsReconnect(!0),s.setLastClientId(this.getClientId()),s.setLastSessionId(this.getSessionId()),this.connect(s)):void 0},s.prototype.removeBoundRecords=function(){var e,t,n,s,r,i;for(r=arguments[0],e=r,i=[],t=0,n=e.length;n>t;t++)s=e[t],i.push(fm.hashExtensions.remove(this._boundRecords,s.getKey()));return i},s.prototype.removeOnBindComplete=function(){var e;return e=arguments[0],this._onBindComplete=fm.delegate.remove(this._onBindComplete,e)},s.prototype.removeOnBindFailure=function(){var e;return e=arguments[0],this._onBindFailure=fm.delegate.remove(this._onBindFailure,e)},s.prototype.removeOnBindSuccess=function(){var e;return e=arguments[0],this._onBindSuccess=fm.delegate.remove(this._onBindSuccess,e)},s.prototype.removeOnConnectComplete=function(){var e;return e=arguments[0],this._onConnectComplete=fm.delegate.remove(this._onConnectComplete,e)},s.prototype.removeOnConnectFailure=function(){var e;return e=arguments[0],this._onConnectFailure=fm.delegate.remove(this._onConnectFailure,e)},s.prototype.removeOnConnectSuccess=function(){var e;return e=arguments[0],this._onConnectSuccess=fm.delegate.remove(this._onConnectSuccess,e)},s.prototype.removeOnDisconnectComplete=function(){var e;return e=arguments[0],this._onDisconnectComplete=fm.delegate.remove(this._onDisconnectComplete,e)},s.prototype.removeOnNotify=function(){var e;return e=arguments[0],this._onNotify=fm.delegate.remove(this._onNotify,e)},s.prototype.removeOnNotifyComplete=function(){var e;return e=arguments[0],this._onNotifyComplete=fm.delegate.remove(this._onNotifyComplete,e)},s.prototype.removeOnNotifyFailure=function(){var e;return e=arguments[0],this._onNotifyFailure=fm.delegate.remove(this._onNotifyFailure,e)},s.prototype.removeOnNotifySuccess=function(){var e;return e=arguments[0],this._onNotifySuccess=fm.delegate.remove(this._onNotifySuccess,e)},s.prototype.removeOnPublishComplete=function(){var e;return e=arguments[0],this._onPublishComplete=fm.delegate.remove(this._onPublishComplete,e)},s.prototype.removeOnPublishFailure=function(){var e;return e=arguments[0],this._onPublishFailure=fm.delegate.remove(this._onPublishFailure,e)},s.prototype.removeOnPublishSuccess=function(){var e;return e=arguments[0],this._onPublishSuccess=fm.delegate.remove(this._onPublishSuccess,e)},s.prototype.removeOnServerBind=function(){var e;return e=arguments[0],this._onServerBind=fm.delegate.remove(this._onServerBind,e)},s.prototype.removeOnServerSubscribe=function(){var e;return e=arguments[0],this._onServerSubscribe=fm.delegate.remove(this._onServerSubscribe,e)},s.prototype.removeOnServerUnbind=function(){var e;return e=arguments[0],this._onServerUnbind=fm.delegate.remove(this._onServerUnbind,e)},s.prototype.removeOnServerUnsubscribe=function(){var e;return e=arguments[0],this._onServerUnsubscribe=fm.delegate.remove(this._onServerUnsubscribe,e)},s.prototype.removeOnServiceComplete=function(){var e;return e=arguments[0],this._onServiceComplete=fm.delegate.remove(this._onServiceComplete,e)},s.prototype.removeOnServiceFailure=function(){var e;return e=arguments[0],this._onServiceFailure=fm.delegate.remove(this._onServiceFailure,e)},s.prototype.removeOnServiceSuccess=function(){var e;return e=arguments[0],this._onServiceSuccess=fm.delegate.remove(this._onServiceSuccess,e)},s.prototype.removeOnStateRestored=function(){var e;return e=arguments[0],this._onStateRestored=fm.delegate.remove(this._onStateRestored,e)},s.prototype.removeOnStreamFailure=function(){var e;return e=arguments[0],this._onStreamFailure=fm.delegate.remove(this._onStreamFailure,e)},s.prototype.removeOnSubscribeComplete=function(){var e;return e=arguments[0],this._onSubscribeComplete=fm.delegate.remove(this._onSubscribeComplete,e)},s.prototype.removeOnSubscribeFailure=function(){var e;return e=arguments[0],this._onSubscribeFailure=fm.delegate.remove(this._onSubscribeFailure,e)},s.prototype.removeOnSubscribeSuccess=function(){var e;return e=arguments[0],this._onSubscribeSuccess=fm.delegate.remove(this._onSubscribeSuccess,e)},s.prototype.removeOnUnbindComplete=function(){var e;return e=arguments[0],this._onUnbindComplete=fm.delegate.remove(this._onUnbindComplete,e)},s.prototype.removeOnUnbindFailure=function(){var e;return e=arguments[0],this._onUnbindFailure=fm.delegate.remove(this._onUnbindFailure,e)},s.prototype.removeOnUnbindSuccess=function(){var e;return e=arguments[0],this._onUnbindSuccess=fm.delegate.remove(this._onUnbindSuccess,e)},s.prototype.removeOnUnsubscribeComplete=function(){var e;return e=arguments[0],this._onUnsubscribeComplete=fm.delegate.remove(this._onUnsubscribeComplete,e)},s.prototype.removeOnUnsubscribeFailure=function(){var e;return e=arguments[0],this._onUnsubscribeFailure=fm.delegate.remove(this._onUnsubscribeFailure,e)},s.prototype.removeOnUnsubscribeSuccess=function(){var e;return e=arguments[0],this._onUnsubscribeSuccess=fm.delegate.remove(this._onUnsubscribeSuccess,e)},s.prototype.removeSubscribedChannels=function(){var e,t,n,s,r,i,o,a,u;if(u=arguments[0],s=arguments[1],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedChannels,u,e),r=e.getValue(),t){for(n=s,i=0,o=n.length;o>i;i++)a=n[i],fm.hashExtensions.remove(r,a);if(0===fm.hashExtensions.getCount(r))return fm.hashExtensions.remove(this._subscribedChannels,u)}},s.prototype.removeSubscribedOnReceive=function(){var e,t,n,s,r,i,o,a,u;if(u=arguments[0],s=arguments[1],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedOnReceives,u,e),r=e.getValue(),t){for(n=s,i=0,o=n.length;o>i;i++)a=n[i],fm.hashExtensions.remove(r,a),fm.hashExtensions.remove(this._subscribedDynamicProperties,fm.webrtc.client.getSubscribeKey(a,u));if(0===fm.hashExtensions.getCount(r))return fm.hashExtensions.remove(this._subscribedOnReceives,u)}},s.prototype.restream=function(){var e,t,n,s;return e=arguments[0],t=arguments[1],n=arguments[2],n<this._lastInterval&&(n=this._lastInterval),this.getConcurrencyMode()===fm.webrtc.concurrencyMode.Low&&n>0?(s=new fm.webrtc.deferredStreamState,s.setConnectArgs(e),s.setReceivedMessages(t),fm.deferrer.defer(this.streamDeferred,n,s)):this.stream(e,t)},s.prototype.retryConnect=function(){var e,t;return t=arguments[0],e=arguments[1],this._lastBackoffIndex++,this._lastBackoffTimeout=e,t.setIsRetry(!0),this.connect(t)},s.prototype.retryConnectDeferred=function(){var e,t;return e=arguments[0],t=e,this.retryConnect(t.getConnectArgs(),t.getBackoffTimeout())},s.prototype.send=function(){var e,t,n,s;return e=arguments[0],s=arguments[1],t=arguments[2],n=arguments[3],this.sendMany([e],s,t,n)},s.prototype.sendCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y,_,b,v,R,C,w,S,O,x;if(S=arguments[0],f=S.getRequestArgs().getDynamicValue(fm.webrtc.client._stateKey),S.getRequestArgs().unsetDynamicValue(fm.webrtc.client._stateKey),e=S.getException(),null!==e&&"undefined"!=typeof e)return this.raiseSendException(f,S.getException());if(t=S.getMessages(),null===t||"undefined"==typeof t||0===S.getMessages().length)return this.raiseSendException(f,new Error("Invalid response received from server."));for(b=[],r=S.getMessages(),m=0,y=r.length;y>m;m++){if(v=r[m],p=v.getAdvice(),i=p,null!==i&&"undefined"!=typeof i)switch(this.processAdvice(p),this._connectionType){case fm.webrtc.connectionType.WebSocket:o=p.getWebSocket(),null!==o&&"undefined"!=typeof o&&this.processAdvice(p.getWebSocket());break;case fm.webrtc.connectionType.LongPolling:a=p.getLongPolling(),null!==a&&"undefined"!=typeof a&&this.processAdvice(p.getLongPolling());break;case fm.webrtc.connectionType.CallbackPolling:u=p.getCallbackPolling(),null!==u&&"undefined"!=typeof u&&this.processAdvice(p.getCallbackPolling())}if(f.getIsStream()&&"/meta/connect"!==v.getBayeuxChannel())fm.arrayExtensions.add(b,v);else{if(fm.stringExtensions.isNullOrEmpty(v.getId()))return void this.raiseSendException(f,new Error(v.getError()));if(w=null,c=new fm.holder(w),l=fm.hashExtensions.tryGetValue(f.getRequestMapping(),v.getId(),c),w=c.getValue(),!l)return void this.raiseSendException(f,new Error(v.getError()));C=new fm.webrtc.clientResponseArgs,C.setDynamicProperties(w.getDynamicProperties()),C.setResponse(v),C.setException(v.getSuccessful()?null:new Error(v.getError())),w.getCallback()(C)}}for(fm.arrayExtensions.getCount(b)>0&&(g=new fm.webrtc.clientResponseArgs,g.setDynamicProperties(f.getRequests()[0].getDynamicProperties()),g.setResponses(fm.arrayExtensions.toArray(b)),f.getRequests()[0].getCallback()(g)),h=S.getMessages(),O=[],d=0,_=h.length;_>d;d++)v=h[d],x=v.getServerActions(),n=x,null!==n&&"undefined"!=typeof n?(s=x,O.push(function(){var e,t,n;for(n=[],e=0,t=s.length;t>e;e++)R=s[e],n.push(this.processServerAction(R,this._lastInterval));return n}.call(this))):O.push(void 0);return O},s.prototype.sendMany=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y;for(l=arguments[0],y=arguments[1],f=arguments[2],m=arguments[3],r=!1,1===l.length&&(r="/meta/connect"===l[0].getMessage().getBayeuxChannel()),s={},a=[],e=l,i=0,o=e.length;o>i;i++)u=e[i],t=this.getClientId(),(null===t?t===fm.guid.empty:t.equals(fm.guid.empty))||u.getMessage().isConnect()||(u.getMessage().setClientId(this.getClientId()),u.getMessage().setSessionId(this.getSessionId())),this.getDisableBinary()&&u.getMessage().setDisableBinary(this.getDisableBinary()),this._counter++,u.getMessage().setId(fm.intExtensions.toString(this._counter)),fm.arrayExtensions.add(a,u.getMessage()),s[u.getMessage().getId()]=u;return g=this.processRequestUrl(y),y=this.processRequestUrl(y),r?m=this.getStreamRequestTimeout():0===m&&(m=this.getRequestTimeout()),d=r?this._streamRequestTransfer:this._requestTransfer,n=new fm.webrtc.messageRequestArgs(this.createHeaders()),n.setMessages(fm.arrayExtensions.toArray(a)),n.setOnRequestCreated(this.internalOnRequestCreated),n.setOnResponseReceived(this.internalOnResponseReceived),n.setOnHttpRequestCreated(this.internalOnHttpRequestCreated),n.setOnHttpResponseReceived(this.internalOnHttpResponseReceived),n.setSender(this),n.setTimeout(m),n.setUrl(y),c=n,c.setDynamicValue("frameUrl",g),p=new fm.webrtc.clientSendState,p.setRequests(l),p.setRequestMapping(s),p.setIsStream(r),c.setDynamicValue(fm.webrtc.client._stateKey,p),f?(h=d.send(c),this.sendCallback(h)):d.sendAsync(c,this.sendCallback)},s.prototype.service=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getChannel()))throw new Error("channel cannot be null.");return this.performService(e),this},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.setCustomOnReceive=function(){var e,t;return e=arguments[0],t=arguments[1],this.setCustomOnReceiveWithTag(e,fm.stringExtensions.empty,t)},s.prototype.setCustomOnReceiveWithTag=function(){var e,t,n,s,r,i,o,a,u;if(i=arguments[0],u=arguments[1],a=arguments[2],e=i,null===e||"undefined"==typeof e)throw new Error("channel cannot be null.");if(t=a,null===t||"undefined"==typeof t)throw new Error("onReceive cannot be null.");return n=u,(null===n||"undefined"==typeof n)&&(u=fm.stringExtensions.empty),o=null,s=new fm.holder(o),r=fm.hashExtensions.tryGetValue(this._customOnReceives,u,s),o=s.getValue(),r||(o={},this._customOnReceives[u]=o),o[i]=a,this.processPendingReceives([i],this._lastInterval)},s.prototype.setDisableWebSockets=function(){var e;return e=arguments[0],this._disableWebSockets=e},s.prototype.setInstanceId=function(){var e;return e=arguments[0],this._instanceId=e},s.prototype.setIsConnected=function(){var e;return e=arguments[0],this._isConnected=e},s.prototype.setIsConnecting=function(){var e;return e=arguments[0],this._isConnecting=e},s.prototype.setIsDisconnecting=function(){var e;return e=arguments[0],this._isDisconnecting=e},s.prototype.setServerTimeout=function(){var e;return e=arguments[0],this._serverTimeout=e},s.prototype.setSessionId=function(){var e;return e=arguments[0],this._sessionId=e},s.prototype.setStreamRequestUrl=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e)throw new Error("Stream request URL cannot be null.");return this.__streamRequestUrl=fm.httpTransfer.replaceWildcards(t)},s.prototype.setSynchronous=function(){var e;return e=arguments[0],this._synchronous=e},s.prototype.setToken=function(){var e;return e=arguments[0],this._token=e},s.prototype.startBatch=function(){return this._batchCounter++,this},s.prototype.stream=function(){var e,t,n,s,r;return e=arguments[0],n=arguments[1],r=new fm.webrtc.clientRequest,t=new fm.webrtc.message("/meta/connect"),t.setConnectionType(this._connectionType),t.setAcknowledgement(n),r.setMessage(t),r.setCallback(this.streamCallback),s=r,s.setDynamicValue(fm.webrtc.client._argsKey,e),this.send(s,this.getStreamRequestUrl(),!1,0);
},s.prototype.streamCallback=function(){var e,t,n,s,r,i,o,a,u,c;if(u=arguments[0],s=u.getDynamicValue(fm.webrtc.client._argsKey),this.getIsConnected()&&!this.getIsConnecting()&&!this.getIsDisconnecting()){if(e=u.getException(),null!==e&&"undefined"!=typeof e)return t=u.getResponses(),null!==t&&"undefined"!=typeof t&&null!==this._lastReconnect&&this._lastReconnect===fm.webrtc.reconnect.Retry?this.restream(s,!1,this._lastInterval):this.reconnect(s,u);if(1===u.getResponses().length&&"/meta/connect"===u.getResponses()[0].getBayeuxChannel())return this.restream(s,!1,this._lastInterval);i=this._lastInterval,c=this.getThreadId(),this.preRaise(c);try{for(n=u.getResponses(),r=0,o=n.length;o>r;r++)a=n[r],i=this.receiveMessage(a,i)}finally{this.postRaise(c)}return this.restream(s,!0,i)}},s.prototype.streamDeferred=function(){var e,t;return e=arguments[0],t=e,this.stream(t.getConnectArgs(),t.getReceivedMessages())},s.prototype.subscribe=function(){var e,t,n,s;if(s=arguments[0],e=s.getChannels(),null===e||"undefined"==typeof e||0===s.getChannels().length)throw new Error("channels cannot be null.");return t=s.getOnReceive(),(null===t||"undefined"==typeof t)&&s.setOnReceive(this.receiveSink),n=s.getTag(),(null===n||"undefined"==typeof n)&&s.setTag(fm.stringExtensions.empty),this.performSubscribe(s),this},s.prototype.tryWebSocket=function(){var e,t,n;try{return n=fm.webrtc.messageTransferFactory.getWebSocketMessageTransfer(this.processRequestUrl(this.getStreamRequestUrl())),n.setHandshakeTimeout(this.getRequestTimeout()),n.setStreamTimeout(this.getStreamRequestTimeout()),n.setOnRequestCreated(this.internalOnHttpRequestCreated),n.setOnResponseReceived(this.internalOnHttpResponseReceived),n.setOnOpenSuccess(this.webSocketOpenSuccess),n.setOnOpenFailure(this.webSocketOpenFailure),n.setOnStreamFailure(this.webSocketStreamFailure),n.setSender(this),this._connectionType=fm.webrtc.connectionType.WebSocket,this._streamRequestTransfer=n,n.open(this.createHeaders()),!0}catch(e){return t=e,!1}finally{}},s.prototype.unbind=function(){var e,t,n,s,r,i,o;if(o=arguments[0],e=o.getRecords(),null===e||"undefined"==typeof e||0===o.getRecords().length)throw new Error("records cannot be null.");for(t=o.getRecords(),s=0,r=t.length;r>s;s++)if(i=t[s],n=i.getKey(),null===n||"undefined"==typeof n)throw new Error("key cannot be null.");return this.performUnbind(o),this},s.prototype.unsetCustomOnReceive=function(){var e;return e=arguments[0],this.unsetCustomOnReceiveWithTag(e,fm.stringExtensions.empty)},s.prototype.unsetCustomOnReceiveWithTag=function(){var e,t,n,s,r,i,o;if(r=arguments[0],o=arguments[1],e=r,null===e||"undefined"==typeof e)throw new Error("channel cannot be null.");return t=o,(null===t||"undefined"==typeof t)&&(o=fm.stringExtensions.empty),i=null,n=new fm.holder(i),s=fm.hashExtensions.tryGetValue(this._customOnReceives,o,n),i=n.getValue(),s&&fm.hashExtensions.remove(i,r)?(0===fm.hashExtensions.getCount(i)&&fm.hashExtensions.remove(this._customOnReceives,o),!0):!1},s.prototype.unsubscribe=function(){var e,t,n;if(n=arguments[0],e=n.getChannels(),null===e||"undefined"==typeof e||0===n.getChannels().length)throw new Error("channels cannot be null.");return t=n.getTag(),(null===t||"undefined"==typeof t)&&n.setTag(fm.stringExtensions.empty),this.performUnsubscribe(n),this},s.prototype.webSocketOpenFailure=function(){var e;return e=arguments[0],this._webSocketOpened&&this.tryWebSocket()?void 0:this.doLongPolling()},s.prototype.webSocketOpenSuccess=function(){var e;return e=arguments[0],this._webSocketOpened=!0,this.activateStream(this._connectArgs,this._responseArgs)},s.prototype.webSocketStreamFailure=function(){var e,t;return e=arguments[0],t=new fm.webrtc.clientResponseArgs,t.setDynamicProperties(this._responseArgs.getDynamicProperties()),t.setException(new Error(fm.stringExtensions.format("WebSocket stream error. {0}",e.getException().message))),this.streamCallback(t)},s._bayeuxVersion="1.0",s._bayeuxMinimumVersion="1.0",s._argsKey="fm.args",s._stateKey="fm.state",s._requestUrlCache={},s._requestUrlCacheLock=new fm.object,s}(fm.webrtc.baseClient);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientSendState=function(n){function s(){return this.setRequests=e(this.setRequests,this),this.setRequestMapping=e(this.setRequestMapping,this),this.setIsStream=e(this.setIsStream,this),this.getRequests=e(this.getRequests,this),this.getRequestMapping=e(this.getRequestMapping,this),this.getIsStream=e(this.getIsStream,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isStream=!1,s.prototype._requestMapping=null,s.prototype._requests=null,s.prototype.getIsStream=function(){return this._isStream},s.prototype.getRequestMapping=function(){return this._requestMapping},s.prototype.getRequests=function(){return this._requests},s.prototype.setIsStream=function(){var e;return e=arguments[0],this._isStream=e},s.prototype.setRequestMapping=function(){var e;return e=arguments[0],this._requestMapping=e},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.clientRequest=function(n){function s(){return this.setMessage=e(this.setMessage,this),this.setCallback=e(this.setCallback,this),this.getMessage=e(this.getMessage,this),this.getCallback=e(this.getCallback,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._callback=null,s.prototype._message=null,s.prototype.getCallback=function(){return this._callback},s.prototype.getMessage=function(){return this._message},s.prototype.setCallback=function(){var e;return e=arguments[0],this._callback=e},s.prototype.setMessage=function(){var e;return e=arguments[0],this._message=e},s}(fm.dynamic);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.defaults=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n.__domainKey=null,n.__domainName=null,n.getDomainKey=function(){return fm.webrtc.defaults.__domainKey},n.getDomainName=function(){return fm.webrtc.defaults.__domainName},n.__domainKey=new fm.guid("11111111-1111-1111-1111-111111111111"),n.__domainName="localhost",n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publishingClient=function(n){function s(){this.getBoundRecordValue=e(this.getBoundRecordValue,this),this.toJson=e(this.toJson,this),this.setClientId=e(this.setClientId,this),this.setBoundRecords=e(this.setBoundRecords,this),this.getClientId=e(this.getClientId,this),this.getBoundRecordValueJson=e(this.getBoundRecordValueJson,this),this.getBoundRecords=e(this.getBoundRecords,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setBoundRecords({}),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(n=arguments[0],t=arguments[1],s.__super__.constructor.call(this),this.setClientId(n),void this.setBoundRecords(t)):0===arguments.length?(s.__super__.constructor.call(this),void this.setBoundRecords({})):void 0}return t(s,n),s.prototype._boundRecords=null,s.prototype._clientId=null,s.fromJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializePublishingClient(e)},s.toJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializePublishingClient(e)},s.prototype.getBoundRecords=function(){return this._boundRecords},s.prototype.getBoundRecordValueJson=function(){var e,t,n,s,r;return s=arguments[0],e=this.getBoundRecords(),null===e||"undefined"==typeof e?null:(r=null,t=new fm.holder(r),n=fm.hashExtensions.tryGetValue(this.getBoundRecords(),s,t),r=t.getValue(),n?r.getValueJson():null)},s.prototype.getClientId=function(){return this._clientId},s.prototype.setBoundRecords=function(){var e;return e=arguments[0],this._boundRecords=e},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.toJson=function(){return fm.webrtc.publishingClient.toJson(this)},s.prototype.getBoundRecordValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments))},s}(fm.serializable);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.extensions=function(n){function s(){return this.setValue=e(this.setValue,this),this.getValue=e(this.getValue,this),this.toJson=e(this.toJson,this),this.setValueJson=e(this.setValueJson,this),this.setExtensionJsons=e(this.setExtensionJsons,this),this.getValueJson=e(this.getValueJson,this),this.getNames=e(this.getNames,this),this.getExtensionJsons=e(this.getExtensionJsons,this),this.getCount=e(this.getCount,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setExtensionJsons({}),void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),void this.setExtensionJsons({}))}return t(s,n),s.prototype._extensionJsons=null,s.fromJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeExtensions(e)},s.toJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeExtensions(e)},s.prototype.getCount=function(){return fm.hashExtensions.getCount(this.getExtensionJsons())},s.prototype.getExtensionJsons=function(){return this._extensionJsons},s.prototype.getNames=function(){var e;return e=[],fm.arrayExtensions.addRange(e,fm.hashExtensions.getKeys(this.getExtensionJsons())),e},s.prototype.getValueJson=function(){var e;return e=arguments[0],fm.hashExtensions.containsKey(this.getExtensionJsons(),e)?this.getExtensionJsons()[e]:null},s.prototype.setExtensionJsons=function(){var e;return e=arguments[0],this._extensionJsons=e},s.prototype.setValueJson=function(){var e,t,n,s;if(3===arguments.length){if(t=arguments[0],s=arguments[1],n=arguments[2],e=s,null===e||"undefined"==typeof e)fm.hashExtensions.containsKey(this.getExtensionJsons(),t)&&fm.hashExtensions.remove(this.getExtensionJsons(),t);else{if(n&&!fm.serializer.isValidJson(s))throw new Error("The value is not valid JSON.");this.getExtensionJsons()[t]=s}return void this.setIsDirty(!0)}2===arguments.length&&(t=arguments[0],s=arguments[1],this.setValueJson(t,s,!0))},s.prototype.toJson=function(){return fm.webrtc.extensions.toJson(this)},s.prototype.getValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getValueJson.apply(this,arguments))},s.prototype.setValue=function(){var e,t,n;return 3===arguments.length?(e=arguments[0],n=arguments[1],t=arguments[2],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),void this.setValueJson.apply(this,arguments)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setValueJson.apply(this,arguments)))},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.message=function(n){function s(){this.toJsonNoData=e(this.toJsonNoData,this),this.toJson=e(this.toJson,this),this.toBinary=e(this.toBinary,this),this.setVersion=e(this.setVersion,this),this.setTag=e(this.setTag,this),this.setSupportedConnectionTypes=e(this.setSupportedConnectionTypes,this),this.setSessionId=e(this.setSessionId,this),this.setServerTimeout=e(this.setServerTimeout,this),this.setServerActions=e(this.setServerActions,this),this.setRecords=e(this.setRecords,this),this.setRecord=e(this.setRecord,this),this.setPublishingClient=e(this.setPublishingClient,this),this.setNotifyingClient=e(this.setNotifyingClient,this),this.setNotifyClientId=e(this.setNotifyClientId,this),this.setMinimumVersion=e(this.setMinimumVersion,this),this.setLastSessionId=e(this.setLastSessionId,this),this.setLastClientId=e(this.setLastClientId,this),this.setKeys=e(this.setKeys,this),this.setKey=e(this.setKey,this),this.setId=e(this.setId,this),this.setDisableBinary=e(this.setDisableBinary,this),this.setConnectionType=e(this.setConnectionType,this),this.setClientId=e(this.setClientId,this),this.setChannels=e(this.setChannels,this),this.setChannel=e(this.setChannel,this),this.setBayeuxChannel=e(this.setBayeuxChannel,this),this.setAdvice=e(this.setAdvice,this),this.setAcknowledgement=e(this.setAcknowledgement,this),this.isUnsubscribingFrom=e(this.isUnsubscribingFrom,this),this.isUnsubscribe=e(this.isUnsubscribe,this),this.isUnbindingFrom=e(this.isUnbindingFrom,this),this.isUnbind=e(this.isUnbind,this),this.isSubscribingTo=e(this.isSubscribingTo,this),this.isSubscribe=e(this.isSubscribe,this),this.isStream=e(this.isStream,this),this.isService=e(this.isService,this),this.isPublish=e(this.isPublish,this),this.isNotify=e(this.isNotify,this),this.isDisconnect=e(this.isDisconnect,this),this.isConnect=e(this.isConnect,this),this.isBindingTo=e(this.isBindingTo,this),this.isBind=e(this.isBind,this),this.getVersion=e(this.getVersion,this),this.getType=e(this.getType,this),this.getTag=e(this.getTag,this),this.getSupportedConnectionTypes=e(this.getSupportedConnectionTypes,this),this.getSessionId=e(this.getSessionId,this),this.getServerTimeout=e(this.getServerTimeout,this),this.getServerActions=e(this.getServerActions,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getPublishingClient=e(this.getPublishingClient,this),this.getNotifyingClient=e(this.getNotifyingClient,this),this.getNotifyClientId=e(this.getNotifyClientId,this),this.getMinimumVersion=e(this.getMinimumVersion,this),this.getLastSessionId=e(this.getLastSessionId,this),this.getLastClientId=e(this.getLastClientId,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getId=e(this.getId,this),this.getDisableBinary=e(this.getDisableBinary,this),this.getConnectionType=e(this.getConnectionType,this),this.getClientId=e(this.getClientId,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),this.getBayeuxChannel=e(this.getBayeuxChannel,this),this.getAdvice=e(this.getAdvice,this),this.getAcknowledgement=e(this.getAcknowledgement,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._toJsonNoDataLock=new fm.object,void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(s.__super__.constructor.call(this),void(this._toJsonNoDataLock=new fm.object)):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),this._toJsonNoDataLock=new fm.object,this.setValidate(!1),this.setBayeuxChannel(t),void this.setValidate(!0)):void 0}return t(s,n),s.prototype.__advice=null,s.prototype.__bayeuxChannel=null,s.prototype.__channels=null,s.prototype.__clientId=null,s.prototype.__connectionType=null,s.prototype.__id=null,s.prototype.__minimumVersion=null,s.prototype.__records=null,s.prototype.__supportedConnectionTypes=null,s.prototype.__version=null,s.prototype._toJsonNoDataLock=null,s.bytesToInt=function(){var e,t;return e=arguments[0],t=arguments[1],e.length<t+4?-1:fm.bitAssistant.toIntegerNetwork(e,t)},s.fromBinary=function(){var e,t,n,s,r,i,o;return 1===arguments.length?(n=arguments[0],fm.webrtc.message.fromBinary(n,0)):2===arguments.length?(n=arguments[0],o=arguments[1],s=fm.webrtc.message.bytesToInt(n,o),0>s?null:(o+=4,i=fm.webrtc.message.bytesToInt(n,o),0>i?null:(o+=4,e=fm.bitAssistant.subArray(n,o,s),o+=s,t=fm.bitAssistant.subArray(n,o,i),o+=i,r=fm.webrtc.message.fromJson(fm.encoding.getUtf8().getString(e,0,e.length)),r.setDataBytes(t),r))):void 0},s.fromBinaryMultiple=function(){var e,t,n,s,r,i,o,a;if(t=arguments[0],s=0,o=fm.webrtc.message.bytesToInt(t,s),0>o)return new Array(0);for(s+=4,i=new Array(o),n=0;o>n;)try{if(a=fm.webrtc.message.bytesToInt(t,s),0>a)return new Array(0);if(s+=4,r=fm.webrtc.message.fromBinary(t,s),e=r,null===e||"undefined"==typeof e)return new Array(0);s+=a,i[n]=r}finally{n++}return i},s.fromJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeMessage(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeMessageArray(e)},s.intToBytes=function(){var e;return e=arguments[0],fm.bitAssistant.getIntegerBytesNetwork(e)},s.toBinary=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p;if(h=arguments[0],a=null,u=null,e=new fm.holder(a),t=new fm.holder(u),n=h.toJsonNoData(e,t),a=e.getValue(),u=t.getValue(),p=n,s=a,null===s||"undefined"==typeof s){if(r=u,null===r||"undefined"==typeof r)throw new Error("Message data bytes cannot be null.");throw new Error(fm.stringExtensions.format("Message data bytes cannot be null (JSON: {0}).",u))}if(i=p,null===i||"undefined"==typeof i)throw new Error("Message JSON cannot be null.");return o=fm.encoding.getUtf8().getBytes(p),c=new Uint8Array(8+o.length+a.length),l=0,fm.bitAssistant.copy(fm.webrtc.message.intToBytes(o.length),0,c,l,4),l+=4,fm.bitAssistant.copy(fm.webrtc.message.intToBytes(a.length),0,c,l,4),l+=4,fm.bitAssistant.copy(o,0,c,l,o.length),l+=o.length,fm.bitAssistant.copy(a,0,c,l,a.length),l+=a.length,c},s.toBinaryMultiple=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g;for(p=arguments[0],g=4,l=[],e=p,o=0,u=e.length;u>o;o++)h=e[o],i=fm.webrtc.message.toBinary(h),fm.arrayExtensions.add(l,i),g+=4+i.length;for(s=new Uint8Array(g),r=0,fm.bitAssistant.copy(fm.webrtc.message.intToBytes(fm.arrayExtensions.getCount(l)),0,s,r,4),r+=4,t=l,a=0,c=t.length;c>a;a++)n=t[a],fm.bitAssistant.copy(fm.webrtc.message.intToBytes(n.length),0,s,r,4),r+=4,fm.bitAssistant.copy(n,0,s,r,n.length),r+=n.length;return s},s.toJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeMessage(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeMessageArray(e)},s.prototype.getAcknowledgement=function(){return fm.serializer.deserializeBoolean(this.getExtensionValueJson("fm.ack"))},s.prototype.getAdvice=function(){return this.__advice},s.prototype.getBayeuxChannel=function(){return this.__bayeuxChannel},s.prototype.getChannel=function(){return fm.webrtc.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.webrtc.extensible.sharedGetChannels(this.__channels)},s.prototype.getClientId=function(){return this.__clientId},s.prototype.getConnectionType=function(){return this.__connectionType},s.prototype.getDisableBinary=function(){return fm.serializer.deserializeBoolean(this.getExtensionValueJson("fm.dbin"))},s.prototype.getId=function(){return this.__id},s.prototype.getKey=function(){return fm.webrtc.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.webrtc.extensible.sharedGetKeys(this.__records)},s.prototype.getLastClientId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.lcid"))},s.prototype.getLastSessionId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.lsid"))},s.prototype.getMinimumVersion=function(){return this.__minimumVersion},s.prototype.getNotifyClientId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify"))},s.prototype.getNotifyingClient=function(){return fm.webrtc.serializer.deserializeNotifyingClient(this.getExtensionValueJson("fm.notifying"))},s.prototype.getPublishingClient=function(){return fm.webrtc.serializer.deserializePublishingClient(this.getExtensionValueJson("fm.publishing"))},s.prototype.getRecord=function(){return fm.webrtc.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.webrtc.extensible.sharedGetRecords(this.__records)},s.prototype.getServerActions=function(){var e,t,n;return t=this.getExtensionValueJson("fm.server"),fm.stringExtensions.isNullOrEmpty(t)||(n=fm.webrtc.message.fromJsonMultiple(t),e=n,null===e||"undefined"==typeof e)?null:n},s.prototype.getServerTimeout=function(){return fm.serializer.deserializeInteger(this.getExtensionValueJson("fm.timeout"))},s.prototype.getSessionId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.sessionId"))},s.prototype.getSupportedConnectionTypes=function(){return this.__supportedConnectionTypes},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.getType=function(){return fm.webrtc.metaChannels.getMessageType(this.getBayeuxChannel())},s.prototype.getVersion=function(){return this.__version},s.prototype.isBind=function(){return this.getType()===fm.webrtc.messageType.Bind},s.prototype.isBindingTo=function(){var e,t,n,s,r,i;if(s=arguments[0],this.getType()===fm.webrtc.messageType.Bind){if(e=this.getRecords(),null===e||"undefined"==typeof e)return!1;for(t=this.getRecords(),n=0,r=t.length;r>n;n++)if(i=t[n],i.getKey()===s)return!0}return!1},s.prototype.isConnect=function(){return this.getType()===fm.webrtc.messageType.Connect},s.prototype.isDisconnect=function(){return this.getType()===fm.webrtc.messageType.Disconnect},s.prototype.isNotify=function(){return this.getType()===fm.webrtc.messageType.Notify},s.prototype.isPublish=function(){return this.getType()===fm.webrtc.messageType.Publish},s.prototype.isService=function(){return this.getType()===fm.webrtc.messageType.Service},s.prototype.isStream=function(){return this.getType()===fm.webrtc.messageType.Stream},s.prototype.isSubscribe=function(){return this.getType()===fm.webrtc.messageType.Subscribe},s.prototype.isSubscribingTo=function(){var e,t,n,s,r,i;if(n=arguments[0],this.getType()===fm.webrtc.messageType.Subscribe){if(e=this.getChannels(),null===e||"undefined"==typeof e)return!1;for(t=this.getChannels(),s=0,r=t.length;r>s;s++)if(i=t[s],i===n)return!0}return!1},s.prototype.isUnbind=function(){return this.getType()===fm.webrtc.messageType.Unbind},s.prototype.isUnbindingFrom=function(){var e,t,n,s,r,i;if(s=arguments[0],this.getType()===fm.webrtc.messageType.Unbind){if(e=this.getRecords(),null===e||"undefined"==typeof e)return!1;for(t=this.getRecords(),n=0,r=t.length;r>n;n++)if(i=t[n],i.getKey()===s)return!0}return!1},s.prototype.isUnsubscribe=function(){return this.getType()===fm.webrtc.messageType.Unsubscribe},s.prototype.isUnsubscribingFrom=function(){var e,t,n,s,r,i;if(n=arguments[0],this.getType()===fm.webrtc.messageType.Unsubscribe){if(e=this.getChannels(),null===e||"undefined"==typeof e)return!1;for(t=this.getChannels(),s=0,r=t.length;r>s;s++)if(i=t[s],i===n)return!0}return!1},s.prototype.setAcknowledgement=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.ack",fm.serializer.serializeBoolean(e),!1),this.setIsDirty(!0)},s.prototype.setAdvice=function(){var e;return e=arguments[0],this.__advice=e,this.setIsDirty(!0)},s.prototype.setBayeuxChannel=function(){var e;return e=arguments[0],this.__bayeuxChannel=e,fm.webrtc.metaChannels.isServiceChannel(e)?this.setChannel(fm.webrtc.metaChannels.convertChannelFromServiced(e)):fm.webrtc.metaChannels.isMetaChannel(e)||this.setChannel(e),this.setIsDirty(!0)},s.prototype.setChannel=function(){var e;return e=arguments[0],this.__channels=fm.webrtc.extensible.sharedSetChannel(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setChannels=function(){var e;return e=arguments[0],this.__channels=fm.webrtc.extensible.sharedSetChannels(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setClientId=function(){var e;return e=arguments[0],this.__clientId=e,this.setIsDirty(!0)},s.prototype.setConnectionType=function(){var e;return e=arguments[0],this.__connectionType=e,this.setIsDirty(!0)},s.prototype.setDisableBinary=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.dbin",fm.serializer.serializeBoolean(e),!1),this.setIsDirty(!0)},s.prototype.setId=function(){var e;return e=arguments[0],this.__id=e,this.setIsDirty(!0)},s.prototype.setKey=function(){var e;return e=arguments[0],this.__records=fm.webrtc.extensible.sharedSetKey(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setKeys=function(){var e;return e=arguments[0],this.__records=fm.webrtc.extensible.sharedSetKeys(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setLastClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.lcid",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setLastSessionId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.lsid",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setMinimumVersion=function(){var e;return e=arguments[0],this.__minimumVersion=e,this.setIsDirty(!0)},s.prototype.setNotifyClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setNotifyingClient=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notifying",fm.webrtc.serializer.serializeNotifyingClient(e),!1),this.setIsDirty(!0)},s.prototype.setPublishingClient=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.publishing",fm.webrtc.serializer.serializePublishingClient(e),!1),this.setIsDirty(!0)},s.prototype.setRecord=function(){var e;return e=arguments[0],this.__records=fm.webrtc.extensible.sharedSetRecord(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setRecords=function(){var e;return e=arguments[0],this.__records=fm.webrtc.extensible.sharedSetRecords(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setServerActions=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.server",fm.webrtc.message.toJsonMultiple(e),!1),this.setIsDirty(!0)},s.prototype.setServerTimeout=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.timeout",fm.serializer.serializeInteger(e),!1),this.setIsDirty(!0)},s.prototype.setSessionId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.sessionId",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setSupportedConnectionTypes=function(){var e;return e=arguments[0],this.__supportedConnectionTypes=e,this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(null!=e?e:fm.stringExtensions.empty),!1),this.setIsDirty(!0)},s.prototype.setVersion=function(){var e;return e=arguments[0],this.__version=e,this.setIsDirty(!0)},s.prototype.toBinary=function(){return fm.webrtc.message.toBinary(this)},s.prototype.toJson=function(){return fm.webrtc.message.toJson(this)},s.prototype.toJsonNoData=function(){var e,t,n;return e=arguments[0],t=arguments[1],this.getIsBinary()?(e.setValue(this.getDataBytes()),t.setValue(null),this.setDataBytes(null),n=this.toJson(),this.setDataBytes(e.getValue()),n):(e.setValue(null),t.setValue(this.getDataJson()),this.setDataJson(null),n=this.toJson(),this.setDataJson(t.getValue()),n)},s}(fm.webrtc.baseMessage);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publication=function(n){function s(){this.toJson=e(this.toJson,this),this.setTag=e(this.setTag,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getChannel=e(this.getChannel,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(t=arguments[0],n=arguments[1],void s.call(this,t,n,null)):3===arguments.length?(t=arguments[0],n=arguments[1],r=arguments[2],s.__super__.constructor.call(this),this.setChannel(t),this.setDataJson(n),void this.setTag(r)):0===arguments.length?void s.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),void this.setChannel(t)):void 0}return t(s,n),s.prototype.__channel=null,s.fromJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializePublication(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializePublicationArray(e)},s.fromMessage=function(){var e,t,n;return t=arguments[0],e=t,null===e||"undefined"==typeof e?null:(n=new fm.webrtc.publication,n.setChannel(t.getBayeuxChannel()),n.setSuccessful(t.getSuccessful()),n.setError(t.getError()),n.setTimestamp(t.getTimestamp()),n.setDataJson(t.getDataJson()),n.setExtensions(t.getExtensions()),n)},s.fromMessages=function(){var e,t,n,s;if(n=arguments[0],e=n,null===e||"undefined"==typeof e)return null;for(s=new Array(n.length),t=0;t<n.length;)try{s[t]=fm.webrtc.publication.fromMessage(n[t])}finally{t++}return s},s.toJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializePublication(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializePublicationArray(e)},s.toMessage=function(){var e,t,n;return n=arguments[0],e=n,null===e||"undefined"==typeof e?null:(t=new fm.webrtc.message,t.setBayeuxChannel(n.getChannel()),t.setSuccessful(n.getSuccessful()),t.setError(n.getError()),t.setTimestamp(n.getTimestamp()),t.setDataJson(n.getDataJson()),t.setExtensions(n.getExtensions()),t)},s.toMessages=function(){var e,t,n,s;if(s=arguments[0],e=s,null===e||"undefined"==typeof e)return null;for(n=new Array(s.length),t=0;t<s.length;)try{n[t]=fm.webrtc.publication.toMessage(s[t])}finally{t++}return n},s.prototype.getChannel=function(){return this.__channel},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setChannel=function(){var e,t,n,s,r;if(r=arguments[0],e=r,null===e||"undefined"==typeof e)return this.__channel=r,this.setIsDirty(!0);if(s=null,t=new fm.holder(s),n=fm.webrtc.extensible.validateChannel(r,t),s=t.getValue(),this.getValidate()&&!n)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",s));return this.__channel=r,this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1),this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.webrtc.publication.toJson(this)},s}(fm.webrtc.baseMessage);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.publisher=function(n){function s(){this.send=e(this.send,this),this.raiseResponseEvent=e(this.raiseResponseEvent,this),this.raiseRequestEvent=e(this.raiseRequestEvent,this),this.raiseEvent=e(this.raiseEvent,this),
this.publishMany=e(this.publishMany,this),this.publish=e(this.publish,this),this.processRequestUrl=e(this.processRequestUrl,this),this.performPublish=e(this.performPublish,this),this.performNotify=e(this.performNotify,this),this.notifyMany=e(this.notifyMany,this),this.notify=e(this.notify,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],s.__super__.constructor.call(this),void this.setRequestUrl(t))}return t(s,n),s._onNotifyRequest=null,s._onNotifyResponse=null,s._onPublishRequest=null,s._onPublishResponse=null,s._requestUrlCache=null,s._requestUrlCacheLock=null,s.addOnNotifyRequest=function(){var e;return e=arguments[0],fm.webrtc.publisher._onNotifyRequest=fm.delegate.combine(fm.webrtc.publisher._onNotifyRequest,e)},s.addOnNotifyResponse=function(){var e;return e=arguments[0],fm.webrtc.publisher._onNotifyResponse=fm.delegate.combine(fm.webrtc.publisher._onNotifyResponse,e)},s.addOnPublishRequest=function(){var e;return e=arguments[0],fm.webrtc.publisher._onPublishRequest=fm.delegate.combine(fm.webrtc.publisher._onPublishRequest,e)},s.addOnPublishResponse=function(){var e;return e=arguments[0],fm.webrtc.publisher._onPublishResponse=fm.delegate.combine(fm.webrtc.publisher._onPublishResponse,e)},s.removeOnNotifyRequest=function(){var e;return e=arguments[0],fm.webrtc.publisher._onNotifyRequest=fm.delegate.remove(fm.webrtc.publisher._onNotifyRequest,e)},s.removeOnNotifyResponse=function(){var e;return e=arguments[0],fm.webrtc.publisher._onNotifyResponse=fm.delegate.remove(fm.webrtc.publisher._onNotifyResponse,e)},s.removeOnPublishRequest=function(){var e;return e=arguments[0],fm.webrtc.publisher._onPublishRequest=fm.delegate.remove(fm.webrtc.publisher._onPublishRequest,e)},s.removeOnPublishResponse=function(){var e;return e=arguments[0],fm.webrtc.publisher._onPublishResponse=fm.delegate.remove(fm.webrtc.publisher._onPublishResponse,e)},s.prototype.notify=function(){var e,t,n,s,r,i;return 3===arguments.length?(t=arguments[0],n=arguments[1],i=arguments[2],this.notify(new fm.webrtc.notification(t,n,i))):1===arguments.length?(s=arguments[0],r=this.notifyMany([s]),e=r,null===e||"undefined"==typeof e||0===r.length?null:r[0]):2===arguments.length?(t=arguments[0],n=arguments[1],this.notify(new fm.webrtc.notification(t,n))):void 0},s.prototype.notifyMany=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e||0===t.length)throw new Error("notifications cannot be null/empty.");return this.performNotify(t)},s.prototype.performNotify=function(){var e,t,n,s,r,i,o;if(i=arguments[0],n=new fm.webrtc.publisherNotifyRequestArgs,n.setRequests(i),this.raiseRequestEvent(fm.webrtc.publisher._onNotifyRequest,n)){if(r=fm.webrtc.notification.toMessages(i),o=this.send(r,this.getRequestUrl()),s=fm.webrtc.notification.fromMessages(o.getResponses()),t=new fm.webrtc.publisherNotifyResponseArgs,t.setRequests(i),t.setResponses(s),this.raiseResponseEvent(fm.webrtc.publisher._onNotifyResponse,t,o),e=o.getException(),null!==e&&"undefined"!=typeof e)throw o.getException();return s}return null},s.prototype.performPublish=function(){var e,t,n,s,r,i,o;if(i=arguments[0],n=new fm.webrtc.publisherPublishRequestArgs,n.setRequests(i),this.raiseRequestEvent(fm.webrtc.publisher._onPublishRequest,n)){if(r=fm.webrtc.publication.toMessages(i),o=this.send(r,this.getRequestUrl()),s=fm.webrtc.publication.fromMessages(o.getResponses()),t=new fm.webrtc.publisherPublishResponseArgs,t.setRequests(i),t.setResponses(s),this.raiseResponseEvent(fm.webrtc.publisher._onPublishResponse,t,o),e=o.getException(),null!==e&&"undefined"!=typeof e)throw o.getException();return s}return null},s.prototype.processRequestUrl=function(){var e,t,n,s,r;if(s=arguments[0],fm.stringExtensions.isNullOrEmpty(s)&&(s=this.getRequestUrl()),n=!1,r=null,this.getConcurrencyMode()===fm.webrtc.concurrencyMode.High&&(e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(fm.webrtc.publisher._requestUrlCache,s,e),r=e.getValue(),n=t),!n){if(r=s,r=fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(r,"src",fm.httpWebRequestTransfer.getPlatformCode()),"AspxAutoDetectCookieSupport","1"),this.getConcurrencyMode()!==fm.webrtc.concurrencyMode.High)return r;fm.webrtc.publisher._requestUrlCache[s]=r}return r},s.prototype.publish=function(){var e,t,n,s,r,i;return 3===arguments.length?(t=arguments[0],n=arguments[1],i=arguments[2],this.publish(new fm.webrtc.publication(t,n,i))):1===arguments.length?(s=arguments[0],r=this.publishMany([s]),e=r,null===e||"undefined"==typeof e||0===r.length?null:r[0]):2===arguments.length?(t=arguments[0],n=arguments[1],this.publish(new fm.webrtc.publication(t,n))):void 0},s.prototype.publishMany=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e||0===t.length)throw new Error("publications cannot be null/empty.");return this.performPublish(t)},s.prototype.raiseEvent=function(){var e,t,n;return n=arguments[0],t=arguments[1],t.setPublisher(this),e=n,null!==e&&"undefined"!=typeof e?n(this,t):void 0},s.prototype.raiseRequestEvent=function(){var e,t;return t=arguments[0],e=arguments[1],this.raiseEvent(t,e),!e.getCancel()},s.prototype.raiseResponseEvent=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],e.setException(n.getException()),this.raiseEvent(t,e)},s.prototype.send=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y;for(m=arguments[0],y=arguments[1],d=this.processRequestUrl(y),y=this.processRequestUrl(y),e=m,h=0,p=e.length;p>h;h++)g=e[h],this.getDisableBinary()&&g.setDisableBinary(this.getDisableBinary());a=new fm.webrtc.messageRequestArgs(this.createHeaders()),a.setMessages(m),a.setOnRequestCreated(this.internalOnRequestCreated),a.setOnResponseReceived(this.internalOnResponseReceived),a.setOnHttpRequestCreated(this.internalOnHttpRequestCreated),a.setOnHttpResponseReceived(this.internalOnHttpResponseReceived),a.setSender(this),a.setTimeout(this.getRequestTimeout()),a.setUrl(y),f=a,f.setDynamicValue("frameUrl",d),l=fm.webrtc.messageTransferFactory.getHttpMessageTransfer(),s=l.send(f);try{l.shutdown()}catch(u){c=u}finally{}return t=s.getException(),null!==t&&"undefined"!=typeof t?(r=new fm.webrtc.publisherResponseArgs,r.setException(s.getException()),r):(n=s.getMessages(),null===n||"undefined"==typeof n||0===s.getMessages().length?(i=new fm.webrtc.publisherResponseArgs,i.setException(new Error("Invalid response received from server.")),i):(o=new fm.webrtc.publisherResponseArgs,o.setResponses(s.getMessages()),o))},s._requestUrlCache={},s._requestUrlCacheLock=new fm.object,s}(fm.webrtc.baseClient);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.record=function(n){function s(){this.setValue=e(this.setValue,this),this.getValue=e(this.getValue,this),this.toString=e(this.toString,this),this.toJson=e(this.toJson,this),this.setValueJson=e(this.setValueJson,this),this.setValidate=e(this.setValidate,this),this.setPrivate=e(this.setPrivate,this),this.setKey=e(this.setKey,this),this.getValueJson=e(this.getValueJson,this),this.getValidate=e(this.getValidate,this),this.getPrivate=e(this.getPrivate,this),this.getKey=e(this.getKey,this),this.getHashCode=e(this.getHashCode,this),this.equals=e(this.equals,this),this.duplicate=e(this.duplicate,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setValidate(!0),void fm.util.attachProperties(this,arguments[0])):1===arguments.length?(t=arguments[0],void s.call(this,t,null)):0===arguments.length?(s.__super__.constructor.call(this),void this.setValidate(!0)):3===arguments.length?(t=arguments[0],r=arguments[1],n=arguments[2],s.call(this),this.setKey(t),this.setValueJson(r),void this.setPrivate(n)):2===arguments.length?(t=arguments[0],r=arguments[1],void s.call(this,t,r,!1)):void 0}return t(s,n),s.prototype.__key=null,s.prototype.__priv=!1,s.prototype.__valueJson=null,s.prototype._validate=!1,s.fromJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeRecord(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeRecordArray(e)},s.toJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeRecord(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeRecordArray(e)},s.prototype.duplicate=function(){return new fm.webrtc.record(this.getKey(),this.getValueJson(),this.getPrivate())},s.prototype.equals=function(){var e,t;return e=arguments[0],t=fm.global.tryCast(e,fm.webrtc.record),t===this},s.prototype.getHashCode=function(){var e,t,n;return n=17,e=this.getKey(),null!==e&&"undefined"!=typeof e&&(n=23*n+this.getKey().hashCode()),t=this.getValueJson(),null!==t&&"undefined"!=typeof t&&(n=23*n+this.getValueJson().hashCode()),23*n+this.getPrivate().hashCode()},s.prototype.getKey=function(){return this.__key},s.prototype.getPrivate=function(){return this.__priv},s.prototype.getValidate=function(){return this._validate},s.prototype.getValueJson=function(){return this.__valueJson},s.prototype.setKey=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e)throw new Error("key cannot be null.");return this.__key=t,this.setIsDirty(!0)},s.prototype.setPrivate=function(){var e;return e=arguments[0],this.__priv=e,this.setIsDirty(!0)},s.prototype.setValidate=function(){var e;return e=arguments[0],this._validate=e},s.prototype.setValueJson=function(){var e,t;if(t=arguments[0],e=t,this.getValidate()&&null!==e&&"undefined"!=typeof e&&!fm.serializer.isValidJson(t))throw new Error("value is not valid JSON.");return this.__valueJson=t,this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.webrtc.record.toJson(this)},s.prototype.toString=function(){return this.toJson()},s.prototype.getValue=function(){return fm.json.deserialize(this.getValueJson.apply(this,arguments))},s.prototype.setValue=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setValueJson.apply(this,arguments)},s}(fm.dynamic);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.serializer=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n.createAdvice=function(){return new fm.webrtc.advice},n.createBaseAdvice=function(){return new fm.webrtc.baseAdvice},n.createBoundRecords=function(){return{}},n.createExtensions=function(){return new fm.webrtc.extensions},n.createMessage=function(){return new fm.webrtc.message},n.createNotification=function(){return new fm.webrtc.notification},n.createNotifyingClient=function(){return new fm.webrtc.notifyingClient},n.createPublication=function(){return new fm.webrtc.publication},n.createPublishingClient=function(){return new fm.webrtc.publishingClient},n.createRecord=function(){return new fm.webrtc.record("key")},n.createSubscribedClient=function(){return new fm.webrtc.subscribedClient},n.createSubscription=function(){return new fm.webrtc.subscription("/")},n.deserializeAdvice=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createAdvice,n.deserializeAdviceCallback)},n.deserializeAdviceCallback=function(){var e,t,n;switch(e=arguments[0],t=arguments[1],n=arguments[2],t){case"websocket":return void e.setWebSocket(fm.webrtc.serializer.deserializeBaseAdvice(n));case"long-polling":return void e.setLongPolling(fm.webrtc.serializer.deserializeBaseAdvice(n));case"callback-polling":return void e.setCallbackPolling(fm.webrtc.serializer.deserializeBaseAdvice(n))}return fm.webrtc.serializer.deserializeBaseAdviceCallback(e,t,n)},n.deserializeBaseAdvice=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createBaseAdvice,n.deserializeBaseAdviceCallback)},n.deserializeBaseAdviceCallback=function(){var e,t,n,s,r;if(t=arguments[0],n=arguments[1],r=arguments[2],s=n,e=s,null!==e&&"undefined"!=typeof e){if("hosts"===s)return t.setHosts(fm.serializer.deserializeStringArray(r));if("interval"===s)return t.setInterval(fm.serializer.deserializeInteger(r));if("reconnect"===s)return t.setReconnect(fm.webrtc.serializer.deserializeReconnect(r))}},n.deserializeBoundRecords=function(){var e;return e=arguments[0],fm.serializer.deserializeObject(e,n.createBoundRecords,n.deserializeBoundRecordsCallback)},n.deserializeBoundRecordsCallback=function(){var e,t,n;return e=arguments[0],t=arguments[1],n=arguments[2],e[t]=new fm.webrtc.record(t,fm.serializer.deserializeRaw(n))},n.deserializeConnectionType=function(){var e;switch(e=arguments[0],fm.serializer.deserializeString(e)){case"long-polling":return fm.webrtc.connectionType.LongPolling;case"callback-polling":return fm.webrtc.connectionType.CallbackPolling;case"websocket":return fm.webrtc.connectionType.WebSocket;case"iframe":return fm.webrtc.connectionType.IFrame;case"flash":return fm.webrtc.connectionType.Flash}return fm.webrtc.connectionType.Unknown},n.deserializeConnectionTypeArray=function(){var e,t,n,s;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===e||e.length<2||"["!==e.charAt(0)||"]"!==e.charAt(e.length-1))return null;for(e=fm.stringExtensions.substring(e,1,e.length-2),n=fm.stringExtensions.split(e,[","]),s=new Array(n.length),t=0;t<n.length;)try{s[t]=fm.webrtc.serializer.deserializeConnectionType(n[t])}finally{t++}return s},n.deserializeExtensions=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createExtensions,n.deserializeExtensionsCallback)},n.deserializeExtensionsCallback=function(){var e,t,n;return e=arguments[0],t=arguments[1],n=arguments[2],e.setValueJson(t,fm.serializer.deserializeRaw(n),!1)},n.deserializeMessage=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createMessage,n.deserializeMessageCallback)},n.deserializeMessageArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createMessage,n.deserializeMessageCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializeMessageCallback=function(){var e,t,n,s,r;switch(e=arguments[0],t=arguments[1],r=arguments[2],e.setValidate(!1),t){case"advice":e.setAdvice(fm.webrtc.serializer.deserializeAdvice(r));break;case"binding":e.setRecords(fm.webrtc.serializer.deserializeRecordArray(r));break;case"channel":e.setBayeuxChannel(fm.serializer.deserializeString(r));break;case"clientId":e.setClientId(fm.serializer.deserializeGuid(r));break;case"connectionType":e.setConnectionType(fm.webrtc.serializer.deserializeConnectionType(r));break;case"data":e.setDataJson(fm.serializer.deserializeRaw(r));break;case"error":e.setError(fm.serializer.deserializeString(r));break;case"ext":e.setExtensions(fm.webrtc.serializer.deserializeExtensions(r));break;case"id":e.setId(fm.serializer.deserializeString(r));break;case"minimumVersion":e.setMinimumVersion(fm.serializer.deserializeString(r));break;case"subscription":if(!fm.stringExtensions.startsWith(r,"[")){s=fm.serializer.deserializeString(r),fm.stringExtensions.isNullOrEmpty(s)||e.setChannels([s]);break}e.setChannels(fm.serializer.deserializeStringArray(r));break;case"successful":n=fm.serializer.deserializeBoolean(r),e.setSuccessful(n===!0);break;case"supportedConnectionTypes":e.setSupportedConnectionTypes(fm.webrtc.serializer.deserializeConnectionTypeArray(r));break;case"timestamp":e.setTimestamp(fm.webrtc.serializer.deserializeTimestamp(r));break;case"version":e.setVersion(fm.serializer.deserializeString(r))}return e.setValidate(!0)},n.deserializeNotification=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createNotification,n.deserializeNotificationCallback)},n.deserializeNotificationArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createNotification,n.deserializeNotificationCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializeNotificationCallback=function(){var e,t,n,s,r,i;return n=arguments[0],t=arguments[1],i=arguments[2],n.setValidate(!1),r=t,e=r,null!==e&&"undefined"!=typeof e&&("data"!==r?"ext"===r?n.setExtensions(fm.webrtc.serializer.deserializeExtensions(i)):"successful"===r?(s=fm.serializer.deserializeBoolean(i),n.setSuccessful(s===!0)):"error"===r?n.setError(fm.serializer.deserializeString(i)):"timestamp"===r&&n.setTimestamp(fm.webrtc.serializer.deserializeTimestamp(i)):n.setDataJson(fm.serializer.deserializeRaw(i))),n.setValidate(!0)},n.deserializeNotifyingClient=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createNotifyingClient,n.deserializeNotifyingClientCallback)},n.deserializeNotifyingClientCallback=function(){var e,t,n,s,r;if(n=arguments[0],t=arguments[1],r=arguments[2],s=t,e=s,null!==e&&"undefined"!=typeof e){if("clientId"===s)return n.setClientId(fm.serializer.deserializeGuid(r));if("boundRecords"===s)return n.setBoundRecords(fm.webrtc.serializer.deserializeBoundRecords(r))}},n.deserializePublication=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createPublication,n.deserializePublicationCallback)},n.deserializePublicationArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createPublication,n.deserializePublicationCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializePublicationCallback=function(){var e,t,n,s,r,i;return s=arguments[0],t=arguments[1],i=arguments[2],s.setValidate(!1),r=t,e=r,null!==e&&"undefined"!=typeof e&&("channel"!==r?"data"===r?s.setDataJson(fm.serializer.deserializeRaw(i)):"ext"===r?s.setExtensions(fm.webrtc.serializer.deserializeExtensions(i)):"successful"===r?(n=fm.serializer.deserializeBoolean(i),s.setSuccessful(n===!0)):"error"===r?s.setError(fm.serializer.deserializeString(i)):"timestamp"===r&&s.setTimestamp(fm.webrtc.serializer.deserializeTimestamp(i)):s.setChannel(fm.serializer.deserializeString(i))),s.setValidate(!0)},n.deserializePublishingClient=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createPublishingClient,n.deserializePublishingClientCallback)},n.deserializePublishingClientCallback=function(){var e,t,n,s,r;if(n=arguments[0],t=arguments[1],r=arguments[2],s=t,e=s,null!==e&&"undefined"!=typeof e){if("clientId"===s)return n.setClientId(fm.serializer.deserializeGuid(r));if("boundRecords"===s)return n.setBoundRecords(fm.webrtc.serializer.deserializeBoundRecords(r))}},n.deserializeReconnect=function(){var e;switch(e=arguments[0],fm.serializer.deserializeString(e)){case"retry":return fm.webrtc.reconnect.Retry;case"handshake":return fm.webrtc.reconnect.Handshake;case"none":return fm.webrtc.reconnect.None}throw new Error("Unknown reconnect advice.")},n.deserializeRecord=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createRecord,n.deserializeRecordCallback)},n.deserializeRecordArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createRecord,n.deserializeRecordCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializeRecordCallback=function(){var e,t,n,s,r,i;return s=arguments[0],t=arguments[1],i=arguments[2],s.setValidate(!1),r=t,e=r,null!==e&&"undefined"!=typeof e&&("key"!==r?"private"===r?(n=fm.serializer.deserializeBoolean(i),s.setPrivate(n===!0)):"value"===r&&s.setValueJson(fm.serializer.deserializeRaw(i)):s.setKey(fm.serializer.deserializeString(i))),s.setValidate(!0)},n.deserializeSubscribedClient=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createSubscribedClient,n.deserializeSubscribedClientCallback)},n.deserializeSubscribedClientArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createSubscribedClient,n.deserializeSubscribedClientCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializeSubscribedClientCallback=function(){var e,t,n,s,r;if(s=arguments[0],t=arguments[1],r=arguments[2],n=t,e=n,null!==e&&"undefined"!=typeof e){if("clientId"===n)return s.setClientId(fm.serializer.deserializeGuid(r));if("boundRecords"===n)return s.setBoundRecords(fm.webrtc.serializer.deserializeBoundRecords(r))}},n.deserializeSubscription=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createSubscription,n.deserializeSubscriptionCallback)},n.deserializeSubscriptionArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createSubscription,n.deserializeSubscriptionCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializeSubscriptionCallback=function(){var e,t,n,s,r;if(s=arguments[0],t=arguments[1],r=arguments[2],n=t,e=n,null!==e&&"undefined"!=typeof e){if("channel"===n)return s.setChannel(fm.serializer.deserializeString(r));if("tag"===n)return s.setTag(fm.serializer.deserializeString(r))}},n.deserializeTimestamp=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y,_,b,v,R,C,w,S,O,x,E,P,A;if(P=arguments[0],b=fm.serializer.deserializeString(P),A=fm.dateTime.getUtcNow(),!fm.stringExtensions.isNullOrEmpty(b)){if(E=fm.stringExtensions.split(b,["T"]),2!==E.length)return A;if(R=E[0],C=E[1],E=fm.stringExtensions.split(R,["-"]),3!==E.length)return A;if(_=E[0],w=E[1],S=E[2],E=fm.stringExtensions.split(C,[":"]),3!==E.length)return A;if(O=E[0],x=E[1],E=fm.stringExtensions.split(E[2],["."]),2!==E.length)return A;v=E[0],p=0,g=0,f=0,m=0,d=0,y=0,e=new fm.holder(p),t=fm.parseAssistant.tryParseIntegerValue(_,e),p=e.getValue(),r=new fm.holder(g),i=fm.parseAssistant.tryParseIntegerValue(w,r),g=r.getValue(),o=new fm.holder(f),a=fm.parseAssistant.tryParseIntegerValue(S,o),f=o.getValue(),u=new fm.holder(m),c=fm.parseAssistant.tryParseIntegerValue(O,u),m=u.getValue(),l=new fm.holder(d),h=fm.parseAssistant.tryParseIntegerValue(x,l),d=l.getValue(),n=new fm.holder(y),s=fm.parseAssistant.tryParseIntegerValue(v,n),y=n.getValue(),t&&i&&a&&c&&h&&s&&(A=new fm.dateTime(p,g,f,m,d,y))}return A},n.serializeAdvice=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeAdviceCallback)},n.serializeAdviceCallback=function(){var e,t,n,s,r;return s=arguments[0],r=arguments[1],fm.webrtc.serializer.serializeBaseAdviceCallback(s,r),e=s.getWebSocket(),null!==e&&"undefined"!=typeof e&&(r.websocket=fm.webrtc.serializer.serializeBaseAdvice(s.getWebSocket())),t=s.getLongPolling(),null!==t&&"undefined"!=typeof t&&(r["long-polling"]=fm.webrtc.serializer.serializeBaseAdvice(s.getLongPolling())),n=s.getCallbackPolling(),null!==n&&"undefined"!=typeof n?r["callback-polling"]=fm.webrtc.serializer.serializeBaseAdvice(s.getCallbackPolling()):void 0},n.serializeBaseAdvice=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeBaseAdviceCallback)},n.serializeBaseAdviceCallback=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=t.getHosts(),null!==e&&"undefined"!=typeof e&&(n.hosts=fm.serializer.serializeStringArray(t.getHosts())),null!==t.getInterval()&&(n.interval=fm.serializer.serializeInteger(t.getInterval())),null!==t.getReconnect()?n.reconnect=fm.webrtc.serializer.serializeReconnect(t.getReconnect()):void 0},n.serializeBoundRecords=function(){var e;return e=arguments[0],fm.serializer.serializeObject(e,n.serializeBoundRecordsCallback)},n.serializeBoundRecordsCallback=function(){var e,t,n,s,r,i,o;for(t=arguments[0],s=arguments[1],e=fm.hashExtensions.getKeys(t),i=[],n=0,r=e.length;r>n;n++)o=e[n],i.push(s[o]=fm.serializer.serializeRaw(t[o].getValueJson()));return i},n.serializeConnectionType=function(){var e,t;switch(e=arguments[0],t=null,e){case fm.webrtc.connectionType.WebSocket:t="websocket";break;case fm.webrtc.connectionType.LongPolling:t="long-polling";break;case fm.webrtc.connectionType.CallbackPolling:t="callback-polling";break;case fm.webrtc.connectionType.IFrame:t="iframe";break;case fm.webrtc.connectionType.Flash:t="flash"}return fm.serializer.serializeString(t)},n.serializeConnectionTypeArray=function(){var e,t,n;for(e=arguments[0],n=new Array(e.length),t=0;t<e.length;)try{n[t]=fm.webrtc.serializer.serializeConnectionType(e[t])}finally{t++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",n),"]")},n.serializeExtensions=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeExtensionsCallback)},n.serializeExtensionsCallback=function(){var e,t,n,s,r,i,o;for(t=arguments[0],s=arguments[1],e=t.getNames(),i=[],n=0,r=e.length;r>n;n++)o=e[n],i.push(s[o]=fm.serializer.serializeRaw(t.getValueJson(o)));return i},n.serializeMessage=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeMessageCallback)},n.serializeMessageArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeMessageCallback)},n.serializeMessageCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h;return h=arguments[0],l=arguments[1],null!==h.getClientId()&&(l.clientId=fm.serializer.serializeGuid(h.getClientId())),null!==h.getTimestamp()&&(l.timestamp=fm.webrtc.serializer.serializeTimestamp(h.getTimestamp())),e=h.getAdvice(),null!==e&&"undefined"!=typeof e&&(l.advice=fm.webrtc.serializer.serializeAdvice(h.getAdvice())),t=h.getRecords(),null===t||"undefined"==typeof t||h.getType()!==fm.webrtc.messageType.Bind&&h.getType()!==fm.webrtc.messageType.Unbind||(l.binding=fm.webrtc.serializer.serializeRecordArray(h.getRecords())),n=h.getBayeuxChannel(),null!==n&&"undefined"!=typeof n&&(l.channel=fm.serializer.serializeString(h.getBayeuxChannel())),null!==h.getConnectionType()&&(l.connectionType=fm.webrtc.serializer.serializeConnectionType(h.getConnectionType())),s=h.getDataJson(),null!==s&&"undefined"!=typeof s&&(l.data=fm.serializer.serializeRaw(h.getDataJson())),r=h.getError(),null!==r&&"undefined"!=typeof r&&(l.error=fm.serializer.serializeString(h.getError())),h.getExtensions().getCount()>0&&(l.ext=fm.webrtc.serializer.serializeExtensions(h.getExtensions())),i=h.getId(),null!==i&&"undefined"!=typeof i&&(l.id=fm.serializer.serializeString(h.getId())),o=h.getMinimumVersion(),null!==o&&"undefined"!=typeof o&&(l.minimumVersion=fm.serializer.serializeString(h.getMinimumVersion())),a=h.getChannels(),null===a||"undefined"==typeof a||h.getType()!==fm.webrtc.messageType.Subscribe&&h.getType()!==fm.webrtc.messageType.Unsubscribe||(l.subscription=fm.serializer.serializeStringArray(h.getChannels())),h.getSuccessful()&&(l.successful=fm.serializer.serializeBoolean(h.getSuccessful())),u=h.getSupportedConnectionTypes(),null!==u&&"undefined"!=typeof u&&(l.supportedConnectionTypes=fm.webrtc.serializer.serializeConnectionTypeArray(h.getSupportedConnectionTypes())),c=h.getVersion(),null!==c&&"undefined"!=typeof c?l.version=fm.serializer.serializeString(h.getVersion()):void 0},n.serializeNotification=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeNotificationCallback)},n.serializeNotificationArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeNotificationCallback)},n.serializeNotificationCallback=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s.getError(),null!==e&&"undefined"!=typeof e&&(n.error=fm.serializer.serializeString(s.getError())),s.getSuccessful()&&(n.successful=fm.serializer.serializeBoolean(s.getSuccessful())),null!==s.getTimestamp()&&(n.timestamp=fm.webrtc.serializer.serializeTimestamp(s.getTimestamp())),s.getExtensions().getCount()>0&&(n.ext=fm.webrtc.serializer.serializeExtensions(s.getExtensions())),t=s.getDataJson(),null!==t&&"undefined"!=typeof t?n.data=fm.serializer.serializeRaw(s.getDataJson()):void 0},n.serializeNotifyingClient=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeNotifyingClientCallback)},n.serializeNotifyingClientCallback=function(){var e,t,n;return n=arguments[0],t=arguments[1],null!==n.getClientId()&&(t.clientId=fm.serializer.serializeGuid(n.getClientId())),e=n.getBoundRecords(),null!==e&&"undefined"!=typeof e?t.boundRecords=fm.webrtc.serializer.serializeBoundRecords(n.getBoundRecords()):void 0},n.serializePublication=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializePublicationCallback)},n.serializePublicationArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializePublicationCallback)},n.serializePublicationCallback=function(){var e,t,n,s,r;return r=arguments[0],s=arguments[1],e=r.getChannel(),null!==e&&"undefined"!=typeof e&&(s.channel=fm.serializer.serializeString(r.getChannel())),t=r.getError(),null!==t&&"undefined"!=typeof t&&(s.error=fm.serializer.serializeString(r.getError())),r.getSuccessful()&&(s.successful=fm.serializer.serializeBoolean(r.getSuccessful())),null!==r.getTimestamp()&&(s.timestamp=fm.webrtc.serializer.serializeTimestamp(r.getTimestamp())),r.getExtensions().getCount()>0&&(s.ext=fm.webrtc.serializer.serializeExtensions(r.getExtensions())),n=r.getDataJson(),null!==n&&"undefined"!=typeof n?s.data=fm.serializer.serializeRaw(r.getDataJson()):void 0},n.serializePublishingClient=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializePublishingClientCallback)},n.serializePublishingClientCallback=function(){var e,t,n;return n=arguments[0],t=arguments[1],null!==n.getClientId()&&(t.clientId=fm.serializer.serializeGuid(n.getClientId())),e=n.getBoundRecords(),null!==e&&"undefined"!=typeof e?t.boundRecords=fm.webrtc.serializer.serializeBoundRecords(n.getBoundRecords()):void 0},n.serializeReconnect=function(){var e,t;switch(e=arguments[0],t=null,e){case fm.webrtc.reconnect.Retry:t="retry";break;case fm.webrtc.reconnect.Handshake:t="handshake";break;case fm.webrtc.reconnect.None:t="none"}return fm.serializer.serializeString(t)},n.serializeRecord=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeRecordCallback)},n.serializeRecordArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeRecordCallback)},n.serializeRecordCallback=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s.getKey(),null!==e&&"undefined"!=typeof e&&(n.key=fm.serializer.serializeString(s.getKey())),s.getPrivate()&&(n["private"]=fm.serializer.serializeBoolean(s.getPrivate())),t=s.getValueJson(),null!==t&&"undefined"!=typeof t?n.value=fm.serializer.serializeRaw(s.getValueJson()):void 0},n.serializeSubscribedClient=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeSubscribedClientCallback)},n.serializeSubscribedClientArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeSubscribedClientCallback)},n.serializeSubscribedClientCallback=function(){var e,t,n;return n=arguments[0],t=arguments[1],t.clientId=fm.serializer.serializeGuid(n.getClientId()),e=n.getBoundRecords(),null!==e&&"undefined"!=typeof e?t.boundRecords=fm.webrtc.serializer.serializeBoundRecords(n.getBoundRecords()):void 0},n.serializeSubscription=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeSubscriptionCallback)},n.serializeSubscriptionArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeSubscriptionCallback)},n.serializeSubscriptionCallback=function(){var e,t,n;return n=arguments[0],t=arguments[1],t.channel=fm.serializer.serializeString(n.getChannel()),e=n.getTag(),
null!==e&&"undefined"!=typeof e?t.tag=fm.serializer.serializeString(n.getTag()):void 0},n.serializeTimestamp=function(){var e,t,n,s,r,i,o,a;if(a=arguments[0],e=null,null!==a){for(t=fm.intExtensions.toString(a.getYear()),n=fm.intExtensions.toString(a.getMonth()),s=fm.intExtensions.toString(a.getDay()),r=fm.intExtensions.toString(a.getHour()),i=fm.intExtensions.toString(a.getMinute()),o=fm.intExtensions.toString(a.getSecond());t.length<4;)t=fm.stringExtensions.concat("0",t);for(;n.length<2;)n=fm.stringExtensions.concat("0",n);for(;s.length<2;)s=fm.stringExtensions.concat("0",s);for(;r.length<2;)r=fm.stringExtensions.concat("0",r);for(;i.length<2;)i=fm.stringExtensions.concat("0",i);for(;o.length<2;)o=fm.stringExtensions.concat("0",o);e=fm.stringExtensions.format("{0}-{1}-{2}T{3}:{4}:{5}.00",[t,n,s,r,i,o])}return fm.serializer.serializeString(e)},n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.webSocketMessageTransfer=function(n){function s(){this.shutdown=e(this.shutdown,this),this.setUrl=e(this.setUrl,this),this.setStreamTimeout=e(this.setStreamTimeout,this),this.setSender=e(this.setSender,this),this.setOnStreamFailure=e(this.setOnStreamFailure,this),this.setOnResponseReceived=e(this.setOnResponseReceived,this),this.setOnRequestCreated=e(this.setOnRequestCreated,this),this.setOnOpenSuccess=e(this.setOnOpenSuccess,this),this.setOnOpenFailure=e(this.setOnOpenFailure,this),this.setHandshakeTimeout=e(this.setHandshakeTimeout,this),this.sendMessagesAsyncCallback=e(this.sendMessagesAsyncCallback,this),this.sendMessagesAsync=e(this.sendMessagesAsync,this),this.sendMessages=e(this.sendMessages,this),this.open=e(this.open,this),this.getUrl=e(this.getUrl,this),this.getStreamTimeout=e(this.getStreamTimeout,this),this.getSender=e(this.getSender,this),this.getOnStreamFailure=e(this.getOnStreamFailure,this),this.getOnResponseReceived=e(this.getOnResponseReceived,this),this.getOnRequestCreated=e(this.getOnRequestCreated,this),this.getOnOpenSuccess=e(this.getOnOpenSuccess,this),this.getOnOpenFailure=e(this.getOnOpenFailure,this),this.getHandshakeTimeout=e(this.getHandshakeTimeout,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._callbackKey="fm.webrtc.webSocketMessageTransfer.callback",void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(s.__super__.constructor.call(this),void(this._callbackKey="fm.webrtc.webSocketMessageTransfer.callback")):1===arguments.length?(t=arguments[0],s.call(this),this.setUrl(t),void(this._webSocketTransfer=fm.webSocketTransferFactory.getWebSocketTransfer(this.getUrl()))):void 0}return t(s,n),s.prototype._callbackKey=null,s.prototype._url=null,s.prototype._webSocketTransfer=null,s.prototype.getHandshakeTimeout=function(){return this._webSocketTransfer.getHandshakeTimeout()},s.prototype.getOnOpenFailure=function(){return this._webSocketTransfer.getOnOpenFailure()},s.prototype.getOnOpenSuccess=function(){return this._webSocketTransfer.getOnOpenSuccess()},s.prototype.getOnRequestCreated=function(){return this._webSocketTransfer.getOnRequestCreated()},s.prototype.getOnResponseReceived=function(){return this._webSocketTransfer.getOnResponseReceived()},s.prototype.getOnStreamFailure=function(){return this._webSocketTransfer.getOnStreamFailure()},s.prototype.getSender=function(){return this._webSocketTransfer.getSender()},s.prototype.getStreamTimeout=function(){return this._webSocketTransfer.getHandshakeTimeout()},s.prototype.getUrl=function(){return this._url},s.prototype.open=function(){var e;return e=arguments[0],this._webSocketTransfer.open(e)},s.prototype.sendMessages=function(){var e,t,n;return n=arguments[0],e=this.messageRequestArgsToHttpRequestArgs(n),t=this._webSocketTransfer.send(e),this.httpResponseArgsToMessageResponseArgs(t)},s.prototype.sendMessagesAsync=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=this.messageRequestArgsToHttpRequestArgs(n),e.setDynamicValue(this._callbackKey,t),this._webSocketTransfer.sendAsync(e,this.sendMessagesAsyncCallback)},s.prototype.sendMessagesAsyncCallback=function(){var e,t;return t=arguments[0],e=t.getRequestArgs().getDynamicValue(this._callbackKey),t.getRequestArgs().unsetDynamicValue(this._callbackKey),e(this.httpResponseArgsToMessageResponseArgs(t))},s.prototype.setHandshakeTimeout=function(){var e;return e=arguments[0],this._webSocketTransfer.setHandshakeTimeout(e)},s.prototype.setOnOpenFailure=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnOpenFailure(e)},s.prototype.setOnOpenSuccess=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnOpenSuccess(e)},s.prototype.setOnRequestCreated=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnRequestCreated(e)},s.prototype.setOnResponseReceived=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnResponseReceived(e)},s.prototype.setOnStreamFailure=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnStreamFailure(e)},s.prototype.setSender=function(){var e;return e=arguments[0],this._webSocketTransfer.setSender(e)},s.prototype.setStreamTimeout=function(){var e;return e=arguments[0],this._webSocketTransfer.setHandshakeTimeout(e)},s.prototype.setUrl=function(){var e;return e=arguments[0],this._url=e},s.prototype.shutdown=function(){var e,t;try{return this._webSocketTransfer.shutdown()}catch(e){t=e}finally{}},s}(fm.webrtc.messageTransfer);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.webrtc.subscription=function(n){function s(){this.toJson=e(this.toJson,this),this.setTag=e(this.setTag,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getHashCode=e(this.getHashCode,this),this.getChannel=e(this.getChannel,this),this.equals=e(this.equals,this),this.duplicate=e(this.duplicate,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(t=arguments[0],n=arguments[1],s.__super__.constructor.call(this),this.setChannel(t),void this.setTag(n)):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),void this.setChannel(t)):void 0}return t(s,n),s.prototype.__channel=null,s.prototype.__tag=null,s.fromJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeSubscription(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeSubscriptionArray(e)},s.toJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeSubscription(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeSubscriptionArray(e)},s.prototype.duplicate=function(){return new fm.webrtc.subscription(this.getChannel(),this.getTag())},s.prototype.equals=function(){var e,t;return e=arguments[0],t=fm.global.tryCast(e,fm.webrtc.subscription),t===this},s.prototype.getChannel=function(){return this.__channel},s.prototype.getHashCode=function(){var e,t;return t=17,t=23*t+this.getChannel().hashCode(),e=this.getTag(),null!==e&&"undefined"!=typeof e&&(t=23*t+this.getTag().hashCode()),t},s.prototype.getTag=function(){var e;return null!=(e=this.__tag)?e:fm.stringExtensions.empty},s.prototype.setChannel=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e)throw new Error("channel cannot be null.");return this.__channel=t,this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.__tag=null!=e?e:fm.stringExtensions.empty,this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.webrtc.subscription.toJson(this)},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;return fm.webrtc.subscribedClient=function(n){function s(){this.getBoundRecordValue=e(this.getBoundRecordValue,this),this.toJson=e(this.toJson,this),this.setClientId=e(this.setClientId,this),this.setBoundRecords=e(this.setBoundRecords,this),this.getClientId=e(this.getClientId,this),this.getBoundRecordValueJson=e(this.getBoundRecordValueJson,this),this.getBoundRecords=e(this.getBoundRecords,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setBoundRecords({}),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(n=arguments[0],t=arguments[1],s.__super__.constructor.call(this),this.setClientId(n),void this.setBoundRecords(t)):0===arguments.length?(s.__super__.constructor.call(this),void this.setBoundRecords({})):void 0}return t(s,n),s.prototype._boundRecords=null,s.prototype._clientId=null,s.fromJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeSubscribedClient(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.deserializeSubscribedClientArray(e)},s.toJson=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeSubscribedClient(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.webrtc.serializer.serializeSubscribedClientArray(e)},s.prototype.getBoundRecords=function(){return this._boundRecords},s.prototype.getBoundRecordValueJson=function(){var e,t,n,s,r;return s=arguments[0],e=this.getBoundRecords(),null===e||"undefined"==typeof e?null:(r=null,t=new fm.holder(r),n=fm.hashExtensions.tryGetValue(this.getBoundRecords(),s,t),r=t.getValue(),n?r.getValueJson():null)},s.prototype.getClientId=function(){return this._clientId},s.prototype.setBoundRecords=function(){var e;return e=arguments[0],this._boundRecords=e},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.toJson=function(){return fm.webrtc.subscribedClient.toJson(this)},s.prototype.getBoundRecordValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments))},s}(fm.serializable),function(){var e,t,n,s,r,i,o,a,u,c,l,h;return n=fm.webrtc.client,n.addOnConnectRequest(function(e,t){var s;s=t.getMethodArgs(),s.getIsReconnect()||s.getLastClientId()||s.getLastSessionId()||(n=l(),n&&(s.setLastClientId(n.clientId),s.setLastSessionId(n.sessionId),n.token&&e.setToken(n.token),i(n.clientId)))}),n.addOnConnectEnd(function(e,t){var n;t.getException()||(n=t.getMethodArgs(),n.getLastClientId()&&s(n.getLastClientId()),o({clientId:e.getClientId(),sessionId:e.getSessionId(),token:e.getToken()}))}),n.addOnDisconnectEnd(function(e,t){t.getException()||s(e.getClientId())}),fm.util.observe(window,"beforeunload",function(){var e,t,n,s;for(t=c(),n=0,s=t.length;s>n;n++)e=t[n],u(e)}),e=[],c=function(){return e},o=function(t){e.push(t)},s=function(t){var n,s,r,i;for(s=r=0,i=e.length;i>r;s=++r)if(n=e[s],n.clientId.equals(t))return void e.splice(s,1)},t="fm-webrtc-",l=function(){var e,n,s,r;r=h(),e=null;for(n in r)s=r[n],fm.stringExtensions.startsWith(n,t)&&(s=fm.json.deserialize(s),e={clientId:new fm.guid(s.clientId),sessionId:new fm.guid(s.sessionId),token:s.token});return e},u=function(e){var n;n={clientId:e.clientId.toString(),sessionId:e.sessionId.toString(),token:e.token},a(t+e.clientId.toString(),fm.json.serialize(n),60)},i=function(e){r(t+e.toString())},h=function(){var e,t,n,s,r,i;for(n={},t=document.cookie.split(";"),r=0,i=t.length;i>r;r++){for(e=t[r];" "===e.charAt(0);)e=e.substring(1,e.length);s=e.indexOf("="),s>=0&&(n[e.substring(0,s)]=decodeURIComponent(e.substring(s+1,e.length)))}return n},a=function(e,t,n){var s,r;r="",n&&(s=new Date,s.setTime(s.getTime()+1e3*n),r="; expires="+s.toGMTString()),document.cookie=e+"="+encodeURIComponent(t)+r+"; path=/"},r=function(e){a(e,"",-1)}}(),function(){var e,t,n,s,r,i,o,a,u,c,l;for(t=fm.webrtc.client,l=["connect","disconnect","subscribe","unsubscribe","bind","unbind","publish","notify","service"],n=function(e){var n;return n=t.prototype[e],t.prototype[e]=function(){var t,s,r,i,o,a;if(1===arguments.length&&fm.util.isPlainObject(arguments[0])){if(i=arguments[0],i.record&&fm.util.isPlainObject(i.record)&&(i.record=new fm.webrtc.record(i.record)),i.records)for(a=i.records,t=s=0,r=a.length;r>s;t=++s)o=a[t],fm.util.isPlainObject(i.records[t])&&(i.records[t]=new fm.webrtc.record(i.records[t]));return n.call(this,new fm.webrtc[e+"Args"](i))}return n.apply(this,arguments)}},s=0,r=l.length;r>s;s++)i=l[s],n(i);a=t.prototype.constructor,u=t.prototype,o=t,e=!1,fm.webrtc.client.enableMultiple=!1,fm.webrtc.client=function(){var n;if(e&&!t.enableMultiple)throw Error("To create multiple instances of the JavaScript client, set fm.webrtc.client.enableMultiple to true.");return e=!0,a.apply(this,arguments),n=this,fm.util.observe(window,"beforeunload",function(){var e,t;e=n._autoDisconnect,e&&(t=n._autoDisconnectConfig,t?n.disconnect(t):n.disconnect())}),n},fm.webrtc.client.prototype=u;for(c in o)fm.webrtc.client[c]=o[c];return t=fm.webrtc.client,t.prototype.setDisableCORS=function(e){return this._disableCORS=e},t.prototype.getDisableCORS=function(){return this._disableCORS||!1},t.prototype.setDisablePostMessage=function(e){return this._disablePostMessage=e},t.prototype.getDisablePostMessage=function(){return this._disablePostMessage||!1},t.prototype.setForceJSONP=function(e){return this._forceJSONP=e},t.prototype.getForceJSONP=function(){return this._forceJSONP||!1},t.prototype.setAutoDisconnect=function(e){return this._autoDisconnect=!0,this._autoDisconnectConfig=e}}(),fm.webrtc});
